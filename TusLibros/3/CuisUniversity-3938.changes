

----STARTUP---- (4 November 2019 18:42:16) as /Users/cmurga/Downloads/macos64/CuisUniversity-3938.image!


!classRemoval: #Client stamp: 'cmmmmm 11/4/2019 18:42:47'!
Object subclass: #Client
	instanceVariableNames: 'password'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classRemoval: #Cart stamp: 'cmmmmm 11/4/2019 18:42:47'!
Object subclass: #Cart
	instanceVariableNames: 'client password books'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classRemoval: #Book stamp: 'cmmmmm 11/4/2019 18:42:48'!
Object subclass: #Book
	instanceVariableNames: 'isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classRemoval: #CartTest stamp: 'cmmmmm 11/4/2019 18:42:48'!
TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #CartTest category: #'Tus-Libros' stamp: 'cmmmmm 11/4/2019 18:42:52'!
TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!CartTest methodsFor: 'as yet unclassified' stamp: 'LS 10/29/2019 21:09:29'!
                    test01NuevoCarritoEsVacio

	| aCart aClient aPassword |
	aPassword := 'passwordExample'.
	aClient := Client with: aPassword.
	aCart := Cart withClient: aClient andPassword: aPassword.
	
	self assert: aCart isEmpty.! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'LS 10/29/2019 21:25:30'!
                         test02CarritoConUnLibroNoEstaVacio

	| aCart aClient aPassword aBook aQuantity anISBNNumber |
	aPassword := 'passwordExample'.
	aClient := Client with: aPassword.
	aCart := Cart withClient: aClient andPassword: aPassword.
	
	anISBNNumber := 9780805511963.
	aBook := Book with: anISBNNumber.
	aQuantity := 1.
	
	aCart addToCart: aBook isbn quantity: aQuantity.
	
	self deny: aCart isEmpty.! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 10/31/2019 17:01:21'!
       test03ListarNuevoCarritoEsListaVacia

	| aCart aClient aPassword aList |
	
	aPassword := 'passwordExample'.
	aClient := Client with: aPassword.
	aCart := Cart withClient: aClient andPassword: aPassword.
	
	aList := aCart listCart.
	
	self assert: '0' equals: aList.! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 10/31/2019 17:00:34'!
  test04ListarCarritoConUnLibroContieneEseLibro

	| aCart aClient aPassword aBook aQuantity anISBNNumber aList theWantedList |
	aPassword := 'passwordExample'.
	aClient := Client with: aPassword.
	aCart := Cart withClient: aClient andPassword: aPassword.
	
	anISBNNumber := 9780805511963.
	aBook := Book with: anISBNNumber.
	aQuantity := 1.
	aCart addToCart: aBook quantity: aQuantity.
	
	aList := aCart listCart.
	theWantedList := '0','|', anISBNNumber asString , '|', aQuantity asString.
	
	self assert: theWantedList equals: aList.! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 10/31/2019 17:01:45'!
                       test05ListarCarritoCon2LibrosMuestraLos2Libros

	| aCart aClient aPassword aBook aBook2 aQuantity anISBNNumber anISBNNumber2 aList theWantedList |
	aPassword := 'passwordExample'.
	aClient := Client with: aPassword.
	aCart := Cart withClient: aClient andPassword: aPassword.
	
	anISBNNumber := 9780805511963.
	aBook := Book with: anISBNNumber.
	aQuantity := 1.
	aCart addToCart: aBook quantity: aQuantity.
	
	anISBNNumber2 := 9780805511969.
	aBook2 := Book with: anISBNNumber2.
	aQuantity := 1.
	aCart addToCart: aBook2 quantity: aQuantity.
	
	
	aList := aCart listCart.
	theWantedList := '0','|',anISBNNumber asString , '|', aQuantity asString, '|', anISBNNumber2 asString , '|', aQuantity asString.
	
	self assert: theWantedList equals: aList.! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 10/31/2019 17:03:24'!
  test06ListarCarritoCon2LibrosIgualesMuestra1LibroConCantidad2

	| aCart aClient aPassword aBook aQuantity anISBNNumber aList theWantedList |
	aPassword := 'passwordExample'.
	aClient := Client with: aPassword.
	aCart := Cart withClient: aClient andPassword: aPassword.
	
	anISBNNumber := 9780805511963.
	aBook := Book with: anISBNNumber.
	aQuantity := 2.
	aCart addToCart: aBook quantity: aQuantity.
	
	aList := aCart listCart.
	theWantedList := '0','|',anISBNNumber asString , '|', aQuantity asString.
	
	self assert: theWantedList equals: aList.! !

Object subclass: #Book
	instanceVariableNames: 'isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #Book category: #'Tus-Libros' stamp: 'cmmmmm 11/4/2019 18:42:52'!
Object subclass: #Book
	instanceVariableNames: 'isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Book methodsFor: 'initialization' stamp: 'LS 10/30/2019 16:31:08'!
     initializeWith: anISBNNumber 
	
	isbn := anISBNNumber.! !
!Book methodsFor: 'accessing' stamp: 'LS 10/29/2019 21:27:27'!
       isbn
	
	^isbn! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Book class
	instanceVariableNames: ''!

!classDefinition: 'Book class' category: #'Tus-Libros' stamp: 'cmmmmm 11/4/2019 18:42:52'!
Book class
	instanceVariableNames: ''!
!Book class methodsFor: 'instance creation' stamp: 'LS 10/29/2019 21:26:44'!
                            with: anISBNNumber
	
	^self new initializeWith: anISBNNumber ! !

Object subclass: #Cart
	instanceVariableNames: 'client password books'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #Cart category: #'Tus-Libros' stamp: 'cmmmmm 11/4/2019 18:42:52'!
Object subclass: #Cart
	instanceVariableNames: 'client password books'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Cart methodsFor: 'initialization' stamp: 'LS 10/29/2019 21:32:34'!
         initializeWithClient: aClient andPassword: aPassword 
	
	client := aClient.
	password := aPassword.
	books := OrderedCollection new.! !
!Cart methodsFor: 'accessing' stamp: 'LS 10/29/2019 21:33:50'!
                         isEmpty
	^books isEmpty.! !
!Cart methodsFor: 'accessing' stamp: 'cmmmmm 10/31/2019 17:15:44'!
 listCart
	
	| aList |
	
	aList := '0'.
	
	books do: [:aBook | ((books occurrencesOf: aBook) > 1) ifTrue: [^aList := aList, '|', aBook isbn asString, '|', '2' ] ifFalse: [aList := aList, '|', aBook isbn asString, '|', '1'] ].
	
	^aList ! !
!Cart methodsFor: 'as yet unclassified' stamp: 'cmmmmm 10/31/2019 17:04:19'!
    addToCart: aBook quantity: aQuantity 
	
	aQuantity timesRepeat: [books add: aBook ]! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Cart class
	instanceVariableNames: ''!

!classDefinition: 'Cart class' category: #'Tus-Libros' stamp: 'cmmmmm 11/4/2019 18:42:52'!
Cart class
	instanceVariableNames: ''!
!Cart class methodsFor: 'instance creation' stamp: 'LS 10/29/2019 21:12:32'!
                      withClient: aClient andPassword: aPassword

	
	^self new initializeWithClient: aClient andPassword: aPassword ! !

Object subclass: #Client
	instanceVariableNames: 'password'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classDefinition: #Client category: #'Tus-Libros' stamp: 'cmmmmm 11/4/2019 18:42:52'!
Object subclass: #Client
	instanceVariableNames: 'password'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!
!Client methodsFor: 'initialization' stamp: 'LS 10/29/2019 21:11:49'!
          initializeWith: aPassword 
	
	password := aPassword.! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Client class
	instanceVariableNames: ''!

!classDefinition: 'Client class' category: #'Tus-Libros' stamp: 'cmmmmm 11/4/2019 18:42:52'!
Client class
	instanceVariableNames: ''!
!Client class methodsFor: 'class initialization' stamp: 'LS 10/29/2019 21:11:02'!
          with: aPassword
	^self new initializeWith: aPassword ! !

----End fileIn of /Users/cmurga/Documents/Facultad/ejerciciosIS1/TusLibros/1/Tus-Libros.st----!

!classRemoval: #Client stamp: 'cmmmmm 11/4/2019 18:48:45'!
Object subclass: #Client
	instanceVariableNames: 'password'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classRemoval: #Cart stamp: 'cmmmmm 11/4/2019 18:48:45'!
Object subclass: #Cart
	instanceVariableNames: 'client password books'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classRemoval: #Book stamp: 'cmmmmm 11/4/2019 18:48:45'!
Object subclass: #Book
	instanceVariableNames: 'isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

!classRemoval: #CartTest stamp: 'cmmmmm 11/4/2019 18:48:45'!
TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros'!

TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CartTest category: #TusLibros stamp: 'cmmmmm 11/4/2019 18:49:00'!
TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:08'!
                test01NewCartsAreCreatedEmpty

	self assert: self createCart isEmpty! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                test02CanNotAddItemsThatDoNotBelongToStore

	| cart |
	
	cart := self createCart.
	
	self 
		should: [ cart add: self itemNotSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidItemErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:43'!
                              test03AfterAddingAnItemTheCartIsNotEmptyAnymore

	| cart |
	
	cart := self createCart.
	
	cart add: self itemSellByTheStore.
	self deny: cart isEmpty ! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:43'!
                              test04CanNotAddNonPositiveNumberOfItems

	| cart |
	
	cart := self createCart.
	
	self 
		should: [cart add: 0 of: self itemSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidQuantityErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                           test05CanNotAddMoreThanOneItemNotSellByTheStore

	| cart |
	
	cart := self createCart.
	
	self 
		should: [cart add: 2 of: self itemNotSellByTheStore  ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidItemErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:43'!
                   test06CartRemembersAddedItems

	| cart |
	
	cart := self createCart.
	
	cart add: self itemSellByTheStore.
	self assert: (cart includes: self itemSellByTheStore)! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:43'!
                   test07CartDoesNotHoldNotAddedItems

	| cart |
	
	cart := self createCart.
	
	self deny: (cart includes: self itemSellByTheStore)! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                    test08CartRemembersTheNumberOfAddedItems

	| cart |
	
	cart := self createCart.
	
	cart add: 2 of: self itemSellByTheStore.
	self assert: (cart occurrencesOf: self itemSellByTheStore) = 2! !
!CartTest methodsFor: 'support' stamp: 'HernanWilkinson 6/17/2013 17:48'!
                       createCart
	
	^Cart acceptingItemsOf: self defaultCatalog! !
!CartTest methodsFor: 'support' stamp: 'HernanWilkinson 6/17/2013 17:43'!
                         defaultCatalog
	
	^ Array with: self itemSellByTheStore! !
!CartTest methodsFor: 'support' stamp: 'HernanWilkinson 6/17/2013 17:44'!
                           itemNotSellByTheStore
	
	^'invalidBook'! !
!CartTest methodsFor: 'support' stamp: 'HernanWilkinson 6/17/2013 17:43'!
           itemSellByTheStore
	
	^ 'validBook'! !

TestCase subclass: #CashierTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CashierTest category: #TusLibros stamp: 'cmmmmm 11/4/2019 18:49:00'!
TestCase subclass: #CashierTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'LS 10/31/2019 21:29:57'!
             test01NewCashierWith

	| aCashier aCatalog aCart |
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: aCatalog.
	
	aCart := Cart acceptingItemsOf: (Array with: 'validBook').
		
	self should: [ aCashier checkOut: aCart ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmpty.
			]
		
		 ! !

Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cart category: #TusLibros stamp: 'cmmmmm 11/4/2019 18:49:00'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cart methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                             invalidItemErrorMessage
	
	^'Item is not in catalog'! !
!Cart methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                           invalidQuantityErrorMessage
	
	^'Invalid number of items'! !
!Cart methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 17:51'!
                          assertIsValidItem: anItem

	(catalog includes: anItem) ifFalse: [ self error: self invalidItemErrorMessage ]! !
!Cart methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 17:51'!
       assertIsValidQuantity: aQuantity

	aQuantity strictlyPositive ifFalse: [ self error: self invalidQuantityErrorMessage ]! !
!Cart methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 17:48'!
                        initializeAcceptingItemsOf: aCatalog

	catalog := aCatalog.
	items := OrderedCollection new.! !
!Cart methodsFor: 'queries' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                          occurrencesOf: anItem

	^items occurrencesOf: anItem  ! !
!Cart methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 17:44'!
includes: anItem

	^items includes: anItem ! !
!Cart methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 17:44'!
           isEmpty
	
	^items isEmpty ! !
!Cart methodsFor: 'adding' stamp: 'HernanWilkinson 6/17/2013 17:44'!
                             add: anItem

	^ self add: 1 of: anItem ! !
!Cart methodsFor: 'adding' stamp: 'HernanWilkinson 6/17/2013 17:51'!
                add: aQuantity of: anItem

	self assertIsValidQuantity: aQuantity.
	self assertIsValidItem: anItem.

	1 to: aQuantity do: [ :aNumber | items add: anItem ]! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Cart class
	instanceVariableNames: ''!

!classDefinition: 'Cart class' category: #TusLibros stamp: 'cmmmmm 11/4/2019 18:49:00'!
Cart class
	instanceVariableNames: ''!
!Cart class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 17:48'!
         acceptingItemsOf: aCatalog

	^self new initializeAcceptingItemsOf: aCatalog ! !

Object subclass: #Cashier
	instanceVariableNames: 'dictionary catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cashier category: #TusLibros stamp: 'cmmmmm 11/4/2019 18:49:00'!
Object subclass: #Cashier
	instanceVariableNames: 'dictionary catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cashier methodsFor: 'initialization' stamp: 'LS 10/31/2019 21:25:20'!
                         initializeWith: aCatalog
	
	catalog := aCatalog.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'LS 10/31/2019 21:30:50'!
cartCanNotBeEmpty
	self shouldBeImplemented.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'LS 10/31/2019 21:31:35'!
    checkOut: aCart 
	self error: Cashier cartCanNotBeEmpty.! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Cashier class
	instanceVariableNames: ''!

!classDefinition: 'Cashier class' category: #TusLibros stamp: 'cmmmmm 11/4/2019 18:49:00'!
Cashier class
	instanceVariableNames: ''!
!Cashier class methodsFor: 'instance creation' stamp: 'LS 10/31/2019 21:29:23'!
        cartCanNotBeEmpty
	^'cart can not be empty'! !
!Cashier class methodsFor: 'instance creation' stamp: 'LS 10/31/2019 21:24:37'!
 with: aDictionary 
	
	^self new initializeWith: aDictionary ! !

----End fileIn of /Users/cmurga/Documents/Facultad/ejerciciosIS1/TusLibros/TusLibros.st----!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 18:50:46'!
               test02CheckoutACartWith1ElementIsCorrect

	| aCashier aCatalog aCart |
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: aCatalog.
	
	aCart := Cart acceptingItemsOf: (Array with: 'validBook').
	
	aCart 
		
	self should: [ aCashier checkOut: aCart ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmpty.
			]
		
		 ! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 18:52:38' prior: 50332176!
      test02CheckoutACartWith1ElementIsCorrect

	| aCashier aCatalog aCart |
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: aCatalog.
	
	aCart := Cart acceptingItemsOf: (Array with: 'validBook').
	
	aCart add: 123123123123.
		
	self should: [ aCashier checkOut: aCart ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmpty.
			]
		
		 ! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 18:54:37' prior: 50332192!
                    test02CheckoutACartWith1ElementIsCorrect

	| aCashier aCatalog aCart |
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: aCatalog.
	
	aCart := Cart acceptingItemsOf: (Array with: 'validBook').
	
	aCart add: 123123123123.
	
	self assert: 100 equals: aCashier checkOut: aCart .	
	self should: [ aCashier checkOut: aCart ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmpty.
			]
		
		 ! !

TestCase subclass: #PortfolioTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #PortfolioTest category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
TestCase subclass: #PortfolioTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!PortfolioTest methodsFor: 'assertions' stamp: 'LS 10/17/2019 20:54:30'!
                          assertTransactionsOf: aPortfolio includes: aReceptiveAccount
	
	aReceptiveAccount transactions do: [:transaction | (aPortfolio transactions includes: transaction) ifFalse: [^false]].
	^true.! !
!PortfolioTest methodsFor: 'tests' stamp: 'HAW 5/25/2019 11:16:26'!
                          test01BalanceOfPortfolioWithoutAccountsIsZero

	self assert: 0 equals: Portfolio new balance! !
!PortfolioTest methodsFor: 'tests' stamp: 'HAW 5/25/2019 11:17:51'!
                            test02BalanceOfPortfolioWithOneAccountIsAccountBalance

	| account portfolio |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	portfolio := Portfolio with: account.
	
	self assert: account balance equals: portfolio balance! !
!PortfolioTest methodsFor: 'tests' stamp: 'HAW 5/25/2019 11:23:25'!
 test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios

	| simplePortfolioAccount simplePortfolio composedPortfolioAccount composedPortofolio |
	
	simplePortfolioAccount := ReceptiveAccount new.
	Deposit register: 100 on: simplePortfolioAccount.
	simplePortfolio := Portfolio with: simplePortfolioAccount.
	
	composedPortfolioAccount := ReceptiveAccount new.
	Withdraw register: 50 on: composedPortfolioAccount.
	composedPortofolio := Portfolio with: simplePortfolio with: composedPortfolioAccount.
	
	self assert: (composedPortfolioAccount balance + simplePortfolio balance) equals: composedPortofolio balance! !
!PortfolioTest methodsFor: 'tests' stamp: 'HAW 5/25/2019 11:43:15'!
                 test04PortfolioWithoutAccountsHasNoRegisteredTransaction

	self deny: (Portfolio new hasRegistered: (Deposit for: 100))! !
!PortfolioTest methodsFor: 'tests' stamp: 'HAW 5/25/2019 11:43:11'!
 test05PortfolioHasRegisteredItsAccountsTransactions

	| account portfolio deposit |
	
	account := ReceptiveAccount new.
	deposit := Deposit register: 100 on: account.
	portfolio := Portfolio with: account.
	
	self assert: (portfolio hasRegistered: deposit)! !
!PortfolioTest methodsFor: 'tests' stamp: 'HAW 5/25/2019 11:58:06'!
                        test06PortfolioLooksForRegisteredTransactionsRecursively

	| simplePortfolioAccount simplePortfolio composedPortfolioAccount composedPortfolio composedPortfolioAccountWithdraw simplePortfolioAccountDeposit |
	
	simplePortfolioAccount := ReceptiveAccount new.
	simplePortfolioAccountDeposit := Deposit register: 100 on: simplePortfolioAccount.
	simplePortfolio := Portfolio with: simplePortfolioAccount.
	
	composedPortfolioAccount := ReceptiveAccount new.
	composedPortfolioAccountWithdraw := Withdraw register: 50 on: composedPortfolioAccount.
	composedPortfolio := Portfolio with: simplePortfolio with: composedPortfolioAccount.
	
	self assert: (composedPortfolio hasRegistered: simplePortfolioAccountDeposit).
	self assert: (composedPortfolio hasRegistered: composedPortfolioAccountWithdraw)! !
!PortfolioTest methodsFor: 'tests' stamp: 'HAW 5/25/2019 11:58:10'!
                              test07PortfolioHasNoTransactionWhenHasNoAccounts

	self assert: Portfolio new transactions isEmpty! !
!PortfolioTest methodsFor: 'tests' stamp: 'HAW 5/25/2019 11:58:15'!
                      test08PortfolioTransasctionsIncludesAllItsAccountsTransactions

	| account portfolio accountDeposit anotherAccount portfolioTransactions anotherAccountWithdraw |
	
	account := ReceptiveAccount new.
	accountDeposit := Deposit register: 100 on: account.
	anotherAccount := ReceptiveAccount new.
	anotherAccountWithdraw := Withdraw register: 100 on: account.
	portfolio := Portfolio with: account.
	
	portfolioTransactions := portfolio transactions.
	
	self assert: 2 equals: portfolioTransactions size.
	self assert: (portfolioTransactions includes: accountDeposit).
	self assert: (portfolioTransactions includes: anotherAccountWithdraw)! !
!PortfolioTest methodsFor: 'tests' stamp: 'HAW 5/25/2019 11:58:20'!
                             test09PortfolioTransactionsAreCalculatedRecursively

	| simplePortfolioAccount simplePortfolio composedPortfolioAccount composedPortfolio composedPortfolioAccountWithdraw simplePortfolioAccountDeposit composedPortfolioTransactions |
	
	simplePortfolioAccount := ReceptiveAccount new.
	simplePortfolioAccountDeposit := Deposit register: 100 on: simplePortfolioAccount.
	simplePortfolio := Portfolio with: simplePortfolioAccount.
	
	composedPortfolioAccount := ReceptiveAccount new.
	composedPortfolioAccountWithdraw := Withdraw register: 50 on: composedPortfolioAccount.
	composedPortfolio := Portfolio with: simplePortfolio with: composedPortfolioAccount.
	
	composedPortfolioTransactions := composedPortfolio transactions.
	self assert: 2 equals: composedPortfolioTransactions size.
	self assert: (composedPortfolioTransactions includes: simplePortfolioAccountDeposit).
	self assert: (composedPortfolioTransactions includes: composedPortfolioAccountWithdraw)! !
!PortfolioTest methodsFor: 'tests' stamp: 'HAW 5/25/2019 11:58:24'!
                         test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce

	| account portfolio |
	
	account := ReceptiveAccount new.
	portfolio := Portfolio with: account.
	
	self 
		should: [ portfolio add: account ]
		raise: Error - MessageNotUnderstood 
		withExceptionDo: [ :anError |
			self assert: Portfolio canNotAddAccountErrorMessage equals: anError messageText.
			self assert: 1 equals: portfolio accountsSize.
			self assert: (portfolio accountsIncludes: account) ]! !
!PortfolioTest methodsFor: 'tests' stamp: 'HAW 5/25/2019 11:58:28'!
            test11PortfolioCanNotIncludeAccountOfItsPortfolios

	| account simplePortfolio composedPortfolio |
	
	account := ReceptiveAccount new.
	simplePortfolio := Portfolio with: account.
	composedPortfolio := Portfolio with: simplePortfolio.
	
	self 
		should: [ composedPortfolio add: account ]
		raise: Error - MessageNotUnderstood 
		withExceptionDo: [ :anError |
			self assert: Portfolio canNotAddAccountErrorMessage equals: anError messageText.
			self assert: 1 equals: composedPortfolio accountsSize.
			self assert: (composedPortfolio accountsIncludes: simplePortfolio) ]! !
!PortfolioTest methodsFor: 'tests' stamp: 'HAW 5/25/2019 11:58:32'!
                           test12PortfolioCanNotIncludeItself

	| account simplePortfolio |
	
	account := ReceptiveAccount new.
	simplePortfolio := Portfolio with: account.
	
	self 
		should: [ simplePortfolio add: simplePortfolio ]
		raise: Error - MessageNotUnderstood 
		withExceptionDo: [ :anError |
			self assert: Portfolio canNotAddAccountErrorMessage equals: anError messageText.
			self assert: 1 equals: simplePortfolio accountsSize.
			self assert: (simplePortfolio accountsIncludes: account) ]! !
!PortfolioTest methodsFor: 'tests' stamp: 'HAW 5/25/2019 12:01:51'!
                          test13ComposedPortfolioCanNotHaveParentPortfolioAccount

	| account simplePortfolio composedPortfolio |
	
	account := ReceptiveAccount new.
	simplePortfolio := Portfolio new.
	composedPortfolio := Portfolio with: simplePortfolio.
	composedPortfolio add: account.
	
	self 
		should: [ simplePortfolio add: account ]
		raise: Error - MessageNotUnderstood 
		withExceptionDo: [ :anError |
			self assert: Portfolio canNotAddAccountErrorMessage equals: anError messageText.
			self assert: simplePortfolio accountsIsEmpty ]! !
!PortfolioTest methodsFor: 'tests' stamp: 'HAW 5/25/2019 12:12:16'!
                 test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively

	| account leftParentPortfolio leftRootParentPortfolio portfolio rightParentPortfolio rightRootParentPortfolio |
	
	account := ReceptiveAccount new.
	portfolio := Portfolio new.
	leftParentPortfolio := Portfolio with: portfolio .
	leftRootParentPortfolio := Portfolio with: leftParentPortfolio.
	leftRootParentPortfolio add: account.
	
	rightParentPortfolio := Portfolio with: portfolio .
	rightRootParentPortfolio := Portfolio with: rightParentPortfolio.
	rightRootParentPortfolio add: account.

	self 
		should: [ portfolio add: account ]
		raise: Error - MessageNotUnderstood 
		withExceptionDo: [ :anError |
			self assert: Portfolio canNotAddAccountErrorMessage equals: anError messageText.
			self assert: portfolio accountsIsEmpty ]! !
!PortfolioTest methodsFor: 'tests' stamp: 'HAW 5/29/2019 16:31:18'!
                 test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd

	| portfolioToAdd portfolioToModify rootPortfolio sharedAccount |
	
	sharedAccount := ReceptiveAccount new.
	portfolioToModify := Portfolio new.
	rootPortfolio := Portfolio with: sharedAccount with: portfolioToModify.
	portfolioToAdd := Portfolio with: sharedAccount.
	
	self 
		should: [ portfolioToModify add: portfolioToAdd ]
		raise: Error - MessageNotUnderstood 
		withExceptionDo: [ :anError | 
			self assert: Portfolio canNotAddAccountErrorMessage equals: anError messageText.
			self assert: portfolioToModify accountsIsEmpty ]! !

TestCase subclass: #ReceptiveAccountTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #ReceptiveAccountTest category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
TestCase subclass: #ReceptiveAccountTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'HAW 5/23/2019 15:19:48'!
test01ReceptiveAccountHaveZeroAsBalanceWhenCreated 

	| account |
	
	account := ReceptiveAccount new.

	self assert: 0 equals: account balance .
! !
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'HAW 5/23/2019 15:19:54'!
test02DepositIncreasesBalanceOnTransactionValue 

	| account |
	
	account := ReceptiveAccount  new.
	Deposit register: 100 on: account.
		
	self assert: 100 equals: account balance .
! !
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'HAW 5/23/2019 15:20:02'!
                          test03WithdrawDecreasesBalanceOnTransactionValue 

	| account |
	
	account := ReceptiveAccount new.
	Deposit register: 100 on: account.
	Withdraw register: 50 on: account.
		
	self assert: 50 equals: account balance .
! !
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'HAW 5/23/2019 15:20:32'!
                       test04WithdrawValueMustBePositive 

	| account withdrawValue |
	
	account := ReceptiveAccount new.
	withdrawValue := 50.
	
	self assert: withdrawValue equals: (Withdraw register: withdrawValue on: account) value
! !
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'HAW 5/23/2019 15:20:46'!
                             test05ReceptiveAccountKnowsRegisteredTransactions 

	| account deposit withdraw |
	
	account := ReceptiveAccount new.
	deposit := Deposit register: 100 on: account.
	withdraw := Withdraw register: 50 on: account.
		
	self assert: (account hasRegistered: deposit).
	self assert: (account hasRegistered: withdraw).
! !
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'HAW 5/23/2019 15:20:54'!
                        test06ReceptiveAccountDoNotKnowNotRegisteredTransactions

	| account deposit withdraw |
	
	account := ReceptiveAccount new.
	deposit :=  Deposit for: 100.
	withdraw := Withdraw for: 50.
		
	self deny: (account hasRegistered: deposit).
	self deny: (account hasRegistered:withdraw).
! !
!ReceptiveAccountTest methodsFor: 'tests' stamp: 'HAW 5/23/2019 15:21:24'!
                        test07AccountKnowsItsTransactions 

	| account1 deposit1 |
	
	account1 := ReceptiveAccount new.
	
	deposit1 := Deposit register: 100 on: account1.
		
	self assert: 1 equals: account1 transactions size .
	self assert: (account1 transactions includes: deposit1).
! !

TestCase subclass: #TransferenceTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferenceTest category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
TestCase subclass: #TransferenceTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransferenceTest methodsFor: 'tests' stamp: 'LS 10/22/2019 16:40:52'!
        test01MakingATransferMakesADepositAndWithdraw

	| accountSource accountDestiny deposit |
	
	accountSource := ReceptiveAccount new.
	accountDestiny := ReceptiveAccount new.
	deposit := Deposit register: 100 on: accountSource .
	
	Transference from: accountSource to: accountDestiny of: 10.		
	
	self assert: 90 equals: accountSource balance.
	self assert: 10 equals: accountDestiny balance.! !
!TransferenceTest methodsFor: 'tests' stamp: 'LS 10/22/2019 17:18:49'!
                test02CannotMakeANegativeTransaction

	| accountSource accountDestiny deposit |
	
	accountSource := ReceptiveAccount new.
	accountDestiny := ReceptiveAccount new.
	deposit := Deposit register: 100 on: accountSource .
	
		self 
		should: [ Transference from: accountSource to: accountDestiny of: -10. ]
		raise: Error - MessageNotUnderstood 
		withExceptionDo: [ :anError |
			self assert: Transference cannotTransferNegativeAmount equals: anError messageText.
			self assert: 100 equals: accountSource balance.
			self assert: 0 equals: accountDestiny balance. ]! !
!TransferenceTest methodsFor: 'tests' stamp: 'LS 10/22/2019 16:40:52'!
   test03ValueOfTransactionIsCorrect

	| accountSrc accountDst transactionValue deposit |
	
	accountSrc := ReceptiveAccount new.
	accountDst := ReceptiveAccount new.
	deposit := Deposit register: 100 on: accountSrc.
	transactionValue := 10.
	
	self assert: transactionValue equals: (Transference from: accountSrc to: accountDst of: transactionValue ) value
! !
!TransferenceTest methodsFor: 'tests' stamp: 'LS 10/22/2019 16:40:52'!
                   test04BalanceOfTransactionIsCorrect

	| accountSrc accountDst transactionValue deposit |
	
	accountSrc := ReceptiveAccount new.
	accountDst := ReceptiveAccount new.
	deposit := Deposit register: 100 on: accountSrc.
	transactionValue := 10.
	Transference from: accountSrc to: accountDst of: transactionValue.
	
	self assert: 90 equals: accountSrc balance.
	self assert: 10 equals: accountDst balance.! !
!TransferenceTest methodsFor: 'tests' stamp: 'LS 10/28/2019 15:45:56'!
      test05MakeAReportOfAnEmptyAccount

	| accountSrc report |
	
	accountSrc := ReceptiveAccount new.
	report := Report with: accountSrc.
	
	self assert: 'Balance = 0' equals: report makeReport.
	! !
!TransferenceTest methodsFor: 'tests' stamp: 'LS 10/28/2019 15:46:40'!
                      test06MakeAReportOfAnAccountWithADeposit

	| deposit account report |
	
	account := ReceptiveAccount new.
	deposit := Deposit register: 100 on: account.
	report := Report with: account.	
	
	self assert: 'Deposito por 100. Balance = 100' equals: report makeReport.
	! !
!TransferenceTest methodsFor: 'tests' stamp: 'LS 10/28/2019 15:50:45'!
            test07MakeAReportOfAnAccountWithADepositAndAWithdraw

	| deposit account withdraw report|
	
	account := ReceptiveAccount new.
	deposit := Deposit register: 100 on: account.	
	withdraw := Withdraw register: 20 on: account.
	report := Report with: account.	
	
	self assert: 'Deposito por 100. Extraccion por 20. Balance = 80' equals: report makeReport.
	! !
!TransferenceTest methodsFor: 'tests' stamp: 'LS 10/28/2019 15:47:47'!
                     test08MakeAReportOfAnEmptyPortfolio

	| portfolio account report |
	
	account := ReceptiveAccount new.
	portfolio := Portfolio with: account.	
	report := Report with: portfolio.
	
	self assert: 'Balance = 0' equals: report makeReport.
	! !
!TransferenceTest methodsFor: 'tests' stamp: 'LS 10/28/2019 15:49:23'!
         test09MakeAReportOfAnAccountWithADepositAndATransaction

	| deposit accountSrc accountDst transaction reportSrc reportDst |
	
	accountSrc := ReceptiveAccount new.
	accountDst := ReceptiveAccount new.
	deposit := Deposit register: 100 on: accountSrc.
	Transference from: accountSrc to: accountDst of: 20.
	
	reportSrc := Report with: accountSrc.
	reportDst := Report with: accountDst.
	
	self assert: 'Deposito por 100. Salida por Transferencia de 20. Balance = 80' equals: reportSrc makeReport.
	self assert: 'Entrada por Transferencia de 20. Balance = 20' equals: reportDst makeReport.
	! !
!TransferenceTest methodsFor: 'tests' stamp: 'LS 10/28/2019 15:49:57'!
         test10MakeAReportOfAPortfolioWithOneAccountWithADepositAndWithdraw

	| portfolio deposit account withdraw report |
	
	account := ReceptiveAccount new.
	deposit := Deposit register: 100 on: account.	
	withdraw := Withdraw register: 20 on: account.
	portfolio := Portfolio with: account.
	
	report := Report with: portfolio .	
	
	self assert: 'Deposito por 100. Extraccion por 20. Balance = 80' equals: report makeReport.
	! !
!TransferenceTest methodsFor: 'tests' stamp: 'LS 10/28/2019 16:35:10'!
                test11TransferNetOfAnEmptyAccountIsZero

	| account transferNet |
	
	account := ReceptiveAccount new.
	transferNet := TransferNet with: account.
	
	self assert: 0 equals: transferNet printTransferNet.
	! !
!TransferenceTest methodsFor: 'tests' stamp: 'LS 10/28/2019 16:36:34'!
           test12TransferNetOfAnAccountsWithATransferenceIsCorrect

	| accountSrc accountDst deposit transactionValue transferNetSrc transferNetDst |
	
	accountSrc := ReceptiveAccount new.
	accountDst := ReceptiveAccount new.
	
	deposit := Deposit register: 100 on: accountSrc.
	transactionValue := 10.
	Transference from: accountSrc to: accountDst of: transactionValue.
	
	transferNetSrc := TransferNet with: accountSrc.
	transferNetDst := TransferNet with: accountDst.
		
	self assert: transactionValue negated equals: transferNetSrc printTransferNet .
	self assert: transactionValue equals: transferNetDst printTransferNet .! !
!TransferenceTest methodsFor: 'tests' stamp: 'LS 10/28/2019 16:37:16'!
             test13TransferNetOfAnEmptyPortfolioIsZero

	| portfolio transferNet |
	
	portfolio := Portfolio new.
	transferNet := TransferNet with: portfolio .
	
	self assert: 0 equals: transferNet printTransferNet.
	! !
!TransferenceTest methodsFor: 'tests' stamp: 'LS 10/28/2019 16:45:33'!
         test14TransferNetOfAPortfolioWithAnAccountsWithATransferenceIsCorrect

	| accountSrc accountDst deposit transactionValue portfolioSrc portfolioDst transferNetAccSrc transferNetAccDst transferNetPortSrc transferNetPortDst |
	
	accountSrc := ReceptiveAccount new.
	accountDst := ReceptiveAccount new.
	
	deposit := Deposit register: 100 on: accountSrc.
	transactionValue := 10.
	Transference from: accountSrc to: accountDst of: transactionValue.
	
	portfolioSrc := Portfolio with: accountSrc.
	portfolioDst := Portfolio with: accountDst.
	
	transferNetAccSrc  := TransferNet with: accountSrc .
	transferNetAccDst := TransferNet with: accountDst .
	transferNetPortSrc := TransferNet with: portfolioSrc .
	transferNetPortDst := TransferNet with: portfolioDst .
	
	self assert: transferNetAccSrc printTransferNet equals: transferNetPortSrc printTransferNet .
	self assert: transferNetAccDst printTransferNet equals: transferNetPortDst printTransferNet.! !

Object subclass: #Account
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #Account category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
Object subclass: #Account
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!Account methodsFor: 'testing' stamp: 'HAW 5/25/2019 12:23:47'!
hasRegistered: aTransaction

	self subclassResponsibility ! !
!Account methodsFor: 'testing' stamp: 'HAW 5/25/2019 12:24:25'!
  isComposedBy: anAccount

	self subclassResponsibility ! !
!Account methodsFor: 'balance' stamp: 'HAW 5/25/2019 12:23:40'!
      balance

	self subclassResponsibility ! !
!Account methodsFor: 'transactions' stamp: 'HAW 5/25/2019 12:23:27'!
                 addTransactionsTo: aCollectionOfTransactions

	self subclassResponsibility ! !
!Account methodsFor: 'transactions' stamp: 'HAW 5/25/2019 12:23:15'!
            transactions

	self subclassResponsibility ! !
!Account methodsFor: 'transactions' stamp: 'LS 10/28/2019 16:56:39'!
            transferNet: aTransferNet
	^self subclassResponsibility ! !
!Account methodsFor: 'composition' stamp: 'HAW 5/25/2019 12:24:04'!
addedTo: aPortfolio

	self subclassResponsibility ! !

Account subclass: #Portfolio
	instanceVariableNames: 'accounts parents'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #Portfolio category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
Account subclass: #Portfolio
	instanceVariableNames: 'accounts parents'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!Portfolio methodsFor: 'transFernet' stamp: 'LS 10/28/2019 16:41:45'!
                   transferNet: aTransferNet
	^accounts do: [ :anAccount | anAccount transferNet: aTransferNet ]! !
!Portfolio methodsFor: 'report' stamp: 'LS 10/28/2019 17:21:11'!
                              reportOperations: aReport
	
	accounts do: [ :anAccount | anAccount reportOperations: aReport ].
! !
!Portfolio methodsFor: 'accounts management' stamp: 'HAW 5/25/2019 11:49:20'!
              accountsIncludes: anAccount

	^accounts includes: anAccount ! !
!Portfolio methodsFor: 'accounts management' stamp: 'HAW 5/25/2019 12:05:04'!
                  accountsIsEmpty
	
	^accounts isEmpty ! !
!Portfolio methodsFor: 'accounts management' stamp: 'HAW 5/25/2019 11:49:06'!
         accountsSize
	
	^accounts size! !
!Portfolio methodsFor: 'accounts management' stamp: 'HAW 5/25/2019 12:19:20'!
                add: accountToAdd

	self assertCanAdd: accountToAdd.
		
	accounts add: accountToAdd.
	accountToAdd addedTo: self 
	! !
!Portfolio methodsFor: 'accounts management' stamp: 'HAW 5/25/2019 12:17:31'!
                           rootParents
	
	| rootParents |
	
	rootParents := Set new.
	self addRootParentsTo: rootParents.
	
	^ rootParents! !
!Portfolio methodsFor: 'initialization' stamp: 'HAW 5/25/2019 12:03:18'!
    initialize

	accounts := OrderedCollection new.
	parents := OrderedCollection new.! !
!Portfolio methodsFor: 'balance' stamp: 'HAW 5/25/2019 11:19:36'!
        balance
	
	^accounts sum: [ :anAccount | anAccount balance ] ifEmpty: [ 0 ]! !
!Portfolio methodsFor: 'transactions' stamp: 'HAW 5/25/2019 11:42:55'!
          addTransactionsTo: aCollectionOfTransactions

	accounts do: [ :anAccount | anAccount addTransactionsTo: aCollectionOfTransactions ]! !
!Portfolio methodsFor: 'transactions' stamp: 'HAW 5/25/2019 11:38:32'!
                  transactions
	
	| transactions |
	
	transactions := OrderedCollection new.
	accounts do: [ :anAccount | anAccount addTransactionsTo: transactions ].
	
	^transactions ! !
!Portfolio methodsFor: 'composition' stamp: 'HAW 5/25/2019 12:02:59'!
                addedTo: aPortfolio 
	
	parents add: aPortfolio ! !
!Portfolio methodsFor: 'testing' stamp: 'HAW 5/25/2019 12:20:56'!
          anyRootParentIsComposedBy: accountToAdd

	^self rootParents anySatisfy: [ :aParent | aParent isComposedBy: accountToAdd]! !
!Portfolio methodsFor: 'testing' stamp: 'HAW 5/25/2019 11:28:29'!
  hasRegistered: aTransaction

	^accounts anySatisfy: [ :anAccount | anAccount hasRegistered: aTransaction ]! !
!Portfolio methodsFor: 'testing' stamp: 'HAW 5/29/2019 16:24:54'!
                isComposedBy: anAccount

	^ self = anAccount or: [ accounts anySatisfy: [ :composedAccount | (composedAccount isComposedBy: anAccount) or: [ anAccount isComposedBy: composedAccount ]]]! !
!Portfolio methodsFor: 'account management - private' stamp: 'HAW 5/25/2019 12:17:31'!
             addRootParentsTo: rootParents

	parents 
		ifEmpty: [ rootParents add: self ] 
		ifNotEmpty: [ parents do: [ :aParent | aParent addRootParentsTo: rootParents ]]! !
!Portfolio methodsFor: 'account management - private' stamp: 'HAW 5/25/2019 12:20:36'!
     assertCanAdd: accountToAdd

	(self anyRootParentIsComposedBy: accountToAdd) ifTrue: [ self signalCanNotAddAccount ].
! !
!Portfolio methodsFor: 'account management - private' stamp: 'HAW 5/25/2019 11:48:34'!
                signalCanNotAddAccount
	
	self error: self class canNotAddAccountErrorMessage! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Portfolio class
	instanceVariableNames: ''!

!classDefinition: 'Portfolio class' category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
Portfolio class
	instanceVariableNames: ''!
!Portfolio class methodsFor: 'error handling' stamp: 'cmmmm 10/17/2019 19:15:20'!
accountAlreadyExists
	^'account Already Exists'! !
!Portfolio class methodsFor: 'error handling' stamp: 'cmmmm 10/17/2019 19:55:10'!
                           portfolioAlreadyExists
	^'portfolio alredy exists'! !
!Portfolio class methodsFor: 'as yet unclassified' stamp: 'HAW 5/25/2019 11:48:55'!
                      canNotAddAccountErrorMessage
	
	^'Can not add repeated account to a portfolio'! !
!Portfolio class methodsFor: 'as yet unclassified' stamp: 'HAW 5/25/2019 11:18:21'!
                          with: anAccount

	^self new 
		add: anAccount;
		yourself! !
!Portfolio class methodsFor: 'as yet unclassified' stamp: 'HAW 5/25/2019 11:23:59'!
               with: anAccount with: anotherAccount

	^self new 
		add: anAccount;
		add: anotherAccount;
		yourself! !

Account subclass: #ReceptiveAccount
	instanceVariableNames: 'transactions'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #ReceptiveAccount category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
Account subclass: #ReceptiveAccount
	instanceVariableNames: 'transactions'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!ReceptiveAccount methodsFor: 'initialization' stamp: 'HernanWilkinson 7/13/2011 18:35'!
initialize

	super initialize.
	transactions := OrderedCollection new.! !
!ReceptiveAccount methodsFor: 'transactions' stamp: 'HAW 5/25/2019 11:38:52'!
        addTransactionsTo: aCollectionOfTransactions

	aCollectionOfTransactions addAll: transactions ! !
!ReceptiveAccount methodsFor: 'transactions' stamp: 'HernanWilkinson 7/13/2011 18:37'!
       register: aTransaction

	transactions add: aTransaction 
! !
!ReceptiveAccount methodsFor: 'transactions' stamp: 'HernanWilkinson 7/13/2011 18:37'!
            transactions 

	^ transactions copy! !
!ReceptiveAccount methodsFor: 'transactions' stamp: 'LS 10/28/2019 17:07:37'!
           transferNet: aTransferNet
	transactions do: [:aTransaction | aTransaction doTransferNet: aTransferNet]
	! !
!ReceptiveAccount methodsFor: 'balance' stamp: 'HAW 5/25/2019 11:24:46'!
           balance

	^transactions 
		inject: 0
		into: [ :currentBalance :transaction | transaction affectBalance: currentBalance ]! !
!ReceptiveAccount methodsFor: 'testing' stamp: 'NR 10/21/2019 18:55:56'!
                          hasRegistered: aTransaction

	^ transactions includes: aTransaction 
! !
!ReceptiveAccount methodsFor: 'testing' stamp: 'HAW 5/25/2019 11:54:51'!
              isComposedBy: anAccount

	^self = anAccount ! !
!ReceptiveAccount methodsFor: 'composition' stamp: 'HAW 5/25/2019 12:03:32'!
   addedTo: aPortfolio 
	
	! !
!ReceptiveAccount methodsFor: 'report' stamp: 'LS 10/28/2019 17:19:47'!
                            reportOperations: aReport
	
	transactions do:[ :aTransaction | aTransaction addToReport: aReport ].! !

Object subclass: #AccountTransaction
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #AccountTransaction category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
Object subclass: #AccountTransaction
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!AccountTransaction methodsFor: 'value' stamp: 'cmmmm 10/17/2019 19:28:36'!
   updateBalance: aBalance

	^self subclassResponsibility ! !
!AccountTransaction methodsFor: 'value' stamp: 'HernanWilkinson 9/12/2011 12:25'!
                   value 

	self subclassResponsibility ! !
!AccountTransaction methodsFor: 'balance' stamp: 'LS 10/28/2019 17:01:51'!
            addToReport: aReport
	^self subclassResponsibility ! !
!AccountTransaction methodsFor: 'balance' stamp: 'HAW 5/25/2019 11:25:39'!
                              affectBalance: aBalance

	self subclassResponsibility ! !
!AccountTransaction methodsFor: 'transferNet' stamp: 'LS 10/28/2019 16:27:48'!
                       doTransferNet: aTranferNet
	^self subclassResponsibility.! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

AccountTransaction class
	instanceVariableNames: ''!

!classDefinition: 'AccountTransaction class' category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
AccountTransaction class
	instanceVariableNames: ''!
!AccountTransaction class methodsFor: 'instance creation' stamp: 'NR 10/21/2019 18:54:27'!
                register: aValue on: account

	| transaction |
	
	transaction := self for: aValue.
	account register: transaction.
		
	^ transaction! !

AccountTransaction subclass: #Deposit
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #Deposit category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
AccountTransaction subclass: #Deposit
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!Deposit methodsFor: 'initialization' stamp: 'HernanWilkinson 7/13/2011 18:45'!
                             initializeFor: aValue

	value := aValue ! !
!Deposit methodsFor: 'value' stamp: 'cmmmm 10/17/2019 19:27:56'!
                   updateBalance: aBalance

	^ aBalance + value! !
!Deposit methodsFor: 'value' stamp: 'cmmmm 10/17/2019 18:42:54'!
               valorParaBalance

	^ value! !
!Deposit methodsFor: 'value' stamp: 'HernanWilkinson 7/13/2011 18:38'!
                           value

	^ value! !
!Deposit methodsFor: 'balance' stamp: 'HAW 5/25/2019 11:25:02'!
             affectBalance: aBalance

	^aBalance + value ! !
!Deposit methodsFor: 'report' stamp: 'LS 10/28/2019 17:00:40'!
                 addToReport: aReport
	^aReport addDeposit: self.! !
!Deposit methodsFor: 'transferNet' stamp: 'LS 10/28/2019 16:47:37'!
        doTransferNet: aTransFernet
	^aTransFernet countDeposit: self.! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Deposit class
	instanceVariableNames: ''!

!classDefinition: 'Deposit class' category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
Deposit class
	instanceVariableNames: ''!
!Deposit class methodsFor: 'instance creation' stamp: 'HernanWilkinson 7/13/2011 18:38'!
              for: aValue

	^ self new initializeFor: aValue ! !

AccountTransaction subclass: #TransferDeposit
	instanceVariableNames: 'transference'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferDeposit category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
AccountTransaction subclass: #TransferDeposit
	instanceVariableNames: 'transference'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransferDeposit methodsFor: 'report' stamp: 'LS 10/28/2019 17:00:59'!
                     addToReport: aReport
	^aReport addTransferDeposit: self.! !
!TransferDeposit methodsFor: 'initialization' stamp: 'LS 10/22/2019 16:58:58'!
                     initializeFor: aTransfer

	transference := aTransfer ! !
!TransferDeposit methodsFor: 'value' stamp: 'LS 10/22/2019 17:01:37'!
 updateBalance: aBalance

	^ aBalance + self value! !
!TransferDeposit methodsFor: 'value' stamp: 'LS 10/22/2019 17:04:18'!
     valorParaBalance

	^ self value! !
!TransferDeposit methodsFor: 'value' stamp: 'LS 10/22/2019 16:59:14'!
                       value

	^ transference value.! !
!TransferDeposit methodsFor: 'balance' stamp: 'LS 10/22/2019 17:02:14'!
                       affectBalance: aBalance

	^aBalance + self value ! !
!TransferDeposit methodsFor: 'tranferNet' stamp: 'LS 10/28/2019 16:47:41'!
doTransferNet: aTransFernet
	^aTransFernet countTransferDeposit: self.! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

TransferDeposit class
	instanceVariableNames: ''!

!classDefinition: 'TransferDeposit class' category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
TransferDeposit class
	instanceVariableNames: ''!
!TransferDeposit class methodsFor: 'as yet unclassified' stamp: 'cmmmm 10/21/2019 21:49:03'!
          for: aValue

	^ self new initializeFor: aValue ! !

AccountTransaction subclass: #TransferWithdraw
	instanceVariableNames: 'transference'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferWithdraw category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
AccountTransaction subclass: #TransferWithdraw
	instanceVariableNames: 'transference'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransferWithdraw methodsFor: 'report' stamp: 'LS 10/28/2019 17:01:17'!
                 addToReport: aReport
	^aReport addTransferWithdraw: self.! !
!TransferWithdraw methodsFor: 'value' stamp: 'LS 10/22/2019 17:04:40'!
                            updateBalance: aBalance

	^ aBalance - self value! !
!TransferWithdraw methodsFor: 'value' stamp: 'LS 10/22/2019 17:04:11'!
    valorParaBalance
	^ self value negated ! !
!TransferWithdraw methodsFor: 'value' stamp: 'LS 10/22/2019 17:03:46'!
              value

	^ transference value! !
!TransferWithdraw methodsFor: 'balance' stamp: 'LS 10/22/2019 17:05:03'!
                       affectBalance: aBalance

	^aBalance - self value! !
!TransferWithdraw methodsFor: 'initialization' stamp: 'LS 10/22/2019 17:00:25'!
                            initializeFor: aTransfer

	transference := aTransfer ! !
!TransferWithdraw methodsFor: 'tranferNet' stamp: 'LS 10/28/2019 16:47:46'!
                           doTransferNet: aTransFernet
	^aTransFernet countTransferWithdraw: self.! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

TransferWithdraw class
	instanceVariableNames: ''!

!classDefinition: 'TransferWithdraw class' category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
TransferWithdraw class
	instanceVariableNames: ''!
!TransferWithdraw class methodsFor: 'as yet unclassified' stamp: 'cmmmm 10/21/2019 21:49:40'!
     for: aValue

	^ self new initializeFor: aValue ! !

AccountTransaction subclass: #Withdraw
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #Withdraw category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
AccountTransaction subclass: #Withdraw
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!Withdraw methodsFor: 'initialization' stamp: 'HernanWilkinson 7/13/2011 18:46'!
              initializeFor: aValue

	value := aValue ! !
!Withdraw methodsFor: 'value' stamp: 'cmmmm 10/17/2019 19:28:10'!
                  updateBalance: aBalance

	^ aBalance - value! !
!Withdraw methodsFor: 'value' stamp: 'cmmmm 10/17/2019 18:42:47'!
              valorParaBalance
	^ value negated ! !
!Withdraw methodsFor: 'value' stamp: 'HernanWilkinson 7/13/2011 18:33'!
                  value

	^ value! !
!Withdraw methodsFor: 'balance' stamp: 'HAW 5/25/2019 11:25:15'!
            affectBalance: aBalance

	^aBalance - value! !
!Withdraw methodsFor: 'report' stamp: 'LS 10/28/2019 17:01:30'!
                 addToReport: aReport
	^aReport addWithdraw: self.! !
!Withdraw methodsFor: 'tranferNet' stamp: 'LS 10/28/2019 16:47:52'!
       doTransferNet: aTransFernet
	^aTransFernet countWithdraw: self.! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Withdraw class
	instanceVariableNames: ''!

!classDefinition: 'Withdraw class' category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:29'!
Withdraw class
	instanceVariableNames: ''!
!Withdraw class methodsFor: 'instance creation' stamp: 'HernanWilkinson 7/13/2011 18:33'!
         for: aValue

	^ self new initializeFor: aValue ! !

Object subclass: #Report
	instanceVariableNames: 'account stream'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #Report category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:30'!
Object subclass: #Report
	instanceVariableNames: 'account stream'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!Report methodsFor: 'report' stamp: 'LS 10/28/2019 17:28:49'!
             addDeposit: aDeposit

	^stream := stream, 'Deposito por ', aDeposit value asString, '. '.! !
!Report methodsFor: 'report' stamp: 'LS 10/28/2019 17:29:06'!
     addTransferDeposit: aTransferDeposit

	^stream := stream, 'Entrada por Transferencia de ', aTransferDeposit value asString, '. '.! !
!Report methodsFor: 'report' stamp: 'LS 10/28/2019 17:29:10'!
                             addTransferWithdraw: aTransferWithdraw

	^stream := stream, 'Salida por Transferencia de ', aTransferWithdraw value asString, '. '.! !
!Report methodsFor: 'report' stamp: 'LS 10/28/2019 17:29:14'!
                           addWithdraw: aWithdraw

	^stream := stream, 'Extraccion por ', aWithdraw value asString, '. '.! !
!Report methodsFor: 'report' stamp: 'LS 10/28/2019 17:18:11'!
makeReport

	account reportOperations: self.
	stream := stream,'Balance = ', account balance asString.
	^stream! !
!Report methodsFor: 'initialization' stamp: 'LS 10/28/2019 16:55:21'!
       initializeWith: anAccount

	stream _ String new.
	account _ anAccount.! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Report class
	instanceVariableNames: ''!

!classDefinition: 'Report class' category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:30'!
Report class
	instanceVariableNames: ''!
!Report class methodsFor: 'class initialization' stamp: 'LS 10/28/2019 14:16:31'!
                with: anAccount

	^self new initializeWith: anAccount.! !

Object subclass: #TransferNet
	instanceVariableNames: 'account net'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferNet category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:30'!
Object subclass: #TransferNet
	instanceVariableNames: 'account net'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransferNet methodsFor: 'initialize' stamp: 'LS 10/28/2019 16:51:38'!
                    initializeWith: anAccount

	net := 0.
	account := anAccount.! !
!TransferNet methodsFor: 'counts dispatch' stamp: 'LS 10/28/2019 16:31:31'!
                    countDeposit: aDeposit

	^0.
	! !
!TransferNet methodsFor: 'counts dispatch' stamp: 'LS 10/28/2019 16:32:05'!
                  countTransferDeposit: aDeposit

	^net := net + aDeposit value.
	! !
!TransferNet methodsFor: 'counts dispatch' stamp: 'LS 10/28/2019 16:32:26'!
                countTransferWithdraw: aWithdraw

	^net := net - aWithdraw value.
	! !
!TransferNet methodsFor: 'counts dispatch' stamp: 'LS 10/28/2019 16:31:20'!
             countWithdraw: aWithdraw

	^0.
	! !
!TransferNet methodsFor: 'printing' stamp: 'LS 10/28/2019 16:53:41'!
                       printTransferNet
	
	account transferNet: self.
	^net! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

TransferNet class
	instanceVariableNames: ''!

!classDefinition: 'TransferNet class' category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:30'!
TransferNet class
	instanceVariableNames: ''!
!TransferNet class methodsFor: 'class initialization' stamp: 'LS 10/28/2019 16:22:04'!
              with: anAccount
	^self new initializeWith: anAccount.! !

Object subclass: #Transference
	instanceVariableNames: 'value transferDeposit transferWithdraw'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #Transference category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:30'!
Object subclass: #Transference
	instanceVariableNames: 'value transferDeposit transferWithdraw'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!Transference methodsFor: 'initialization' stamp: 'cmmmm 10/21/2019 21:47:06'!
                    initializeFrom: anAccountSource to: anAccountDestiny of: anAmount 

	transferDeposit := TransferDeposit register: anAmount on: anAccountDestiny. 
	transferWithdraw := TransferWithdraw register: anAmount on: anAccountSource .
	value  := anAmount.! !
!Transference methodsFor: 'value' stamp: 'cmmmm 10/21/2019 19:52:25'!
 value

	^value! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Transference class
	instanceVariableNames: ''!

!classDefinition: 'Transference class' category: #'Portfolio-Solucion' stamp: 'cmmmmm 11/4/2019 18:55:30'!
Transference class
	instanceVariableNames: ''!
!Transference class methodsFor: 'initialization' stamp: 'LS 10/22/2019 17:10:05'!
                      from: anAccountSource to: anAccountDestiny of: anAmount 
	self assertAmountPositive: anAmount.
	^Transference new initializeFrom: anAccountSource to: anAccountDestiny of: anAmount.! !
!Transference class methodsFor: 'initialization' stamp: 'cmmmm 10/21/2019 20:38:07'!
                   register: aValue from: anAccountSource to: anAccountDestiny

	| transaction |
	
	transaction := self from: anAccountSource to: anAccountDestiny of: aValue. 
	anAccountSource register: transaction.
	anAccountDestiny register: transaction.
		
	^ transaction! !
!Transference class methodsFor: 'error messages' stamp: 'LS 10/22/2019 17:18:49'!
           cannotTransferNegativeAmount
	^'Cannot transfer negative amount'! !
!Transference class methodsFor: 'assertions' stamp: 'LS 10/22/2019 17:21:04'!
              assertAmountPositive: anAmount
	anAmount <1 ifTrue: [self error: Transference cannotTransferNegativeAmount].! !

----End fileIn of /Users/cmurga/Documents/Facultad/ejerciciosIS1/portFolio/Portfolio-Solucion.st----!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 18:56:21' prior: 50332209!
      test02CheckoutACartWith1ElementIsCorrect

	| aCashier aCatalog aCart |
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: aCatalog.
	
	aCart := Cart acceptingItemsOf: (Array with: 'validBook').
	
	aCart add: 123123123123.
	
	self assert: 100 equals: (aCashier checkOut: aCart) .	

		
		 ! !

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 18:56:46'!
ERROR!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 18:57:42' prior: 50333550!
      test02CheckoutACartWith1ElementIsCorrect

	| aCashier aCatalog aCart |
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: aCatalog.
	
	aCart := Cart acceptingItemsOf: (Array with: 'validBook').
	
	aCart add: 'validBook'.
	
	self assert: 100 equals: (aCashier checkOut: aCart) .	

		
		 ! !

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 18:57:43'!
ERROR!

!classDefinition: #Cashier category: #TusLibros stamp: 'cmmmmm 11/4/2019 18:58:55'!
Object subclass: #Cashier
	instanceVariableNames: 'itemInCart catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

Object subclass: #Cashier
	instanceVariableNames: 'catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cashier category: #TusLibros stamp: 'cmmmmm 11/4/2019 19:00:09'!
Object subclass: #Cashier
	instanceVariableNames: 'catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 19:00:39'!
ERROR!
!Cashier methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:10:27' prior: 50332152!
  checkOut: aCart 
	
	"self assert cada item del cart esta en el catalogo"
	aCart isEmpty ifTrue: [self error: Cashier cartCanNotBeEmpty.]
	ifFalse: [ ^ aCart subtotal ]! !

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 19:10:34'!
ERROR!
!Cart methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:10:42'!
                            subtotal
	self shouldBeImplemented.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:13:39' prior: 50333615!
                             subtotal
	| sum |
	sum _ 0.
	catalog do: [:anItem | sum _ sum + anItem ]. 
	^sum.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:13:41' prior: 50333620!
               subtotal
	| sum |

	sum _ 0.
	catalog do: [:anItem | sum _ sum + anItem ]. 
	^sum.! !

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 19:13:45'!
ERROR!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:15:25' prior: 50333566!
                          test02CheckoutACartWith1ElementIsCorrect

	| aCashier aCatalog aCart |
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: aCatalog.
	
	aCart := Cart acceptingItemsOf: (Dictionary new add:'validBook'->4).
	
	aCart add: 'validBook'.
	
	self assert: 100 equals: (aCashier checkOut: aCart) .	

		
		 ! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:15:30' prior: 50333636!
          test02CheckoutACartWith1ElementIsCorrect

	| aCashier aCatalog aCart |
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: aCatalog.
	
	aCart := Cart acceptingItemsOf: (Dictionary new add:'validBook'->100).
	
	aCart add: 'validBook'.
	
	self assert: 100 equals: (aCashier checkOut: aCart) .	

		
		 ! !

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 19:15:36'!
ERROR!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:17:37' prior: 50333649!
                           test02CheckoutACartWith1ElementIsCorrect

	| aCashier aCatalog aCart |
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: aCatalog.
	
	aCart := Cart acceptingItemsOf: (aCatalog add:'validBook'->100).
	
	aCart add: 'validBook'.
	
	self assert: 100 equals: (aCashier checkOut: aCart) .	

		
		 ! !

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 19:18:04'!
ERROR!

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 19:18:27'!
ERROR!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:18:55' prior: 50333666!
                    test02CheckoutACartWith1ElementIsCorrect

	| aCashier aCatalog aCart |
	
	aCatalog := Dictionary new.
	aCashier := Cashier new.
	
	aCart := Cart acceptingItemsOf: (aCatalog add:'validBook'->100).
	
	aCart add: 'validBook'.
	
	self assert: 100 equals: (aCashier checkOut: aCart) .	

		
		 ! !

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 19:20:10'!
ERROR!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:21:27' prior: 50333686!
            test02CheckoutACartWith1ElementIsCorrect

	| aCashier aCatalog aCart |
	
	aCatalog := Dictionary new.
	aCashier := Cashier new.
	
	aCatalog add:'validBook'->100.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.
	
	self assert: 100 equals: (aCashier checkOut: aCart) .	

		
		 ! !
!Cart methodsFor: 'assertions' stamp: 'cmmmmm 11/4/2019 19:24:33' prior: 50332077!
assertIsValidItem: anItem

	(catalog includesKey: anItem) ifFalse: [ self error: self invalidItemErrorMessage ]! !

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 19:24:58'!
PASSED!

!testRun: #CashierTest #test01NewCashierWith stamp: 'cmmmmm 11/4/2019 19:24:58'!
PASSED!

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 19:24:58'!
PASSED!
!Cashier class methodsFor: 'instance creation' stamp: 'cmmmmm 11/4/2019 19:26:46' prior: 50332168!
                    with: aSalesBook 
	
	^self new initializeWith: aSalesBook ! !

!classDefinition: #Cashier category: #TusLibros stamp: 'cmmmmm 11/4/2019 19:27:15'!
Object subclass: #Cashier
	instanceVariableNames: 'catalog salesBook'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cashier methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 19:27:11' prior: 50332144!
       initializeWith: aSalesBook
	
	salesBook := aSalesBook.! !

Object subclass: #Cashier
	instanceVariableNames: 'catalog salesBook'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cashier category: #TusLibros stamp: 'cmmmmm 11/4/2019 19:27:23'!
Object subclass: #Cashier
	instanceVariableNames: 'catalog salesBook'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

Object subclass: #Cashier
	instanceVariableNames: 'salesBook'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cashier category: #TusLibros stamp: 'cmmmmm 11/4/2019 19:27:43'!
Object subclass: #Cashier
	instanceVariableNames: 'salesBook'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:28:13' prior: 50333702!
                       test02CheckoutACartWith1ElementIsCorrect

	| aCashier aCatalog aCart |
	
	aCatalog := Dictionary new.
	aCashier := Cashier with orderedCollection new.
	
	aCatalog add:'validBook'->100.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.
	
	self assert: 100 equals: (aCashier checkOut: aCart) .	

		
		 ! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:28:22' prior: 50333771!
                         test02CheckoutACartWith1ElementIsCorrect

	| aCashier aCatalog aCart |
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: OrderedCollection new.
	
	aCatalog add:'validBook'->100.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.
	
	self assert: 100 equals: (aCashier checkOut: aCart) .	

		
		 ! !

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 19:29:52'!
PASSED!

!testRun: #CashierTest #test01NewCashierWith stamp: 'cmmmmm 11/4/2019 19:29:52'!
PASSED!

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 19:29:52'!
PASSED!

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 19:29:54'!
PASSED!

!testRun: #CashierTest #test01NewCashierWith stamp: 'cmmmmm 11/4/2019 19:29:54'!
PASSED!

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 19:29:54'!
PASSED!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:30:57'!
                            test03CheckoutACartWithSeveralElementGivesCorrectSubtotal

	| aCashier aCatalog aCart |
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: OrderedCollection new.
	
	aCatalog add:'validBook'->100.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.
	aCart add: 'validBook'.
	aCart add: 'validBook'.
	
	self assert: 100 equals: (aCashier checkOut: aCart) .	

		
		 ! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:32:05' prior: 50333818!
                     test03CheckoutACartWithSeveralElementGivesCorrectSubtotal

	| aCashier aCatalog aCart |
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: OrderedCollection new.
	
	aCatalog add:'validBook'->100; add:'validBook2'->50.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.
	aCart add: 'validBook2'.
	
	self assert: 100 equals: (aCashier checkOut: aCart) .	

		
		 ! !

!testRun: #CashierTest #test03CheckoutACartWithSeveralElementGivesCorrectSubtotal stamp: 'cmmmmm 11/4/2019 19:32:07'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:32:30' prior: 50333603!
                           checkOut: aCart 
	
	aCart isEmpty ifTrue: [self error: Cashier cartCanNotBeEmpty.]
	ifFalse: [ ^ aCart subtotal ]! !

!testRun: #CashierTest #test03CheckoutACartWithSeveralElementGivesCorrectSubtotal stamp: 'cmmmmm 11/4/2019 19:32:44'!
FAILURE!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:32:52' prior: 50333834!
        test03CheckoutACartWithSeveralElementGivesCorrectSubtotal

	| aCashier aCatalog aCart |
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: OrderedCollection new.
	
	aCatalog add:'validBook'->100; add:'validBook2'->50.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.
	aCart add: 'validBook2'.
	
	self assert: 150 equals: (aCashier checkOut: aCart) .	

		
		 ! !

!testRun: #CashierTest #test03CheckoutACartWithSeveralElementGivesCorrectSubtotal stamp: 'cmmmmm 11/4/2019 19:32:55'!
PASSED!

!testRun: #CashierTest #test01NewCashierWith stamp: 'cmmmmm 11/4/2019 19:32:55'!
PASSED!

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 19:32:55'!
PASSED!

!testRun: #CashierTest #test03CheckoutACartWithSeveralElementGivesCorrectSubtotal stamp: 'cmmmmm 11/4/2019 19:32:55'!
PASSED!

!classDefinition: #Card category: #Unknown stamp: 'cmmmmm 11/4/2019 19:41:04'!
Object subclass: #Card
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Unknown'!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:41:08'!
                           test04CannotCheckoutACartWithAnInvalidCreditCard

	| aCashier aCatalog aCart aCard aDate|
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: OrderedCollection new.
	aCard := Card withNumber: 123123123 expirationDate: aDate owner: 'San Martin'.
	
	aCatalog add:'validBook'->100.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.
	
	self assert: 150 equals: (aCashier checkOut: aCart) .	

		
		 ! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:42:01' prior: 50333901!
                     test04CannotCheckoutACartWithAnInvalidCreditCard

	| aCashier aCatalog aCart aCard aDate|
	
	aDate := GregorianMonthOfYear current .
	aCatalog := Dictionary new.
	aCashier := Cashier with: OrderedCollection new.
	aCard := Card withNumber: 123123123 expirationDate: aDate owner: 'San Martin'.
	
	aCatalog add:'validBook'->100.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.
	
	self assert: 150 equals: (aCashier checkOut: aCart) .	

		
		 ! !

Card!

Card!

Object subclass: #Card
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Card category: #TusLibros stamp: 'cmmmmm 11/4/2019 19:43:49'!
Object subclass: #Card
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

Object subclass: #CreditCard
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/4/2019 19:44:50'!
Object subclass: #CreditCard
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:45:23' prior: 50333918!
      test04CannotCheckoutACartWithAnInvalidCreditCard

	| aCashier aCatalog aCart aCard aDate|
	
	aDate := GregorianMonthOfYear current .
	aCatalog := Dictionary new.
	aCashier := Cashier with: OrderedCollection new.
	aCard := CreditCard withNumber: 123123123 expirationDate: aDate owner: 'San Martin'.
	
	aCatalog add:'validBook'->100.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.
	
	self assert: 150 equals: (aCashier checkOut: aCart) .	

		
		 ! !

!classRemoval: #Card stamp: 'cmmmmm 11/4/2019 19:46:03'!
Object subclass: #Card
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCardTest category: #TusLibros stamp: 'cmmmmm 11/4/2019 19:46:23'!
TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCardTest methodsFor: 'nil' stamp: 'cmmmmm 11/4/2019 19:46:42'!
            test01CannotCreateCardWithInvalidNumber! !
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:51:19' prior: 50333991!
               test01CannotCreateCardWithInvalidNumber
	| aPerson anExpirationDate anId |
	
	aPerson := 'San Martin'.
	anExpirationDate := GregorianMonthOfYear current.
	anId := 0.
	
self should: [  CreditCard withNumber: anId expirationDate: anExpirationDate owner: aPerson ]
	raise: Error - MessageNotUnderstood
	withExceptionDo: [ :anError |
		self assert: anError messageText = CreditCard invalidNumber.
			]! !

!testRun: #CreditCardTest #test01CannotCreateCardWithInvalidNumber stamp: 'cmmmmm 11/4/2019 19:51:24'!
ERROR!
!CreditCard class methodsFor: 'instance creation' stamp: 'cmmmmm 11/4/2019 19:51:38'!
          withNumber: aSmallInteger expirationDate: aGregorianMonthOfYear owner: aString 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeWithNumber: aSmallInteger expirationDate: aGregorianMonthOfYear owner: aString ! !
!CreditCard class methodsFor: 'instance creation' stamp: 'cmmmmm 11/4/2019 19:52:22' prior: 50334015!
  withNumber: anId expirationDate: anExpirationDate owner: aPerson 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	
	^self new initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson ! !

!testRun: #CreditCardTest #test01CannotCreateCardWithInvalidNumber stamp: 'cmmmmm 11/4/2019 19:52:25'!
ERROR!

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/4/2019 19:52:38'!
Object subclass: #CreditCard
	instanceVariableNames: 'id'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/4/2019 19:52:38'!
Object subclass: #CreditCard
	instanceVariableNames: 'id expirationDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/4/2019 19:52:38'!
Object subclass: #CreditCard
	instanceVariableNames: 'id expirationDate person'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 19:52:38'!
                    initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	self shouldBeImplemented.
	id := anId.
	expirationDate := anExpirationDate.
	person := aPerson.! !
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 19:52:42' prior: 50334062!
                   initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	id := anId.
	expirationDate := anExpirationDate.
	person := aPerson.! !

!testRun: #CreditCardTest #test01CannotCreateCardWithInvalidNumber stamp: 'cmmmmm 11/4/2019 19:52:52'!
FAILURE!
!CreditCard class methodsFor: 'instance creation' stamp: 'cmmmmm 11/4/2019 19:53:38' prior: 50334027!
                  withNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	^self new initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson ! !
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 19:55:44' prior: 50334071!
     initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	anId > 999999999999999 ifFalse: [self error: CreditCard invalidNumber].
	id := anId.
	expirationDate := anExpirationDate.
	person := aPerson.! !

!testRun: #CreditCardTest #test01CannotCreateCardWithInvalidNumber stamp: 'cmmmmm 11/4/2019 19:55:49'!
ERROR!
!CreditCard class methodsFor: 'Error Handling' stamp: 'cmmmmm 11/4/2019 19:56:12'!
                              invalidNumber
	self shouldBeImplemented.! !
!CreditCard class methodsFor: 'Error Handling' stamp: 'cmmmmm 11/4/2019 19:56:26' prior: 50334105!
                 invalidNumber
	^'Invalid card Number'.! !

!testRun: #CreditCardTest #test01CannotCreateCardWithInvalidNumber stamp: 'cmmmmm 11/4/2019 19:56:27'!
PASSED!

!testRun: #CreditCardTest #test01CannotCreateCardWithInvalidNumber stamp: 'cmmmmm 11/4/2019 19:56:27'!
PASSED!
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:00:41'!
test02CannotCreateCardWithInvalidGreaterNumber
	| aPerson anExpirationDate anId |
	
	aPerson := 'San Martin'.
	anExpirationDate := GregorianMonthOfYear current.
	anId := 10 raisedToInteger: 17.
	
self should: [  CreditCard withNumber: anId expirationDate: anExpirationDate owner: aPerson ]
	raise: Error - MessageNotUnderstood
	withExceptionDo: [ :anError |
		self assert: anError messageText = CreditCard invalidNumber.
			]! !
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:00:55' prior: 50334121!
             test02CannotCreateCardWithInvalidGreaterNumber
	| aPerson anExpirationDate anId |
	
	aPerson := 'San Martin'.
	anExpirationDate := GregorianMonthOfYear current.
	anId := 10 raisedToInteger: 16.
	
self should: [  CreditCard withNumber: anId expirationDate: anExpirationDate owner: aPerson ]
	raise: Error - MessageNotUnderstood
	withExceptionDo: [ :anError |
		self assert: anError messageText = CreditCard invalidNumber.
			]! !

!testRun: #CreditCardTest #test02CannotCreateCardWithInvalidGreaterNumber stamp: 'cmmmmm 11/4/2019 20:01:05'!
FAILURE!
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 20:02:22' prior: 50334091!
                              initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	anId > 999999999999999 ifFalse: [self error: CreditCard invalidNumber].
	(anId < 10 raisedToInteger: 16) ifFalse: [self error: CreditCard invalidNumber].
	id := anId.
	expirationDate := anExpirationDate.
	person := aPerson.! !

!testRun: #CreditCardTest #test02CannotCreateCardWithInvalidGreaterNumber stamp: 'cmmmmm 11/4/2019 20:02:24'!
ERROR!
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 20:02:40' prior: 50334159!
                           initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	anId > 999999999999999 ifFalse: [self error: CreditCard invalidNumber].
	anId < (10 raisedToInteger: 16) ifFalse: [self error: CreditCard invalidNumber].
	id := anId.
	expirationDate := anExpirationDate.
	person := aPerson.! !

!testRun: #CreditCardTest #test02CannotCreateCardWithInvalidGreaterNumber stamp: 'cmmmmm 11/4/2019 20:02:41'!
PASSED!

!testRun: #CreditCardTest #test01CannotCreateCardWithInvalidNumber stamp: 'cmmmmm 11/4/2019 20:02:41'!
PASSED!

!testRun: #CreditCardTest #test02CannotCreateCardWithInvalidGreaterNumber stamp: 'cmmmmm 11/4/2019 20:02:41'!
PASSED!
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 20:04:32' prior: 50334176!
                   initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	(anId between: (10 raisedToInteger: 15) and: (10 raisedToInteger: 16)) ifFalse: [self error: CreditCard invalidNumber].
	id := anId.
	expirationDate := anExpirationDate.
	person := aPerson.! !

!testRun: #CreditCardTest #test01CannotCreateCardWithInvalidNumber stamp: 'cmmmmm 11/4/2019 20:04:38'!
PASSED!

!testRun: #CreditCardTest #test02CannotCreateCardWithInvalidGreaterNumber stamp: 'cmmmmm 11/4/2019 20:04:38'!
FAILURE!

!testRun: #CreditCardTest #test02CannotCreateCardWithInvalidGreaterNumber stamp: 'cmmmmm 11/4/2019 20:04:38'!
FAILURE!
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 20:06:20' prior: 50334200!
                   initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	(anId between: (10 raisedToInteger: 15) and: ((10 raisedToInteger: 16) +1)) ifFalse: [self error: CreditCard invalidNumber].
	id := anId.
	expirationDate := anExpirationDate.
	person := aPerson.! !

!testRun: #CreditCardTest #test02CannotCreateCardWithInvalidGreaterNumber stamp: 'cmmmmm 11/4/2019 20:06:23'!
FAILURE!
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 20:07:21' prior: 50334223!
                      initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	(anId between: (10 raisedToInteger: 15) and: ((10 raisedToInteger: 16) -1)) ifFalse: [self error: CreditCard invalidNumber].
	id := anId.
	expirationDate := anExpirationDate.
	person := aPerson.! !

!testRun: #CreditCardTest #test02CannotCreateCardWithInvalidGreaterNumber stamp: 'cmmmmm 11/4/2019 20:07:24'!
PASSED!

!testRun: #CreditCardTest #test01CannotCreateCardWithInvalidNumber stamp: 'cmmmmm 11/4/2019 20:07:29'!
PASSED!

!testRun: #CreditCardTest #test02CannotCreateCardWithInvalidGreaterNumber stamp: 'cmmmmm 11/4/2019 20:07:29'!
PASSED!

GregorianMonthOfYear current!
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:09:18' prior: 50334138!
        test02CannotCreateCardWithInvalidGreaterNumber
	| aPerson anExpirationDate anId |
	
	aPerson := 'San Martin'.
	anExpirationDate := GregorianMonthOfYear current.
	anId := 10 raisedToInteger: 16.
	
self should: [  CreditCard withNumber: anId expirationDate: anExpirationDate owner: aPerson ]
	raise: Error - MessageNotUnderstood
	withExceptionDo: [ :anError |
		self assert: anError messageText = CreditCard invalidNumber.
			]! !
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:10:12'!
                             test03CannotCreateCardWithemptyOwner
	| aPerson anExpirationDate anId |
	
	aPerson := ''.
	anExpirationDate := GregorianMonthOfYear current.
	anId := 10 raisedToInteger: 16.
	
self should: [  CreditCard withNumber: anId expirationDate: anExpirationDate owner: aPerson ]
	raise: Error - MessageNotUnderstood
	withExceptionDo: [ :anError |
		self assert: anError messageText = CreditCard invalidOwner.
			]! !
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:10:32' prior: 50334280!
  test03CannotCreateCardWithemptyOwner
	| aPerson anExpirationDate anId |
	
	aPerson := ''.
	anExpirationDate := GregorianMonthOfYear current.
	anId := 10 raisedToInteger: 15.
	
self should: [  CreditCard withNumber: anId expirationDate: anExpirationDate owner: aPerson ]
	raise: Error - MessageNotUnderstood
	withExceptionDo: [ :anError |
		self assert: anError messageText = CreditCard invalidOwner.
			]! !

!testRun: #CreditCardTest #test03CannotCreateCardWithemptyOwner stamp: 'cmmmmm 11/4/2019 20:10:38'!
FAILURE!
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 20:11:25' prior: 50334239!
                             initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	(anId between: (10 raisedToInteger: 15) and: ((10 raisedToInteger: 16) -1)) ifFalse: [self error: CreditCard invalidNumber].
	aPerson isEmpty ifTrue: [self error: CreditCard invalidOwner].
	id := anId.
	expirationDate := anExpirationDate.
	person := aPerson.! !

!testRun: #CreditCardTest #test03CannotCreateCardWithemptyOwner stamp: 'cmmmmm 11/4/2019 20:11:26'!
ERROR!
!CreditCard class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:11:44'!
       invalidOwner
	self shouldBeImplemented.! !
!CreditCard class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:12:01' prior: 50334333!
             invalidOwner
	^'InvalidOwner'.! !

!testRun: #CreditCardTest #test03CannotCreateCardWithemptyOwner stamp: 'cmmmmm 11/4/2019 20:12:02'!
PASSED!

!testRun: #CreditCardTest #test01CannotCreateCardWithInvalidNumber stamp: 'cmmmmm 11/4/2019 20:12:02'!
PASSED!

!testRun: #CreditCardTest #test02CannotCreateCardWithInvalidGreaterNumber stamp: 'cmmmmm 11/4/2019 20:12:02'!
PASSED!

!testRun: #CreditCardTest #test03CannotCreateCardWithemptyOwner stamp: 'cmmmmm 11/4/2019 20:12:02'!
PASSED!
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 20:14:23'!
                isValid

	(id between: (10 raisedToInteger: 15) and: ((10 raisedToInteger: 16) -1)) ifFalse: [self error: CreditCard invalidNumber].
	person isEmpty ifTrue: [self error: CreditCard invalidOwner].! !
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 20:14:34' prior: 50334356!
                            isValid

	(id between: (10 raisedToInteger: 15) and: ((10 raisedToInteger: 16) -1)) ifFalse: [self error: CreditCard invalidNumber].
	person isEmpty ifTrue: [self error: CreditCard invalidOwner].
	^true.! !
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 20:14:54' prior: 50334316!
                    initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	id := anId.
	expirationDate := anExpirationDate.
	person := aPerson.
	self isValid.! !

!testRun: #CreditCardTest #test01CannotCreateCardWithInvalidNumber stamp: 'cmmmmm 11/4/2019 20:15:22'!
PASSED!

!testRun: #CreditCardTest #test02CannotCreateCardWithInvalidGreaterNumber stamp: 'cmmmmm 11/4/2019 20:15:22'!
PASSED!

!testRun: #CreditCardTest #test03CannotCreateCardWithemptyOwner stamp: 'cmmmmm 11/4/2019 20:15:22'!
PASSED!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:17:53'!
                   test04CannotCheckoutACartWithAnExpiredCreditCard

	| aCashier aCatalog aCart aCard aDate|
	
	aDate := GregorianMonthOfYear current .
	aCatalog := Dictionary new.
	aCashier := Cashier with: OrderedCollection new.
	aCard := CreditCard withNumber: 123123123 expirationDate: aDate owner: 'San Martin'.
	
	aCatalog add:'validBook'->100.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.
	
	self assert: 150 equals: (aCashier checkOut: aCart) .	

		
		 ! !

GregorianMonthOfYear!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:21:26' prior: 50334395!
               test04CannotCheckoutACartWithAnExpiredCreditCard

	| aCashier aCatalog aCart aCard aDate anExpiredDate|
	
	anExpiredDate := GregorianMonthOfYear decemberOf: 2018.
	aCatalog := Dictionary new.
	aCashier := Cashier with: OrderedCollection new.
	aCard := CreditCard withNumber: (10 raisedToInteger: 15) expirationDate: anExpiredDate owner: 'San Martin'.
	
	aCatalog add:'validBook'->100.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.
	
	self assert: 150 equals: (aCashier checkOut: aCart) .	

		
		 ! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:22:01' prior: 50334414!
                 test04CannotCheckoutACartWithAnExpiredCreditCard

	| aCashier aCatalog aCart aCard aDate anExpiredDate aCurrentDate|
	
	anExpiredDate := GregorianMonthOfYear decemberOf: 2018.
	aCurrentDate := GregorianMonthOfYear decemberOf: 2019.
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: OrderedCollection new.
	aCard := CreditCard withNumber: (10 raisedToInteger: 15) expirationDate: anExpiredDate owner: 'San Martin'.
	
	aCatalog add:'validBook'->100.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.
	
	self assert: 150 equals: (aCashier checkOut: aCart) .	

		
		 ! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:23:06' prior: 50334434!
          test04CannotCheckoutACartWithAnExpiredCreditCard

	| aCashier aCatalog aCart aCard aDate anExpiredDate aCurrentDate|
	
	anExpiredDate := GregorianMonthOfYear decemberOf: 2018.
	aCurrentDate := GregorianMonthOfYear decemberOf: 2019.
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: OrderedCollection new.
	aCard := CreditCard withNumber: (10 raisedToInteger: 15) expirationDate: anExpiredDate owner: 'San Martin'.
	
	aCatalog add:'validBook'->100.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.
	
	self assert: 150 equals: (aCashier checkOut: aCart) .	

	self should: [ aCashier checkOut: aCart onDate: aCurrentDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmpty.
			]
		
		 ! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:27:04' prior: 50334456!
                              test04CannotCheckoutACartWithAnExpiredCreditCard

	| aCashier aCatalog aCart aCard anExpiredDate aCurrentDate|
	
	anExpiredDate := GregorianMonthOfYear decemberOf: 2018.
	aCurrentDate := GregorianMonthOfYear decemberOf: 2019.
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: OrderedCollection new onDate: aCurrentDate.
	aCard := CreditCard withNumber: (10 raisedToInteger: 15) expirationDate: anExpiredDate owner: 'San Martin'.
	
	aCatalog add:'validBook'->100.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.
	
	self assert: 150 equals: (aCashier checkOut: aCart) .	

	self should: [ aCashier checkOut: aCart withCard: aCard ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmpty.
			]
		
		 ! !

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/4/2019 20:27:24'!
ERROR!

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/4/2019 20:27:35'!
ERROR!
!Cashier class methodsFor: 'instance creation' stamp: 'cmmmmm 11/4/2019 20:27:43'!
                          with: anOrderedCollection onDate: aGregorianMonthOfYear 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeWith: anOrderedCollection onDate: aGregorianMonthOfYear ! !
!Cashier class methodsFor: 'instance creation' stamp: 'cmmmmm 11/4/2019 20:28:18' prior: 50334521!
                   with: anOrderedCollection onDate: aGregorianMonthOfYear 

	^self new initializeWith: anOrderedCollection onDate: aGregorianMonthOfYear ! !
!Cashier class methodsFor: 'instance creation' stamp: 'cmmmmm 11/4/2019 20:30:01' prior: 50334532!
                  with: aSalesBook onDate: aGregorianMonthOfYear 

	^self new initializeWith: aSalesBook onDate: aGregorianMonthOfYear  .! !

!testRun: #CashierTest #test01NewCashierWith stamp: 'cmmmmm 11/4/2019 20:30:16'!
PASSED!

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 20:30:16'!
PASSED!

!testRun: #CashierTest #test03CheckoutACartWithSeveralElementGivesCorrectSubtotal stamp: 'cmmmmm 11/4/2019 20:30:16'!
PASSED!

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/4/2019 20:30:16'!
ERROR!

!testRun: #CashierTest #test04CannotCheckoutACartWithAnInvalidCreditCard stamp: 'cmmmmm 11/4/2019 20:30:16'!
ERROR!

!methodRemoval: CashierTest #test04CannotCheckoutACartWithAnInvalidCreditCard stamp: 'cmmmmm 11/4/2019 20:30:29'!
test04CannotCheckoutACartWithAnInvalidCreditCard

	| aCashier aCatalog aCart aCard aDate|
	
	aDate := GregorianMonthOfYear current .
	aCatalog := Dictionary new.
	aCashier := Cashier with: OrderedCollection new.
	aCard := CreditCard withNumber: 123123123 expirationDate: aDate owner: 'San Martin'.
	
	aCatalog add:'validBook'->100.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.
	
	self assert: 150 equals: (aCashier checkOut: aCart) .	

		
		 !

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/4/2019 20:30:30'!
ERROR!

!classDefinition: #Cashier category: #TusLibros stamp: 'cmmmmm 11/4/2019 20:30:44'!
Object subclass: #Cashier
	instanceVariableNames: 'salesBook gregorianMonthOfYear'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cashier methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 20:30:44'!
                               initializeWith: aSalesBook onDate: aGregorianMonthOfYear 
	self shouldBeImplemented.
	salesBook := aSalesBook.
	gregorianMonthOfYear := aGregorianMonthOfYear.! !

!classDefinition: #Cashier category: #TusLibros stamp: 'cmmmmm 11/4/2019 20:31:04'!
Object subclass: #Cashier
	instanceVariableNames: 'salesBook gregorianMonthOfYear currentDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cashier methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 20:31:02' prior: 50334594!
          initializeWith: aSalesBook onDate: aGregorianMonthOfYear 
	
	salesBook := aSalesBook.
	currentDate := aGregorianMonthOfYear.! !

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/4/2019 20:31:08'!
FAILURE!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:31:30' prior: 50334485!
      test04CannotCheckoutACartWithAnExpiredCreditCard

	| aCashier aCatalog aCart aCard anExpiredDate aCurrentDate|
	
	anExpiredDate := GregorianMonthOfYear decemberOf: 2018.
	aCurrentDate := GregorianMonthOfYear decemberOf: 2019.
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: OrderedCollection new onDate: aCurrentDate.
	aCard := CreditCard withNumber: (10 raisedToInteger: 15) expirationDate: anExpiredDate owner: 'San Martin'.
	
	aCatalog add:'validBook'->100.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.	

	self should: [ aCashier checkOut: aCart withCard: aCard ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmpty.
			]
		
		 ! !

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/4/2019 20:31:32'!
ERROR!
!Cashier methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:31:42'!
            checkOut: aCart withCard: aCreditCard 
	self shouldBeImplemented.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:33:17' prior: 50334651!
                            checkOut: aCart withCard: aCreditCard
	
	aCreditCard date < currentDate ifTrue: [self error: Cashier creditCardExpired.].
	aCart isEmpty ifTrue: [self error: Cashier cartCanNotBeEmpty.]
	ifFalse: [ ^ aCart subtotal ]! !

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/4/2019 20:33:26'!
ERROR!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:33:34'!
                             date
	self shouldBeImplemented.! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:33:41' prior: 50334671!
                           date
	^expirationDate ! !

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/4/2019 20:33:43'!
ERROR!
!Cashier class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:33:56'!
                            creditCardExpired
	self shouldBeImplemented.! !
!Cashier class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:34:06' prior: 50334684!
           creditCardExpired
	^'credit card expired'! !

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/4/2019 20:34:07'!
FAILURE!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:34:23' prior: 50334621!
                         test04CannotCheckoutACartWithAnExpiredCreditCard

	| aCashier aCatalog aCart aCard anExpiredDate aCurrentDate|
	
	anExpiredDate := GregorianMonthOfYear decemberOf: 2018.
	aCurrentDate := GregorianMonthOfYear decemberOf: 2019.
	
	aCatalog := Dictionary new.
	aCashier := Cashier with: OrderedCollection new onDate: aCurrentDate.
	aCard := CreditCard withNumber: (10 raisedToInteger: 15) expirationDate: anExpiredDate owner: 'San Martin'.
	
	aCatalog add:'validBook'->100.
	aCart := Cart acceptingItemsOf: aCatalog.
	
	aCart add: 'validBook'.	

	self should: [ aCashier checkOut: aCart withCard: aCard ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier creditCardExpired .
			]
		
		 ! !

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/4/2019 20:34:26'!
PASSED!

!testRun: #CashierTest #test01NewCashierWith stamp: 'cmmmmm 11/4/2019 20:34:26'!
PASSED!

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 20:34:26'!
PASSED!

!testRun: #CashierTest #test03CheckoutACartWithSeveralElementGivesCorrectSubtotal stamp: 'cmmmmm 11/4/2019 20:34:26'!
PASSED!

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/4/2019 20:34:26'!
PASSED!

!testRun: #CashierTest #test01NewCashierWith stamp: 'cmmmmm 11/4/2019 20:34:31'!
PASSED!

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/4/2019 20:34:31'!
PASSED!

!testRun: #CashierTest #test03CheckoutACartWithSeveralElementGivesCorrectSubtotal stamp: 'cmmmmm 11/4/2019 20:34:31'!
PASSED!

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/4/2019 20:34:31'!
PASSED!

----QUIT----(4 November 2019 20:36:36) CuisUniversity-3938.image priorSource: 14529262!

----STARTUP---- (7 November 2019 16:13:54) as /Users/cmurga/Downloads/macos64/CuisUniversity-3938.image!


!classRemoval: #CreditCard stamp: 'cmmmmm 11/7/2019 16:14:01'!
Object subclass: #CreditCard
	instanceVariableNames: 'id expirationDate person'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cashier stamp: 'cmmmmm 11/7/2019 16:14:02'!
Object subclass: #Cashier
	instanceVariableNames: 'salesBook gregorianMonthOfYear currentDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cart stamp: 'cmmmmm 11/7/2019 16:14:02'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CreditCardTest stamp: 'cmmmmm 11/7/2019 16:14:02'!
TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CashierTest stamp: 'cmmmmm 11/7/2019 16:14:02'!
TestCase subclass: #CashierTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CartTest stamp: 'cmmmmm 11/7/2019 16:14:02'!
TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CartTest category: #TusLibros stamp: 'cmmmmm 11/7/2019 16:14:26'!
TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:08'!
   test01NewCartsAreCreatedEmpty

	self assert: self createCart isEmpty! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                test02CanNotAddItemsThatDoNotBelongToStore

	| cart |
	
	cart := self createCart.
	
	self 
		should: [ cart add: self itemNotSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidItemErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:43'!
                              test03AfterAddingAnItemTheCartIsNotEmptyAnymore

	| cart |
	
	cart := self createCart.
	
	cart add: self itemSellByTheStore.
	self deny: cart isEmpty ! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:43'!
                              test04CanNotAddNonPositiveNumberOfItems

	| cart |
	
	cart := self createCart.
	
	self 
		should: [cart add: 0 of: self itemSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidQuantityErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                           test05CanNotAddMoreThanOneItemNotSellByTheStore

	| cart |
	
	cart := self createCart.
	
	self 
		should: [cart add: 2 of: self itemNotSellByTheStore  ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidItemErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:43'!
                   test06CartRemembersAddedItems

	| cart |
	
	cart := self createCart.
	
	cart add: self itemSellByTheStore.
	self assert: (cart includes: self itemSellByTheStore)! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:43'!
                   test07CartDoesNotHoldNotAddedItems

	| cart |
	
	cart := self createCart.
	
	self deny: (cart includes: self itemSellByTheStore)! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                    test08CartRemembersTheNumberOfAddedItems

	| cart |
	
	cart := self createCart.
	
	cart add: 2 of: self itemSellByTheStore.
	self assert: (cart occurrencesOf: self itemSellByTheStore) = 2! !
!CartTest methodsFor: 'support' stamp: 'HernanWilkinson 6/17/2013 17:48'!
                       createCart
	
	^Cart acceptingItemsOf: self defaultCatalog! !
!CartTest methodsFor: 'support' stamp: 'HernanWilkinson 6/17/2013 17:43'!
                         defaultCatalog
	
	^ Array with: self itemSellByTheStore! !
!CartTest methodsFor: 'support' stamp: 'HernanWilkinson 6/17/2013 17:44'!
                           itemNotSellByTheStore
	
	^'invalidBook'! !
!CartTest methodsFor: 'support' stamp: 'HernanWilkinson 6/17/2013 17:43'!
           itemSellByTheStore
	
	^ 'validBook'! !

TestCase subclass: #CashierTest
	instanceVariableNames: 'catalog cashier cart card merchantProcessorSimulator currentDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CashierTest category: #TusLibros stamp: 'cmmmmm 11/7/2019 16:14:26'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'catalog cashier cart card merchantProcessorSimulator currentDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CashierTest methodsFor: 'testing' stamp: 'LS 11/7/2019 15:48:30'!
                          test01NewCashierWith
	
	cart := Cart acceptingItemsOf: (Dictionary with: 'validBook'->100).
		
	self should: [ cashier checkOut: cart withCard: card ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmpty.
			]
		
		 ! !
!CashierTest methodsFor: 'testing' stamp: 'LS 11/7/2019 15:49:03'!
                test02CheckoutACartWith1ElementIsCorrect
	
	catalog add:'validBook'->100.
	
	cart add: 'validBook'.
	
	self assert: 100 equals: (cashier checkOut: cart withCard: card) .	

		
		 ! !
!CashierTest methodsFor: 'testing' stamp: 'LS 11/7/2019 15:49:26'!
       test03CheckoutACartWithSeveralElementGivesCorrectSubtotal

	catalog add:'validBook'->100; add:'validBook2'->50.
		
	cart add: 'validBook'.
	cart add: 'validBook2'.
	
	self assert: 150 equals: (cashier checkOut: cart withCard: card) .	

		
		 ! !
!CashierTest methodsFor: 'testing' stamp: 'LS 11/6/2019 16:44:34'!
       test04CannotCheckoutACartWithAnExpiredCreditCard

	| anExpiredCard anExpiredDate |
	
	anExpiredDate := GregorianMonthOfYear decemberOf: 2018.
	anExpiredCard := CreditCard withNumber: (10 raisedToInteger: 15) expirationDate: anExpiredDate owner: 'San Martin'.
	
	catalog add:'validBook'->100.
	
	cart add: 'validBook'.	

	self should: [ cashier checkOut: cart withCard: anExpiredCard ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier creditCardExpired .
			]
		
		 ! !
!CashierTest methodsFor: 'setUp/tearDown' stamp: 'LS 11/7/2019 15:51:40'!
                              setUp

	| aValidExpirationDate aSalesBook |

	aValidExpirationDate := GregorianMonthOfYear decemberOf: 2020.
	aSalesBook := OrderedCollection new.

	currentDate := GregorianMonthOfYear decemberOf: 2019.	
	merchantProcessorSimulator := MerchantProcessorSimulator onDate: currentDate.
	catalog := Dictionary new.
	cashier := Cashier with: aSalesBook onDate: currentDate withMerchantProcessor: merchantProcessorSimulator.
	cart := Cart acceptingItemsOf: catalog.
	card := CreditCard withNumber: (10 raisedToInteger: 15) expirationDate: aValidExpirationDate owner: 'San Martin'.
		
		 ! !

TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCardTest category: #TusLibros stamp: 'cmmmmm 11/7/2019 16:14:26'!
TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:51:19'!
                            test01CannotCreateCardWithInvalidNumber
	| aPerson anExpirationDate anId |
	
	aPerson := 'San Martin'.
	anExpirationDate := GregorianMonthOfYear current.
	anId := 0.
	
self should: [  CreditCard withNumber: anId expirationDate: anExpirationDate owner: aPerson ]
	raise: Error - MessageNotUnderstood
	withExceptionDo: [ :anError |
		self assert: anError messageText = CreditCard invalidNumber.
			]! !
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:09:18'!
                         test02CannotCreateCardWithInvalidGreaterNumber
	| aPerson anExpirationDate anId |
	
	aPerson := 'San Martin'.
	anExpirationDate := GregorianMonthOfYear current.
	anId := 10 raisedToInteger: 16.
	
self should: [  CreditCard withNumber: anId expirationDate: anExpirationDate owner: aPerson ]
	raise: Error - MessageNotUnderstood
	withExceptionDo: [ :anError |
		self assert: anError messageText = CreditCard invalidNumber.
			]! !
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:10:32'!
                             test03CannotCreateCardWithemptyOwner
	| aPerson anExpirationDate anId |
	
	aPerson := ''.
	anExpirationDate := GregorianMonthOfYear current.
	anId := 10 raisedToInteger: 15.
	
self should: [  CreditCard withNumber: anId expirationDate: anExpirationDate owner: aPerson ]
	raise: Error - MessageNotUnderstood
	withExceptionDo: [ :anError |
		self assert: anError messageText = CreditCard invalidOwner.
			]! !

Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cart category: #TusLibros stamp: 'cmmmmm 11/7/2019 16:14:27'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cart methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                              invalidItemErrorMessage
	
	^'Item is not in catalog'! !
!Cart methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                           invalidQuantityErrorMessage
	
	^'Invalid number of items'! !
!Cart methodsFor: 'assertions' stamp: 'cmmmmm 11/4/2019 19:24:33'!
assertIsValidItem: anItem

	(catalog includesKey: anItem) ifFalse: [ self error: self invalidItemErrorMessage ]! !
!Cart methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 17:51'!
    assertIsValidQuantity: aQuantity

	aQuantity strictlyPositive ifFalse: [ self error: self invalidQuantityErrorMessage ]! !
!Cart methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 17:48'!
                        initializeAcceptingItemsOf: aCatalog

	catalog := aCatalog.
	items := OrderedCollection new.! !
!Cart methodsFor: 'queries' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                          occurrencesOf: anItem

	^items occurrencesOf: anItem  ! !
!Cart methodsFor: 'queries' stamp: 'cmmmmm 11/4/2019 19:13:41'!
      subtotal
	| sum |

	sum _ 0.
	catalog do: [:anItem | sum _ sum + anItem ]. 
	^sum.! !
!Cart methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 17:44'!
    includes: anItem

	^items includes: anItem ! !
!Cart methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 17:44'!
           isEmpty
	
	^items isEmpty ! !
!Cart methodsFor: 'adding' stamp: 'HernanWilkinson 6/17/2013 17:44'!
                             add: anItem

	^ self add: 1 of: anItem ! !
!Cart methodsFor: 'adding' stamp: 'HernanWilkinson 6/17/2013 17:51'!
                add: aQuantity of: anItem

	self assertIsValidQuantity: aQuantity.
	self assertIsValidItem: anItem.

	1 to: aQuantity do: [ :aNumber | items add: anItem ]! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Cart class
	instanceVariableNames: ''!

!classDefinition: 'Cart class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 16:14:27'!
Cart class
	instanceVariableNames: ''!
!Cart class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 17:48'!
         acceptingItemsOf: aCatalog

	^self new initializeAcceptingItemsOf: aCatalog ! !

Object subclass: #Cashier
	instanceVariableNames: 'salesBook gregorianMonthOfYear currentDate merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cashier category: #TusLibros stamp: 'cmmmmm 11/7/2019 16:14:27'!
Object subclass: #Cashier
	instanceVariableNames: 'salesBook gregorianMonthOfYear currentDate merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cashier methodsFor: 'initialization' stamp: 'LS 11/7/2019 15:41:07'!
      initializeWith: aSalesBook onDate: aGregorianMonthOfYear withMerchantProcessor: aMerchantProcessor
	
	salesBook := aSalesBook.
	currentDate := aGregorianMonthOfYear.
	merchantProcessor := aMerchantProcessor.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'LS 10/31/2019 21:30:50'!
 cartCanNotBeEmpty
	self shouldBeImplemented.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'LS 11/7/2019 15:55:43'!
     checkOut: aCart withCard: aCreditCard
	
	aCart isEmpty ifTrue: [self error: Cashier cartCanNotBeEmpty.].
	merchantProcessor post: aCreditCard withAmount: aCart subtotal.! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Cashier class
	instanceVariableNames: ''!

!classDefinition: 'Cashier class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 16:14:27'!
Cashier class
	instanceVariableNames: ''!
!Cashier class methodsFor: 'instance creation' stamp: 'LS 10/31/2019 21:29:23'!
                       cartCanNotBeEmpty
	^'cart can not be empty'! !
!Cashier class methodsFor: 'instance creation' stamp: 'LS 11/7/2019 15:43:18'!
  with: aSalesBook onDate: aGregorianMonthOfYear withMerchantProcessor: aMerchantProcessor

	^self new initializeWith: aSalesBook onDate: aGregorianMonthOfYear withMerchantProcessor: aMerchantProcessor.! !
!Cashier class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:34:06'!
                               creditCardExpired
	^'credit card expired'! !

Object subclass: #CreditCard
	instanceVariableNames: 'id expirationDate person'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/7/2019 16:14:27'!
Object subclass: #CreditCard
	instanceVariableNames: 'id expirationDate person'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 20:14:54'!
 initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	id := anId.
	expirationDate := anExpirationDate.
	person := aPerson.
	self isValid.! !
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 20:14:34'!
             isValid

	(id between: (10 raisedToInteger: 15) and: ((10 raisedToInteger: 16) -1)) ifFalse: [self error: CreditCard invalidNumber].
	person isEmpty ifTrue: [self error: CreditCard invalidOwner].
	^true.! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:33:41'!
                               date
	^expirationDate ! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

CreditCard class
	instanceVariableNames: ''!

!classDefinition: 'CreditCard class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 16:14:27'!
CreditCard class
	instanceVariableNames: ''!
!CreditCard class methodsFor: 'instance creation' stamp: 'cmmmmm 11/4/2019 19:53:38'!
                           withNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	^self new initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson ! !
!CreditCard class methodsFor: 'Error Handling' stamp: 'cmmmmm 11/4/2019 19:56:26'!
               invalidNumber
	^'Invalid card Number'.! !
!CreditCard class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:12:01'!
                              invalidOwner
	^'InvalidOwner'.! !

Object subclass: #MerchantProcessorSimulator
	instanceVariableNames: 'creditCard currentDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #MerchantProcessorSimulator category: #TusLibros stamp: 'cmmmmm 11/7/2019 16:14:27'!
Object subclass: #MerchantProcessorSimulator
	instanceVariableNames: 'creditCard currentDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!MerchantProcessorSimulator methodsFor: 'initialization' stamp: 'LS 11/7/2019 15:53:16'!
                    initializeOnDate: aGregorianMonthOfYear 
	currentDate := aGregorianMonthOfYear.! !
!MerchantProcessorSimulator methodsFor: 'as yet unclassified' stamp: 'LS 11/7/2019 15:59:01'!
               post: aCreditCard withAmount: anAmount

	aCreditCard date < currentDate ifTrue: [self error: MerchantProcessorSimulator creditCardExpired.].! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

MerchantProcessorSimulator class
	instanceVariableNames: ''!

!classDefinition: 'MerchantProcessorSimulator class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 16:14:27'!
MerchantProcessorSimulator class
	instanceVariableNames: ''!
!MerchantProcessorSimulator class methodsFor: 'initialization' stamp: 'LS 11/7/2019 15:52:36'!
            onDate: aGregorianMonthOfYear 
	self new initializeOnDate: aGregorianMonthOfYear.! !

----End fileIn of /Users/cmurga/Documents/Facultad/ejerciciosIS1/TusLibros/2/TusLibros.st----!

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/7/2019 16:16:18'!
ERROR!

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/7/2019 16:16:32'!
ERROR!
!CashierTest methodsFor: 'testing' stamp: 'cmmmmm 11/7/2019 16:22:26' prior: 50334931!
                          test02CheckoutACartWith1ElementIsCorrect
	

	| aValidExpirationDate aSalesBook |

	aValidExpirationDate := GregorianMonthOfYear decemberOf: 2020.
	aSalesBook := OrderedCollection new.

	currentDate := GregorianMonthOfYear decemberOf: 2019.	
	merchantProcessorSimulator := MerchantProcessorSimulator onDate: currentDate.
	catalog := Dictionary new.
	cashier := Cashier with: aSalesBook onDate: currentDate withMerchantProcessor: merchantProcessorSimulator.
	cart := Cart acceptingItemsOf: catalog.
	card := CreditCard withNumber: (10 raisedToInteger: 15) expirationDate: aValidExpirationDate owner: 'San Martin'.	
	
	
	catalog add:'validBook'->100.
	
	cart add: 'validBook'.
	
	self assert: 100 equals: (cashier checkOut: cart withCard: card) .	

		
		 ! !

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/7/2019 16:22:30'!
ERROR!

merchantProcessorSimulator!

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/7/2019 16:26:07'!
ERROR!
!MerchantProcessorSimulator class methodsFor: 'initialization' stamp: 'cmmmmm 11/7/2019 16:26:59' prior: 50335288!
  onDate: aGregorianMonthOfYear 
	^self new initializeOnDate: aGregorianMonthOfYear.! !

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/7/2019 16:27:09'!
FAILURE!
!CashierTest methodsFor: 'testing' stamp: 'cmmmmm 11/7/2019 16:27:43' prior: 50335304!
    test02CheckoutACartWith1ElementIsCorrect
	
	catalog add:'validBook'->100.
	
	cart add: 'validBook'.
	
	self assert: 100 equals: (cashier checkOut: cart withCard: card) .	

		
		 ! !

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/7/2019 16:28:10'!
FAILURE!

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/7/2019 16:28:29'!
FAILURE!
!MerchantProcessorSimulator methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 16:28:58' prior: 50335271!
                          post: aCreditCard withAmount: anAmount

	aCreditCard date < currentDate ifTrue: [self error: MerchantProcessorSimulator creditCardExpired.].
	^anAmount ! !

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/7/2019 16:28:59'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 16:29:18' prior: 50335158!
                      checkOut: aCart withCard: aCreditCard
	
	aCart isEmpty ifTrue: [self error: Cashier cartCanNotBeEmpty.].
	^merchantProcessor post: aCreditCard withAmount: aCart subtotal.! !

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/7/2019 16:29:19'!
PASSED!

!testRun: #CashierTest #test01NewCashierWith stamp: 'cmmmmm 11/7/2019 16:29:19'!
PASSED!

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/7/2019 16:29:19'!
PASSED!

!testRun: #CashierTest #test03CheckoutACartWithSeveralElementGivesCorrectSubtotal stamp: 'cmmmmm 11/7/2019 16:29:19'!
PASSED!

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/7/2019 16:29:19'!
ERROR!

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/7/2019 16:29:19'!
ERROR!

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/7/2019 16:30:47'!
ERROR!
!MerchantProcessorSimulator class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 16:30:58'!
                      creditCardExpired
	self shouldBeImplemented.! !
!MerchantProcessorSimulator class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 16:31:11' prior: 50335411!
                        creditCardExpired
	^'Credit Card Expired'! !

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/7/2019 16:31:12'!
FAILURE!

anError!

Cashier creditCardExpired!

anError messageText!
!MerchantProcessorSimulator class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 16:33:04' prior: 50335417!
        creditCardExpired
	^'credit card expired'! !

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/7/2019 16:33:27'!
PASSED!

!testRun: #CashierTest #test01NewCashierWith stamp: 'cmmmmm 11/7/2019 16:33:27'!
PASSED!

!testRun: #CashierTest #test02CheckoutACartWith1ElementIsCorrect stamp: 'cmmmmm 11/7/2019 16:33:27'!
PASSED!

!testRun: #CashierTest #test03CheckoutACartWithSeveralElementGivesCorrectSubtotal stamp: 'cmmmmm 11/7/2019 16:33:27'!
PASSED!

!testRun: #CashierTest #test04CannotCheckoutACartWithAnExpiredCreditCard stamp: 'cmmmmm 11/7/2019 16:33:27'!
PASSED!

----SNAPSHOT----(7 November 2019 17:06:08) CuisUniversity-3938.image priorSource: 99360!

!classRemoval: #MerchantProcessorSimulator stamp: 'cmmmmm 11/7/2019 19:20:14'!
Object subclass: #MerchantProcessorSimulator
	instanceVariableNames: 'creditCard currentDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CreditCard stamp: 'cmmmmm 11/7/2019 19:20:14'!
Object subclass: #CreditCard
	instanceVariableNames: 'id expirationDate person'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cashier stamp: 'cmmmmm 11/7/2019 19:20:14'!
Object subclass: #Cashier
	instanceVariableNames: 'salesBook gregorianMonthOfYear currentDate merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cart stamp: 'cmmmmm 11/7/2019 19:20:14'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CreditCardTest stamp: 'cmmmmm 11/7/2019 19:20:14'!
TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CashierTest stamp: 'cmmmmm 11/7/2019 19:20:15'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'catalog cashier cart card merchantProcessorSimulator currentDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CartTest stamp: 'cmmmmm 11/7/2019 19:20:15'!
TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cart category: #TusLibros stamp: 'cmmmmm 11/7/2019 19:20:24'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cart methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                         invalidQuantityErrorMessage
	
	^'Invalid number of items'! !
!Cart methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                      invalidItemErrorMessage
	
	^'Item is not in catalog'! !
!Cart methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 18:06'!
                               assertIsValidItem: anItem

	(catalog includesKey: anItem) ifFalse: [ self error: self invalidItemErrorMessage ]! !
!Cart methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 17:51'!
    assertIsValidQuantity: aQuantity

	aQuantity strictlyPositive ifFalse: [ self error: self invalidQuantityErrorMessage ]! !
!Cart methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 17:48'!
                        initializeAcceptingItemsOf: aCatalog

	catalog := aCatalog.
	items := OrderedCollection new.! !
!Cart methodsFor: 'queries' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                          occurrencesOf: anItem

	^items occurrencesOf: anItem  ! !
!Cart methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 17:44'!
includes: anItem

	^items includes: anItem ! !
!Cart methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 17:44'!
           isEmpty
	
	^items isEmpty ! !
!Cart methodsFor: 'total' stamp: 'HernanWilkinson 6/17/2013 19:09'!
                              total

	^ items sum: [ :anItem | catalog at: anItem ]! !
!Cart methodsFor: 'adding' stamp: 'HernanWilkinson 6/17/2013 17:51'!
  add: aQuantity of: anItem

	self assertIsValidQuantity: aQuantity.
	self assertIsValidItem: anItem.

	1 to: aQuantity do: [ :aNumber | items add: anItem ]! !
!Cart methodsFor: 'adding' stamp: 'HernanWilkinson 6/17/2013 17:44'!
                             add: anItem

	^ self add: 1 of: anItem ! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Cart class
	instanceVariableNames: ''!

!classDefinition: 'Cart class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 19:20:24'!
Cart class
	instanceVariableNames: ''!
!Cart class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 17:48'!
                            acceptingItemsOf: aCatalog

	^self new initializeAcceptingItemsOf: aCatalog ! !

TestCase subclass: #CartTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CartTest category: #TusLibros stamp: 'cmmmmm 11/7/2019 19:20:24'!
TestCase subclass: #CartTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
                 test04CanNotAddNonPositiveNumberOfItems

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self 
		should: [cart add: 0 of: testObjectsFactory itemSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidQuantityErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
                               test02CanNotAddItemsThatDoNotBelongToStore

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self 
		should: [ cart add: testObjectsFactory itemNotSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidItemErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:11'!
  test08CartRemembersTheNumberOfAddedItems

	| cart |
	
	cart := testObjectsFactory createCart.
	
	cart add: 2 of: testObjectsFactory itemSellByTheStore.
	self assert: (cart occurrencesOf: testObjectsFactory itemSellByTheStore) = 2! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
               test01NewCartsAreCreatedEmpty

	self assert: testObjectsFactory createCart isEmpty! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
  test03AfterAddingAnItemTheCartIsNotEmptyAnymore

	| cart |
	
	cart := testObjectsFactory createCart.
	
	cart add: testObjectsFactory itemSellByTheStore.
	self deny: cart isEmpty ! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:11'!
  test07CartDoesNotHoldNotAddedItems

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self deny: (cart includes: testObjectsFactory itemSellByTheStore)! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
                        test05CanNotAddMoreThanOneItemNotSellByTheStore

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self 
		should: [cart add: 2 of: testObjectsFactory itemNotSellByTheStore  ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidItemErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:11'!
                       test06CartRemembersAddedItems

	| cart |
	
	cart := testObjectsFactory createCart.
	
	cart add: testObjectsFactory itemSellByTheStore.
	self assert: (cart includes: testObjectsFactory itemSellByTheStore)! !
!CartTest methodsFor: 'setup' stamp: 'HernanWilkinson 6/17/2013 18:09'!
         setUp 

	testObjectsFactory := StoreTestObjectsFactory new.! !

Object subclass: #Cashier
	instanceVariableNames: 'cart salesBook merchantProcessor creditCard total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cashier category: #TusLibros stamp: 'cmmmmm 11/7/2019 19:20:24'!
Object subclass: #Cashier
	instanceVariableNames: 'cart salesBook merchantProcessor creditCard total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:06'!
                               registerSale

	salesBook add: self createSale! !
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:07'!
                           createSale

	^ Sale of: total
! !
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:08'!
          calculateTotal

	total := cart total.
	! !
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:06'!
 debitTotal

	merchantProcessor debit: total from: creditCard.
	! !
!Cashier methodsFor: 'checkout' stamp: 'HernanWilkinson 6/17/2013 19:06'!
                   checkOut

	self calculateTotal.
	self debitTotal.
	self registerSale.

	^ total! !
!Cashier methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 18:53'!
                             initializeToCheckout: aCart charging: aCreditCard throught: aMerchantProcessor registeringOn: aSalesBook
	
	cart := aCart.
	creditCard := aCreditCard.
	merchantProcessor := aMerchantProcessor.
	salesBook := aSalesBook! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Cashier class
	instanceVariableNames: ''!

!classDefinition: 'Cashier class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 19:20:24'!
Cashier class
	instanceVariableNames: ''!
!Cashier class methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 18:22'!
     assertIsNotEmpty: aCart 
	
	aCart isEmpty ifTrue: [self error: self cartCanNotBeEmptyErrorMessage ]! !
!Cashier class methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 18:23'!
       assertIsNotExpired: aCreditCard on: aDate
	
	(aCreditCard isExpiredOn: aDate) ifTrue: [ self error: self canNotChargeAnExpiredCreditCardErrorMessage ]! !
!Cashier class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 18:51'!
             toCheckout: aCart charging: aCreditCard throught: aMerchantProcessor on: aDate registeringOn: aSalesBook
	
	self assertIsNotEmpty: aCart.
	self assertIsNotExpired: aCreditCard on: aDate.
	
	^self new initializeToCheckout: aCart charging: aCreditCard throught: aMerchantProcessor registeringOn: aSalesBook! !
!Cashier class methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 19:02'!
                      creditCardHasNoCreditErrorMessage
	
	^'Credit card has no credit'! !
!Cashier class methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:56'!
     cartCanNotBeEmptyErrorMessage
	
	^'Can not check out an empty cart'! !
!Cashier class methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 18:21'!
   canNotChargeAnExpiredCreditCardErrorMessage
	
	^'Can not charge an expired credit card'! !

TestCase subclass: #CashierTest
	instanceVariableNames: 'testObjectsFactory debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CashierTest category: #TusLibros stamp: 'cmmmmm 11/7/2019 19:20:24'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'testObjectsFactory debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:51'!
                              test03CanNotCheckoutWithAnExpiredCreditCart

	| cart salesBook |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := OrderedCollection new.
	
	self
		should: [ Cashier 
				toCheckout: cart 
				charging: testObjectsFactory expiredCreditCard 
				throught: self
				on: testObjectsFactory today
				registeringOn: salesBook ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | 
			self assert: anError messageText = Cashier canNotChargeAnExpiredCreditCardErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 19:04'!
                 test04CheckoutRegistersASale

	| cart cashier salesBook total |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := OrderedCollection new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	total := cashier checkOut.
					
	self assert: salesBook size = 1.
	self assert: salesBook first total = total.! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:59'!
                    test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit

	| cart cashier salesBook creditCard |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	creditCard := testObjectsFactory notExpiredCreditCard.
	salesBook := OrderedCollection new.
 	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	cashier:= Cashier 
		toCheckout: cart 
		charging: creditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	self 
		should: [cashier checkOut ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier creditCardHasNoCreditErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 19:00'!
       test05CashierChargesCreditCardUsingMerchantProcessor

	| cart cashier salesBook total creditCard debitedAmout debitedCreditCard  |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	creditCard := testObjectsFactory notExpiredCreditCard.
	salesBook := OrderedCollection new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: creditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	debitBehavior := [ :anAmount :aCreditCard | 
		debitedAmout := anAmount.
		debitedCreditCard := aCreditCard ].
	total := cashier checkOut.
					
	self assert: debitedCreditCard = creditCard.
	self assert: debitedAmout = total.! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:50'!
   test01CanNotCheckoutAnEmptyCart

	| salesBook |
	
	salesBook := OrderedCollection new.
	self 
		should: [ Cashier 
			toCheckout: testObjectsFactory createCart 
			charging: testObjectsFactory notExpiredCreditCard 
			throught: self
			on: testObjectsFactory today
			registeringOn:  salesBook ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmptyErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:51'!
                   test02CalculatedTotalIsCorrect

	| cart cashier |
	
	cart := testObjectsFactory createCart.
	cart add: 2 of: testObjectsFactory itemSellByTheStore.
	
	cashier :=  Cashier
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard 
		throught: self
		on: testObjectsFactory today 
		registeringOn: OrderedCollection new.
		
	self assert: cashier checkOut = (testObjectsFactory itemSellByTheStorePrice * 2)! !
!CashierTest methodsFor: 'setup' stamp: 'HernanWilkinson 6/17/2013 19:03'!
                setUp 

	testObjectsFactory := StoreTestObjectsFactory new.
	debitBehavior := [ :anAmount :aCreditCard | ]! !
!CashierTest methodsFor: 'merchant processor protocol' stamp: 'HernanWilkinson 6/17/2013 19:02'!
                 debit: anAmount from: aCreditCard 

	^debitBehavior value: anAmount value: aCreditCard ! !

Object subclass: #CreditCard
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/7/2019 19:20:24'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCard methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 18:39'!
                isExpiredOn: aDate 
	
	^expiration start < (Month month: aDate monthIndex year: aDate yearNumber) start ! !
!CreditCard methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 18:38'!
 initializeExpiringOn: aMonth 
	
	expiration := aMonth ! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

CreditCard class
	instanceVariableNames: ''!

!classDefinition: 'CreditCard class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 19:20:24'!
CreditCard class
	instanceVariableNames: ''!
!CreditCard class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 18:38'!
                     expiringOn: aMonth 
	
	^self new initializeExpiringOn: aMonth! !

Object subclass: #Sale
	instanceVariableNames: 'total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Sale category: #TusLibros stamp: 'cmmmmm 11/7/2019 19:20:24'!
Object subclass: #Sale
	instanceVariableNames: 'total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Sale methodsFor: 'total' stamp: 'HernanWilkinson 6/17/2013 18:48'!
              total
	
	^ total! !
!Sale methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 18:47'!
                               initializeTotal: aTotal

	total := aTotal ! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Sale class
	instanceVariableNames: ''!

!classDefinition: 'Sale class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 19:20:24'!
Sale class
	instanceVariableNames: ''!
!Sale class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 18:47'!
                         of: aTotal

	"should assert total is not negative or 0!!"
	^self new initializeTotal: aTotal ! !

Object subclass: #StoreTestObjectsFactory
	instanceVariableNames: 'today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #StoreTestObjectsFactory category: #TusLibros stamp: 'cmmmmm 11/7/2019 19:20:24'!
Object subclass: #StoreTestObjectsFactory
	instanceVariableNames: 'today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!StoreTestObjectsFactory methodsFor: 'items' stamp: 'HernanWilkinson 6/17/2013 18:08'!
  itemNotSellByTheStore
	
	^'invalidBook'! !
!StoreTestObjectsFactory methodsFor: 'items' stamp: 'HernanWilkinson 6/17/2013 18:08'!
                              itemSellByTheStore
	
	^ 'validBook'! !
!StoreTestObjectsFactory methodsFor: 'items' stamp: 'HernanWilkinson 6/17/2013 18:08'!
  itemSellByTheStorePrice
	
	^10! !
!StoreTestObjectsFactory methodsFor: 'cart' stamp: 'HernanWilkinson 6/17/2013 18:08'!
        createCart
	
	^Cart acceptingItemsOf: self defaultCatalog! !
!StoreTestObjectsFactory methodsFor: 'cart' stamp: 'HernanWilkinson 6/17/2013 18:08'!
             defaultCatalog
	
	^ Dictionary new
		at: self itemSellByTheStore put: self itemSellByTheStorePrice;
		yourself ! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'HernanWilkinson 6/17/2013 18:36'!
                notExpiredCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber + 1)! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'HernanWilkinson 6/17/2013 18:37'!
                     expiredCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber - 1)! !
!StoreTestObjectsFactory methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 18:37'!
                     initialize

	today := DateAndTime now! !
!StoreTestObjectsFactory methodsFor: 'date' stamp: 'HernanWilkinson 6/17/2013 18:37'!
 today
	
	^ today! !

----End fileIn of /Users/cmurga/Documents/Facultad/2019-2c/25-TusLibros/Iteracion2/TusLibros-33.st----!

TestCase subclass: #apiRestTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

TestCase subclass: #APIRestTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #APIRestTest category: #TusLibros stamp: 'cmmmmm 11/7/2019 19:21:31'!
TestCase subclass: #APIRestTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #APIRest category: #TusLibros stamp: 'cmmmmm 11/7/2019 19:41:49'!
Object subclass: #APIRest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!APIRestTest methodsFor: 'no messages' stamp: 'cmmmmm 11/7/2019 19:41:30'!
          test01ListOfNewCartIsEmpty

	| aCart aClientID aPassword |
	
	aCart := APIRest createCart: aClientID withPassword: aPassword.
	
	self assert: aCart isEmpty.! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 19:47:37' prior: 50336077!
                             test01ListOfNewCartIsEmpty

	| anAPIRest aValidClientID aValidPassword |
	
	aValidClientID := StoreTestObjectsFactory validClientID.
	aValidPassword := StoreTestObjectsFactory validPassword.
	
	anAPIRest := APIRest new.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: anAPIRest listCart isEmpty.! !

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 19:47:48'!
ERROR!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 19:49:19' prior: 50336086!
               test01ListOfNewCartIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	
	anAPIRest := APIRest new.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: anAPIRest listCart isEmpty.! !

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 19:49:21'!
ERROR!
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 19:49:37'!
  validClientID
	self shouldBeImplemented.! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 19:50:03' prior: 50336121!
                   validClientID
	^'validClientID'! !

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 19:50:05'!
ERROR!
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 19:50:36'!
             validPassword
	self shouldBeImplemented.! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 19:51:50' prior: 50336133!
                   validPassword
	^'aValidPassword'! !

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 19:51:52'!
ERROR!
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 19:52:11'!
                  createCart: aString withPassword: aString2 
	self shouldBeImplemented.! !
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 19:53:05' prior: 50336145!
                           createCart: aClientID withPassword: aClientPassword 
	! !

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 19:53:08'!
ERROR!
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 19:53:22'!
                            listCart
	self shouldBeImplemented.! !
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 19:53:37' prior: 50336159!
                              listCart
	^OrderedCollection new.! !

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 19:55:08'!
PASSED!

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 19:55:08'!
PASSED!

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 19:55:17'!
PASSED!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:00:03'!
        test03LoginWithInvalidClientID

	| anAPIRest anInvalidClientID aValidPassword testObjectsFactory |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	anInvalidClientID := testObjectsFactory invalidClientID.
	aValidPassword := testObjectsFactory validPassword.
	
	anAPIRest := APIRest new.
	
	self 
		should: [ anAPIRest createCart: anInvalidClientID withPassword: aValidPassword. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidClientError.
			]

	
	! !

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:00:10'!
ERROR!
!StoreTestObjectsFactory methodsFor: 'cart' stamp: 'cmmmmm 11/7/2019 20:00:33'!
                    invalidClientID
	self shouldBeImplemented.! !
!StoreTestObjectsFactory methodsFor: 'cart' stamp: 'cmmmmm 11/7/2019 20:00:59' prior: 50336200!
                  invalidClientID
	^'invalidClientID'! !

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:01:01'!
FAILURE!

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:01:24'!
FAILURE!

----STARTUP---- (7 November 2019 20:03:22) as /Users/cmurga/Downloads/macos64/CuisUniversity-3938.image!


!classRemoval: #MerchantProcessorSimulator stamp: 'cmmmmm 11/7/2019 20:03:27'!
Object subclass: #MerchantProcessorSimulator
	instanceVariableNames: 'creditCard currentDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CreditCard stamp: 'cmmmmm 11/7/2019 20:03:27'!
Object subclass: #CreditCard
	instanceVariableNames: 'id expirationDate person'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cashier stamp: 'cmmmmm 11/7/2019 20:03:27'!
Object subclass: #Cashier
	instanceVariableNames: 'salesBook gregorianMonthOfYear currentDate merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cart stamp: 'cmmmmm 11/7/2019 20:03:28'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CreditCardTest stamp: 'cmmmmm 11/7/2019 20:03:28'!
TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CashierTest stamp: 'cmmmmm 11/7/2019 20:03:28'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'catalog cashier cart card merchantProcessorSimulator currentDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CartTest stamp: 'cmmmmm 11/7/2019 20:03:28'!
TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cart category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cart category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cart methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:45'!
      invalidQuantityErrorMessage
	
	^'Invalid number of items'! !
!Cart methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                      invalidItemErrorMessage
	
	^'Item is not in catalog'! !
!Cart methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 18:06'!
                               assertIsValidItem: anItem

	(catalog includesKey: anItem) ifFalse: [ self error: self invalidItemErrorMessage ]! !
!Cart methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 17:51'!
    assertIsValidQuantity: aQuantity

	aQuantity strictlyPositive ifFalse: [ self error: self invalidQuantityErrorMessage ]! !
!Cart methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 17:48'!
                        initializeAcceptingItemsOf: aCatalog

	catalog := aCatalog.
	items := OrderedCollection new.! !
!Cart methodsFor: 'queries' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                          occurrencesOf: anItem

	^items occurrencesOf: anItem  ! !
!Cart methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 17:44'!
includes: anItem

	^items includes: anItem ! !
!Cart methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 17:44'!
           isEmpty
	
	^items isEmpty ! !
!Cart methodsFor: 'total' stamp: 'HernanWilkinson 6/17/2013 19:09'!
                              total

	^ items sum: [ :anItem | catalog at: anItem ]! !
!Cart methodsFor: 'adding' stamp: 'HernanWilkinson 6/17/2013 17:51'!
  add: aQuantity of: anItem

	self assertIsValidQuantity: aQuantity.
	self assertIsValidItem: anItem.

	1 to: aQuantity do: [ :aNumber | items add: anItem ]! !
!Cart methodsFor: 'adding' stamp: 'HernanWilkinson 6/17/2013 17:44'!
                             add: anItem

	^ self add: 1 of: anItem ! !

!classDefinition: 'Cart class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
Cart class
	instanceVariableNames: ''!

!classDefinition: 'Cart class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
Cart class
	instanceVariableNames: ''!
!Cart class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 17:48'!
                               acceptingItemsOf: aCatalog

	^self new initializeAcceptingItemsOf: aCatalog ! !

!classDefinition: #CartTest category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
TestCase subclass: #CartTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CartTest category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
TestCase subclass: #CartTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
                            test04CanNotAddNonPositiveNumberOfItems

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self 
		should: [cart add: 0 of: testObjectsFactory itemSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidQuantityErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
                               test02CanNotAddItemsThatDoNotBelongToStore

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self 
		should: [ cart add: testObjectsFactory itemNotSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidItemErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:11'!
  test08CartRemembersTheNumberOfAddedItems

	| cart |
	
	cart := testObjectsFactory createCart.
	
	cart add: 2 of: testObjectsFactory itemSellByTheStore.
	self assert: (cart occurrencesOf: testObjectsFactory itemSellByTheStore) = 2! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
               test01NewCartsAreCreatedEmpty

	self assert: testObjectsFactory createCart isEmpty! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
  test03AfterAddingAnItemTheCartIsNotEmptyAnymore

	| cart |
	
	cart := testObjectsFactory createCart.
	
	cart add: testObjectsFactory itemSellByTheStore.
	self deny: cart isEmpty ! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:11'!
  test07CartDoesNotHoldNotAddedItems

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self deny: (cart includes: testObjectsFactory itemSellByTheStore)! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
                        test05CanNotAddMoreThanOneItemNotSellByTheStore

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self 
		should: [cart add: 2 of: testObjectsFactory itemNotSellByTheStore  ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidItemErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:11'!
                       test06CartRemembersAddedItems

	| cart |
	
	cart := testObjectsFactory createCart.
	
	cart add: testObjectsFactory itemSellByTheStore.
	self assert: (cart includes: testObjectsFactory itemSellByTheStore)! !
!CartTest methodsFor: 'setup' stamp: 'HernanWilkinson 6/17/2013 18:09'!
         setUp 

	testObjectsFactory := StoreTestObjectsFactory new.! !

!classDefinition: #Cashier category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
Object subclass: #Cashier
	instanceVariableNames: 'cart salesBook merchantProcessor creditCard total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cashier category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
Object subclass: #Cashier
	instanceVariableNames: 'cart salesBook merchantProcessor creditCard total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:06'!
           registerSale

	salesBook add: self createSale! !
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:07'!
                           createSale

	^ Sale of: total
! !
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:08'!
          calculateTotal

	total := cart total.
	! !
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:06'!
 debitTotal

	merchantProcessor debit: total from: creditCard.
	! !
!Cashier methodsFor: 'checkout' stamp: 'HernanWilkinson 6/17/2013 19:06'!
                   checkOut

	self calculateTotal.
	self debitTotal.
	self registerSale.

	^ total! !
!Cashier methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 18:53'!
                             initializeToCheckout: aCart charging: aCreditCard throught: aMerchantProcessor registeringOn: aSalesBook
	
	cart := aCart.
	creditCard := aCreditCard.
	merchantProcessor := aMerchantProcessor.
	salesBook := aSalesBook! !

!classDefinition: 'Cashier class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
Cashier class
	instanceVariableNames: ''!

!classDefinition: 'Cashier class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
Cashier class
	instanceVariableNames: ''!
!Cashier class methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 18:22'!
     assertIsNotEmpty: aCart 
	
	aCart isEmpty ifTrue: [self error: self cartCanNotBeEmptyErrorMessage ]! !
!Cashier class methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 18:23'!
       assertIsNotExpired: aCreditCard on: aDate
	
	(aCreditCard isExpiredOn: aDate) ifTrue: [ self error: self canNotChargeAnExpiredCreditCardErrorMessage ]! !
!Cashier class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 18:51'!
             toCheckout: aCart charging: aCreditCard throught: aMerchantProcessor on: aDate registeringOn: aSalesBook
	
	self assertIsNotEmpty: aCart.
	self assertIsNotExpired: aCreditCard on: aDate.
	
	^self new initializeToCheckout: aCart charging: aCreditCard throught: aMerchantProcessor registeringOn: aSalesBook! !
!Cashier class methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 19:02'!
                      creditCardHasNoCreditErrorMessage
	
	^'Credit card has no credit'! !
!Cashier class methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:56'!
     cartCanNotBeEmptyErrorMessage
	
	^'Can not check out an empty cart'! !
!Cashier class methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 18:21'!
   canNotChargeAnExpiredCreditCardErrorMessage
	
	^'Can not charge an expired credit card'! !

!classDefinition: #CashierTest category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'testObjectsFactory debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CashierTest category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'testObjectsFactory debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:51'!
      test03CanNotCheckoutWithAnExpiredCreditCart

	| cart salesBook |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := OrderedCollection new.
	
	self
		should: [ Cashier 
				toCheckout: cart 
				charging: testObjectsFactory expiredCreditCard 
				throught: self
				on: testObjectsFactory today
				registeringOn: salesBook ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | 
			self assert: anError messageText = Cashier canNotChargeAnExpiredCreditCardErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 19:04'!
                 test04CheckoutRegistersASale

	| cart cashier salesBook total |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := OrderedCollection new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	total := cashier checkOut.
					
	self assert: salesBook size = 1.
	self assert: salesBook first total = total.! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:59'!
                    test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit

	| cart cashier salesBook creditCard |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	creditCard := testObjectsFactory notExpiredCreditCard.
	salesBook := OrderedCollection new.
 	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	cashier:= Cashier 
		toCheckout: cart 
		charging: creditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	self 
		should: [cashier checkOut ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier creditCardHasNoCreditErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 19:00'!
       test05CashierChargesCreditCardUsingMerchantProcessor

	| cart cashier salesBook total creditCard debitedAmout debitedCreditCard  |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	creditCard := testObjectsFactory notExpiredCreditCard.
	salesBook := OrderedCollection new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: creditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	debitBehavior := [ :anAmount :aCreditCard | 
		debitedAmout := anAmount.
		debitedCreditCard := aCreditCard ].
	total := cashier checkOut.
					
	self assert: debitedCreditCard = creditCard.
	self assert: debitedAmout = total.! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:50'!
   test01CanNotCheckoutAnEmptyCart

	| salesBook |
	
	salesBook := OrderedCollection new.
	self 
		should: [ Cashier 
			toCheckout: testObjectsFactory createCart 
			charging: testObjectsFactory notExpiredCreditCard 
			throught: self
			on: testObjectsFactory today
			registeringOn:  salesBook ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmptyErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:51'!
                   test02CalculatedTotalIsCorrect

	| cart cashier |
	
	cart := testObjectsFactory createCart.
	cart add: 2 of: testObjectsFactory itemSellByTheStore.
	
	cashier :=  Cashier
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard 
		throught: self
		on: testObjectsFactory today 
		registeringOn: OrderedCollection new.
		
	self assert: cashier checkOut = (testObjectsFactory itemSellByTheStorePrice * 2)! !
!CashierTest methodsFor: 'setup' stamp: 'HernanWilkinson 6/17/2013 19:03'!
                setUp 

	testObjectsFactory := StoreTestObjectsFactory new.
	debitBehavior := [ :anAmount :aCreditCard | ]! !
!CashierTest methodsFor: 'merchant processor protocol' stamp: 'HernanWilkinson 6/17/2013 19:02'!
                 debit: anAmount from: aCreditCard 

	^debitBehavior value: anAmount value: aCreditCard ! !

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCard methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 18:39'!
                         isExpiredOn: aDate 
	
	^expiration start < (Month month: aDate monthIndex year: aDate yearNumber) start ! !
!CreditCard methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 18:38'!
 initializeExpiringOn: aMonth 
	
	expiration := aMonth ! !

!classDefinition: 'CreditCard class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
CreditCard class
	instanceVariableNames: ''!

!classDefinition: 'CreditCard class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
CreditCard class
	instanceVariableNames: ''!
!CreditCard class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 18:38'!
                  expiringOn: aMonth 
	
	^self new initializeExpiringOn: aMonth! !

!classDefinition: #Sale category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
Object subclass: #Sale
	instanceVariableNames: 'total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Sale category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
Object subclass: #Sale
	instanceVariableNames: 'total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Sale methodsFor: 'total' stamp: 'HernanWilkinson 6/17/2013 18:48'!
                             total
	
	^ total! !
!Sale methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 18:47'!
                               initializeTotal: aTotal

	total := aTotal ! !

!classDefinition: 'Sale class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
Sale class
	instanceVariableNames: ''!

!classDefinition: 'Sale class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
Sale class
	instanceVariableNames: ''!
!Sale class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 18:47'!
                            of: aTotal

	"should assert total is not negative or 0!!"
	^self new initializeTotal: aTotal ! !

!classDefinition: #StoreTestObjectsFactory category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
Object subclass: #StoreTestObjectsFactory
	instanceVariableNames: 'today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #StoreTestObjectsFactory category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:28'!
Object subclass: #StoreTestObjectsFactory
	instanceVariableNames: 'today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!StoreTestObjectsFactory methodsFor: 'items' stamp: 'HernanWilkinson 6/17/2013 18:08'!
                              itemNotSellByTheStore
	
	^'invalidBook'! !
!StoreTestObjectsFactory methodsFor: 'items' stamp: 'HernanWilkinson 6/17/2013 18:08'!
                              itemSellByTheStore
	
	^ 'validBook'! !
!StoreTestObjectsFactory methodsFor: 'items' stamp: 'HernanWilkinson 6/17/2013 18:08'!
  itemSellByTheStorePrice
	
	^10! !
!StoreTestObjectsFactory methodsFor: 'cart' stamp: 'HernanWilkinson 6/17/2013 18:08'!
        createCart
	
	^Cart acceptingItemsOf: self defaultCatalog! !
!StoreTestObjectsFactory methodsFor: 'cart' stamp: 'HernanWilkinson 6/17/2013 18:08'!
             defaultCatalog
	
	^ Dictionary new
		at: self itemSellByTheStore put: self itemSellByTheStorePrice;
		yourself ! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'HernanWilkinson 6/17/2013 18:36'!
                notExpiredCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber + 1)! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'HernanWilkinson 6/17/2013 18:37'!
                     expiredCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber - 1)! !
!StoreTestObjectsFactory methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 18:37'!
                     initialize

	today := DateAndTime now! !
!StoreTestObjectsFactory methodsFor: 'date' stamp: 'HernanWilkinson 6/17/2013 18:37'!
 today
	
	^ today! !

!classDefinition: #APIRestTest category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:29'!
TestCase subclass: #APIRestTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #APIRestTest category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:29'!
TestCase subclass: #APIRestTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #APIRest category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:03:29'!
Object subclass: #APIRest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!APIRestTest methodsFor: 'no messages' stamp: 'cmmmmm 11/7/2019 19:41:30'!
                             test01ListOfNewCartIsEmpty

	| aCart aClientID aPassword |
	
	aCart := APIRest createCart: aClientID withPassword: aPassword.
	
	self assert: aCart isEmpty.! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 19:47:37' prior: 50336862!
                             test01ListOfNewCartIsEmpty

	| anAPIRest aValidClientID aValidPassword |
	
	aValidClientID := StoreTestObjectsFactory validClientID.
	aValidPassword := StoreTestObjectsFactory validPassword.
	
	anAPIRest := APIRest new.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: anAPIRest listCart isEmpty.! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 19:49:19' prior: 50336871!
              test01ListOfNewCartIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	
	anAPIRest := APIRest new.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: anAPIRest listCart isEmpty.! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 19:49:37'!
 validClientID
	self shouldBeImplemented.! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 19:50:03' prior: 50336900!
                   validClientID
	^'validClientID'! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 19:50:36'!
            validPassword
	self shouldBeImplemented.! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 19:51:50' prior: 50336909!
                   validPassword
	^'aValidPassword'! !
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 19:52:11'!
                 createCart: aString withPassword: aString2 
	self shouldBeImplemented.! !
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 19:53:05' prior: 50336918!
                           createCart: aClientID withPassword: aClientPassword 
	! !
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 19:53:22'!
                           listCart
	self shouldBeImplemented.! !
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 19:53:37' prior: 50336929!
                              listCart
	^OrderedCollection new.! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:00:03'!
        test03LoginWithInvalidClientID

	| anAPIRest anInvalidClientID aValidPassword testObjectsFactory |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	anInvalidClientID := testObjectsFactory invalidClientID.
	aValidPassword := testObjectsFactory validPassword.
	
	anAPIRest := APIRest new.
	
	self 
		should: [ anAPIRest createCart: anInvalidClientID withPassword: aValidPassword. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidClientError.
			]

	
	! !
!StoreTestObjectsFactory methodsFor: 'cart' stamp: 'cmmmmm 11/7/2019 20:00:33'!
                       invalidClientID
	self shouldBeImplemented.! !
!StoreTestObjectsFactory methodsFor: 'cart' stamp: 'cmmmmm 11/7/2019 20:00:59' prior: 50336958!
                  invalidClientID
	^'invalidClientID'! !

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:05:21'!
FAILURE!

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:06:01'!
FAILURE!

----STARTUP---- (7 November 2019 20:06:33) as /Users/cmurga/Downloads/macos64/CuisUniversity-3938.image!


!classRemoval: #MerchantProcessorSimulator stamp: 'cmmmmm 11/7/2019 20:06:55'!
Object subclass: #MerchantProcessorSimulator
	instanceVariableNames: 'creditCard currentDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CreditCard stamp: 'cmmmmm 11/7/2019 20:06:55'!
Object subclass: #CreditCard
	instanceVariableNames: 'id expirationDate person'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cashier stamp: 'cmmmmm 11/7/2019 20:06:55'!
Object subclass: #Cashier
	instanceVariableNames: 'salesBook gregorianMonthOfYear currentDate merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cart stamp: 'cmmmmm 11/7/2019 20:06:56'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CreditCardTest stamp: 'cmmmmm 11/7/2019 20:06:56'!
TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CashierTest stamp: 'cmmmmm 11/7/2019 20:06:56'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'catalog cashier cart card merchantProcessorSimulator currentDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CartTest stamp: 'cmmmmm 11/7/2019 20:06:56'!
TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

TestCase subclass: #APIRestTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #APIRestTest category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:07:07'!
TestCase subclass: #APIRestTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 19:49:19'!
                  test01ListOfNewCartIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	
	anAPIRest := APIRest new.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: anAPIRest listCart isEmpty.! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:00:03'!
                               test03LoginWithInvalidClientID

	| anAPIRest anInvalidClientID aValidPassword testObjectsFactory |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	anInvalidClientID := testObjectsFactory invalidClientID.
	aValidPassword := testObjectsFactory validPassword.
	
	anAPIRest := APIRest new.
	
	self 
		should: [ anAPIRest createCart: anInvalidClientID withPassword: aValidPassword. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidClientError.
			]

	
	! !

TestCase subclass: #CartTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CartTest category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:07:07'!
TestCase subclass: #CartTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
        test01NewCartsAreCreatedEmpty

	self assert: testObjectsFactory createCart isEmpty! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
  test02CanNotAddItemsThatDoNotBelongToStore

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self 
		should: [ cart add: testObjectsFactory itemNotSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidItemErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
  test03AfterAddingAnItemTheCartIsNotEmptyAnymore

	| cart |
	
	cart := testObjectsFactory createCart.
	
	cart add: testObjectsFactory itemSellByTheStore.
	self deny: cart isEmpty ! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
  test04CanNotAddNonPositiveNumberOfItems

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self 
		should: [cart add: 0 of: testObjectsFactory itemSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidQuantityErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
                               test05CanNotAddMoreThanOneItemNotSellByTheStore

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self 
		should: [cart add: 2 of: testObjectsFactory itemNotSellByTheStore  ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidItemErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:11'!
                       test06CartRemembersAddedItems

	| cart |
	
	cart := testObjectsFactory createCart.
	
	cart add: testObjectsFactory itemSellByTheStore.
	self assert: (cart includes: testObjectsFactory itemSellByTheStore)! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:11'!
         test07CartDoesNotHoldNotAddedItems

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self deny: (cart includes: testObjectsFactory itemSellByTheStore)! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:11'!
                        test08CartRemembersTheNumberOfAddedItems

	| cart |
	
	cart := testObjectsFactory createCart.
	
	cart add: 2 of: testObjectsFactory itemSellByTheStore.
	self assert: (cart occurrencesOf: testObjectsFactory itemSellByTheStore) = 2! !
!CartTest methodsFor: 'setup' stamp: 'HernanWilkinson 6/17/2013 18:09'!
               setUp 

	testObjectsFactory := StoreTestObjectsFactory new.! !

TestCase subclass: #CashierTest
	instanceVariableNames: 'testObjectsFactory debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CashierTest category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:07:07'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'testObjectsFactory debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:50'!
                          test01CanNotCheckoutAnEmptyCart

	| salesBook |
	
	salesBook := OrderedCollection new.
	self 
		should: [ Cashier 
			toCheckout: testObjectsFactory createCart 
			charging: testObjectsFactory notExpiredCreditCard 
			throught: self
			on: testObjectsFactory today
			registeringOn:  salesBook ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmptyErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:51'!
                   test02CalculatedTotalIsCorrect

	| cart cashier |
	
	cart := testObjectsFactory createCart.
	cart add: 2 of: testObjectsFactory itemSellByTheStore.
	
	cashier :=  Cashier
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard 
		throught: self
		on: testObjectsFactory today 
		registeringOn: OrderedCollection new.
		
	self assert: cashier checkOut = (testObjectsFactory itemSellByTheStorePrice * 2)! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:51'!
                test03CanNotCheckoutWithAnExpiredCreditCart

	| cart salesBook |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := OrderedCollection new.
	
	self
		should: [ Cashier 
				toCheckout: cart 
				charging: testObjectsFactory expiredCreditCard 
				throught: self
				on: testObjectsFactory today
				registeringOn: salesBook ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | 
			self assert: anError messageText = Cashier canNotChargeAnExpiredCreditCardErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 19:04'!
                 test04CheckoutRegistersASale

	| cart cashier salesBook total |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := OrderedCollection new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	total := cashier checkOut.
					
	self assert: salesBook size = 1.
	self assert: salesBook first total = total.! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 19:00'!
                    test05CashierChargesCreditCardUsingMerchantProcessor

	| cart cashier salesBook total creditCard debitedAmout debitedCreditCard  |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	creditCard := testObjectsFactory notExpiredCreditCard.
	salesBook := OrderedCollection new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: creditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	debitBehavior := [ :anAmount :aCreditCard | 
		debitedAmout := anAmount.
		debitedCreditCard := aCreditCard ].
	total := cashier checkOut.
					
	self assert: debitedCreditCard = creditCard.
	self assert: debitedAmout = total.! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:59'!
   test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit

	| cart cashier salesBook creditCard |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	creditCard := testObjectsFactory notExpiredCreditCard.
	salesBook := OrderedCollection new.
 	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	cashier:= Cashier 
		toCheckout: cart 
		charging: creditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	self 
		should: [cashier checkOut ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier creditCardHasNoCreditErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'setup' stamp: 'HernanWilkinson 6/17/2013 19:03'!
       setUp 

	testObjectsFactory := StoreTestObjectsFactory new.
	debitBehavior := [ :anAmount :aCreditCard | ]! !
!CashierTest methodsFor: 'merchant processor protocol' stamp: 'HernanWilkinson 6/17/2013 19:02'!
                 debit: anAmount from: aCreditCard 

	^debitBehavior value: anAmount value: aCreditCard ! !

Object subclass: #APIRest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #APIRest category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:07:07'!
Object subclass: #APIRest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 19:53:05'!
              createCart: aClientID withPassword: aClientPassword 
	! !
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 19:53:37'!
                           listCart
	^OrderedCollection new.! !

Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cart category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:07:07'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cart methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                 invalidItemErrorMessage
	
	^'Item is not in catalog'! !
!Cart methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                           invalidQuantityErrorMessage
	
	^'Invalid number of items'! !
!Cart methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 18:06'!
                          assertIsValidItem: anItem

	(catalog includesKey: anItem) ifFalse: [ self error: self invalidItemErrorMessage ]! !
!Cart methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 17:51'!
    assertIsValidQuantity: aQuantity

	aQuantity strictlyPositive ifFalse: [ self error: self invalidQuantityErrorMessage ]! !
!Cart methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 17:48'!
                        initializeAcceptingItemsOf: aCatalog

	catalog := aCatalog.
	items := OrderedCollection new.! !
!Cart methodsFor: 'queries' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                          occurrencesOf: anItem

	^items occurrencesOf: anItem  ! !
!Cart methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 17:44'!
includes: anItem

	^items includes: anItem ! !
!Cart methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 17:44'!
           isEmpty
	
	^items isEmpty ! !
!Cart methodsFor: 'total' stamp: 'HernanWilkinson 6/17/2013 19:09'!
                              total

	^ items sum: [ :anItem | catalog at: anItem ]! !
!Cart methodsFor: 'adding' stamp: 'HernanWilkinson 6/17/2013 17:44'!
  add: anItem

	^ self add: 1 of: anItem ! !
!Cart methodsFor: 'adding' stamp: 'HernanWilkinson 6/17/2013 17:51'!
                add: aQuantity of: anItem

	self assertIsValidQuantity: aQuantity.
	self assertIsValidItem: anItem.

	1 to: aQuantity do: [ :aNumber | items add: anItem ]! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Cart class
	instanceVariableNames: ''!

!classDefinition: 'Cart class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:07:07'!
Cart class
	instanceVariableNames: ''!
!Cart class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 17:48'!
         acceptingItemsOf: aCatalog

	^self new initializeAcceptingItemsOf: aCatalog ! !

Object subclass: #Cashier
	instanceVariableNames: 'cart salesBook merchantProcessor creditCard total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cashier category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:07:07'!
Object subclass: #Cashier
	instanceVariableNames: 'cart salesBook merchantProcessor creditCard total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:08'!
              calculateTotal

	total := cart total.
	! !
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:07'!
 createSale

	^ Sale of: total
! !
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:06'!
          debitTotal

	merchantProcessor debit: total from: creditCard.
	! !
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:06'!
         registerSale

	salesBook add: self createSale! !
!Cashier methodsFor: 'checkout' stamp: 'HernanWilkinson 6/17/2013 19:06'!
     checkOut

	self calculateTotal.
	self debitTotal.
	self registerSale.

	^ total! !
!Cashier methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 18:53'!
                             initializeToCheckout: aCart charging: aCreditCard throught: aMerchantProcessor registeringOn: aSalesBook
	
	cart := aCart.
	creditCard := aCreditCard.
	merchantProcessor := aMerchantProcessor.
	salesBook := aSalesBook! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Cashier class
	instanceVariableNames: ''!

!classDefinition: 'Cashier class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:07:07'!
Cashier class
	instanceVariableNames: ''!
!Cashier class methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 18:22'!
     assertIsNotEmpty: aCart 
	
	aCart isEmpty ifTrue: [self error: self cartCanNotBeEmptyErrorMessage ]! !
!Cashier class methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 18:23'!
       assertIsNotExpired: aCreditCard on: aDate
	
	(aCreditCard isExpiredOn: aDate) ifTrue: [ self error: self canNotChargeAnExpiredCreditCardErrorMessage ]! !
!Cashier class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 18:51'!
             toCheckout: aCart charging: aCreditCard throught: aMerchantProcessor on: aDate registeringOn: aSalesBook
	
	self assertIsNotEmpty: aCart.
	self assertIsNotExpired: aCreditCard on: aDate.
	
	^self new initializeToCheckout: aCart charging: aCreditCard throught: aMerchantProcessor registeringOn: aSalesBook! !
!Cashier class methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 18:21'!
                      canNotChargeAnExpiredCreditCardErrorMessage
	
	^'Can not charge an expired credit card'! !
!Cashier class methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:56'!
               cartCanNotBeEmptyErrorMessage
	
	^'Can not check out an empty cart'! !
!Cashier class methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 19:02'!
   creditCardHasNoCreditErrorMessage
	
	^'Credit card has no credit'! !

Object subclass: #CreditCard
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:07:07'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCard methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 18:39'!
      isExpiredOn: aDate 
	
	^expiration start < (Month month: aDate monthIndex year: aDate yearNumber) start ! !
!CreditCard methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 18:38'!
 initializeExpiringOn: aMonth 
	
	expiration := aMonth ! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

CreditCard class
	instanceVariableNames: ''!

!classDefinition: 'CreditCard class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:07:07'!
CreditCard class
	instanceVariableNames: ''!
!CreditCard class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 18:38'!
                     expiringOn: aMonth 
	
	^self new initializeExpiringOn: aMonth! !

Object subclass: #Sale
	instanceVariableNames: 'total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Sale category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:07:07'!
Object subclass: #Sale
	instanceVariableNames: 'total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Sale methodsFor: 'total' stamp: 'HernanWilkinson 6/17/2013 18:48'!
              total
	
	^ total! !
!Sale methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 18:47'!
                               initializeTotal: aTotal

	total := aTotal ! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Sale class
	instanceVariableNames: ''!

!classDefinition: 'Sale class' category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:07:07'!
Sale class
	instanceVariableNames: ''!
!Sale class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 18:47'!
                         of: aTotal

	"should assert total is not negative or 0!!"
	^self new initializeTotal: aTotal ! !

Object subclass: #StoreTestObjectsFactory
	instanceVariableNames: 'today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #StoreTestObjectsFactory category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:07:07'!
Object subclass: #StoreTestObjectsFactory
	instanceVariableNames: 'today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!StoreTestObjectsFactory methodsFor: 'items' stamp: 'HernanWilkinson 6/17/2013 18:08'!
  itemNotSellByTheStore
	
	^'invalidBook'! !
!StoreTestObjectsFactory methodsFor: 'items' stamp: 'HernanWilkinson 6/17/2013 18:08'!
                              itemSellByTheStore
	
	^ 'validBook'! !
!StoreTestObjectsFactory methodsFor: 'items' stamp: 'HernanWilkinson 6/17/2013 18:08'!
  itemSellByTheStorePrice
	
	^10! !
!StoreTestObjectsFactory methodsFor: 'cart' stamp: 'HernanWilkinson 6/17/2013 18:08'!
        createCart
	
	^Cart acceptingItemsOf: self defaultCatalog! !
!StoreTestObjectsFactory methodsFor: 'cart' stamp: 'HernanWilkinson 6/17/2013 18:08'!
             defaultCatalog
	
	^ Dictionary new
		at: self itemSellByTheStore put: self itemSellByTheStorePrice;
		yourself ! !
!StoreTestObjectsFactory methodsFor: 'cart' stamp: 'cmmmmm 11/7/2019 20:00:59'!
                             invalidClientID
	^'invalidClientID'! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'HernanWilkinson 6/17/2013 18:37'!
                            expiredCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber - 1)! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'HernanWilkinson 6/17/2013 18:36'!
                        notExpiredCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber + 1)! !
!StoreTestObjectsFactory methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 18:37'!
                  initialize

	today := DateAndTime now! !
!StoreTestObjectsFactory methodsFor: 'date' stamp: 'HernanWilkinson 6/17/2013 18:37'!
 today
	
	^ today! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 19:50:03'!
                           validClientID
	^'validClientID'! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 19:51:50'!
            validPassword
	^'aValidPassword'! !

----End fileIn of /Users/cmurga/Downloads/macos64/TusLibros.st----!

----SNAPSHOT----(7 November 2019 20:07:14) CuisUniversity-3938.image priorSource: 121567!

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:07:34'!
FAILURE!
!APIRest class methodsFor: 'nil' stamp: 'cmmmmm 11/7/2019 20:08:28'!
                  invalidClientIDError
	^'Invalid clienti ID'.! !

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:08:36'!
FAILURE!
!APIRest class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:08:52'!
                      invalidClientError
	^'Invalid clienti ID'.! !

!methodRemoval: APIRest class #invalidClientIDError stamp: 'cmmmmm 11/7/2019 20:08:55'!
invalidClientIDError
	^'Invalid clienti ID'.!

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:09:02'!
FAILURE!
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 20:10:26' prior: 50337328!
           createCart: aClientID withPassword: aClientPassword 
	^self error: APIRest invalidClientError.! !

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:10:29'!
PASSED!

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:10:29'!
ERROR!

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:10:29'!
PASSED!

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:10:29'!
ERROR!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'cmmmmm 11/7/2019 20:12:14'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'cmmmmm 11/7/2019 20:12:14'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'cmmmmm 11/7/2019 20:12:14'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'cmmmmm 11/7/2019 20:12:14'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'cmmmmm 11/7/2019 20:12:14'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'cmmmmm 11/7/2019 20:12:14'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'cmmmmm 11/7/2019 20:12:14'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'cmmmmm 11/7/2019 20:12:14'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'cmmmmm 11/7/2019 20:12:14'!
PASSED!

!classDefinition: #APIRest category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:15:49'!
Object subclass: #APIRest
	instanceVariableNames: 'listOfClients'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 20:15:47' prior: 50337681!
        createCart: aClientID withPassword: aClientPassword 
	
	listOfClients includes: aClientID ifFalse: [self error: APIRest invalidClientError.]! !

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:15:57'!
ERROR!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:17:18' prior: 50337036!
              test01ListOfNewCartIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	anUserDatabase := OrderedCollection new.
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	
	anAPIRest := APIRest with: anUserDatabase.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: anAPIRest listCart isEmpty.! !

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:17:28'!
ERROR!
!APIRest class methodsFor: 'instance creation' stamp: 'cmmmmm 11/7/2019 20:17:35'!
                      with: anOrderedCollection 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeWith: anOrderedCollection ! !
!APIRest class methodsFor: 'instance creation' stamp: 'cmmmmm 11/7/2019 20:18:05' prior: 50337768!
               with: aUserDatabase
	
	^self new initializeWith: aUserDatabase ! !

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:18:07'!
ERROR!

!classDefinition: #APIRest category: #TusLibros stamp: 'cmmmmm 11/7/2019 20:18:25'!
Object subclass: #APIRest
	instanceVariableNames: 'listOfClients userDatabase'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!APIRest methodsFor: 'initialization' stamp: 'cmmmmm 11/7/2019 20:18:25'!
          initializeWith: aUserDatabase 
	self shouldBeImplemented.
	userDatabase := aUserDatabase.! !
!APIRest methodsFor: 'initialization' stamp: 'cmmmmm 11/7/2019 20:18:37' prior: 50337792!
         initializeWith: aUserDatabase 
	
	userDatabase := aUserDatabase.! !

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:18:39'!
ERROR!
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 20:18:51' prior: 50337736!
  createCart: aClientID withPassword: aClientPassword 
	
	userDatabase includes: aClientID ifFalse: [self error: APIRest invalidClientError.]! !
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 20:19:01' prior: 50337806!
                      createCart: aClientID withPassword: aClientPassword 
	
	(userDatabase includes: aClientID) ifFalse: [self error: APIRest invalidClientError.]! !

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:19:04'!
ERROR!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:20:41' prior: 50337747!
             test01ListOfNewCartIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := OrderedCollection with: aValidClientID.
	
	anAPIRest := APIRest with: anUserDatabase.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: anAPIRest listCart isEmpty.! !

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:20:43'!
PASSED!

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:21:05'!
PASSED!

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:21:05'!
ERROR!

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:21:05'!
ERROR!

----SNAPSHOT----(7 November 2019 20:21:17) CuisUniversity-3938.image priorSource: 192136!

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:21:18'!
PASSED!

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:21:18'!
PASSED!

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:21:18'!
ERROR!

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:21:18'!
ERROR!

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:21:32'!
ERROR!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:22:34' prior: 50337052!
          test03LoginWithInvalidClientID

	| anAPIRest anInvalidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	anInvalidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := OrderedCollection with: anInvalidClientID.
	
	anAPIRest := APIRest with: anUserDatabase.
	
	self 
		should: [ anAPIRest createCart: anInvalidClientID withPassword: aValidPassword. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidClientError.
			]

	
	! !

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:22:39'!
FAILURE!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:23:05' prior: 50337874!
   test03LoginWithInvalidClientID

	| anAPIRest anInvalidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	anInvalidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := OrderedCollection new.
	
	anAPIRest := APIRest with: anUserDatabase.
	
	self 
		should: [ anAPIRest createCart: anInvalidClientID withPassword: aValidPassword. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidClientError.
			]

	
	! !

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:23:08'!
PASSED!

!testRun: #APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:23:11'!
PASSED!

!testRun: #APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:23:11'!
PASSED!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:23:31'!
    test02ListOfNewCartIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := OrderedCollection with: aValidClientID.
	
	anAPIRest := APIRest with: anUserDatabase.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: anAPIRest listCart isEmpty.! !

!methodRemoval: APIRestTest #test01ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:23:31'!
test01ListOfNewCartIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := OrderedCollection with: aValidClientID.
	
	anAPIRest := APIRest with: anUserDatabase.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: anAPIRest listCart isEmpty.!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:26:00'!
test01

	| anAPIRest |
	
	anAPIRest := APIRest new.
	
	
	self 
		should: [ APIRest listCart.]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest hasNoCartError]! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:29:10'!
        test01LoginWithInvalidClientID

	| anAPIRest anInvalidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	anInvalidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := OrderedCollection new.
	
	anAPIRest := APIRest with: anUserDatabase.
	
	self 
		should: [ anAPIRest createCart: anInvalidClientID withPassword: aValidPassword. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidClientError.
			]

	
	! !

!methodRemoval: APIRestTest #test03LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:29:10'!
test03LoginWithInvalidClientID

	| anAPIRest anInvalidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	anInvalidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := OrderedCollection new.
	
	anAPIRest := APIRest with: anUserDatabase.
	
	self 
		should: [ anAPIRest createCart: anInvalidClientID withPassword: aValidPassword. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidClientError.
			]

	
	!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:29:21'!
            test04ListOfNewCartIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := OrderedCollection with: aValidClientID.
	
	anAPIRest := APIRest with: anUserDatabase.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: anAPIRest listCart isEmpty.! !

!methodRemoval: APIRestTest #test02ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:29:21'!
test02ListOfNewCartIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := OrderedCollection with: aValidClientID.
	
	anAPIRest := APIRest with: anUserDatabase.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: anAPIRest listCart isEmpty.!

!methodRemoval: APIRestTest #test01 stamp: 'cmmmmm 11/7/2019 20:29:28'!
test01

	| anAPIRest |
	
	anAPIRest := APIRest new.
	
	
	self 
		should: [ APIRest listCart.]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest hasNoCartError]!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:32:33'!
                    test02LoginWithValidIDInvalidPassword

	| anAPIRest aValidClientID anInvalidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	anInvalidPassword := testObjectsFactory inValidPassword.
	anUserDatabase := OrderedCollection with: aValidClientID.
	
	anAPIRest := APIRest with: anUserDatabase.
	
	self 
		should: [ anAPIRest createCart: aValidClientID withPassword: anInvalidPassword. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidClientError.
			]

	
	! !

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 20:32:48'!
ERROR!
!StoreTestObjectsFactory methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:33:06'!
                            inValidPassword
	self shouldBeImplemented.! !
!StoreTestObjectsFactory methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:33:34' prior: 50338094!
   inValidPassword
	^'invalidPassword'! !

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 20:33:36'!
FAILURE!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:33:55' prior: 50338067!
          test02LoginWithValidIDInvalidPassword

	| anAPIRest aValidClientID anInvalidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	anInvalidPassword := testObjectsFactory inValidPassword.
	anUserDatabase := OrderedCollection with: aValidClientID.
	
	anAPIRest := APIRest with: anUserDatabase.
	
	self 
		should: [ anAPIRest createCart: aValidClientID withPassword: anInvalidPassword. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidPasswordError.
			]

	
	! !

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 20:33:58'!
FAILURE!
!APIRest class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:34:41'!
  invalidPasswordError
	^'invalid password'! !

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:34:48'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 20:34:48'!
FAILURE!

!testRun: #APIRestTest #test04ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:34:48'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 20:34:48'!
FAILURE!
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 20:36:50' prior: 50337814!
                            createCart: aClientID withPassword: aClientPassword 
	
	(userDatabase includes: aClientID) ifFalse: [self error: APIRest invalidClientError.].
	(userDatabase at: aClientID = aClientPassword) ifFalse: [self error: APIRest invalidPasswordError].! !

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 20:36:55'!
ERROR!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:37:33' prior: 50337977!
                            test01LoginWithInvalidClientID

	| anAPIRest anInvalidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	anInvalidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := Dictionary new.
	
	anAPIRest := APIRest with: anUserDatabase.
	
	self 
		should: [ anAPIRest createCart: anInvalidClientID withPassword: aValidPassword. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidClientError.
			]

	
	! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 20:40:50'!
                     userDatabase
	
	^Dictionary new add: (self validClientID)->(self validPassword).! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:41:30' prior: 50338166!
         test01LoginWithInvalidClientID

	| anAPIRest anInvalidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	anInvalidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	
	self 
		should: [ anAPIRest createCart: anInvalidClientID withPassword: aValidPassword. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidClientError.
			]

	
	! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:41:42' prior: 50338107!
                  test02LoginWithValidIDInvalidPassword

	| anAPIRest aValidClientID anInvalidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	anInvalidPassword := testObjectsFactory inValidPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	
	self 
		should: [ anAPIRest createCart: aValidClientID withPassword: anInvalidPassword. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidPasswordError.
			]

	
	! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:41:50' prior: 50338021!
       test04ListOfNewCartIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: anAPIRest listCart isEmpty.! !

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:41:56'!
ERROR!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:42:05'!
ERROR!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 20:42:05'!
ERROR!

!testRun: #APIRestTest #test04ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:42:05'!
ERROR!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:42:10'!
ERROR!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:42:37'!
ERROR!
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 20:42:45' prior: 50338151!
              createCart: aClientID withPassword: aClientPassword 
	
	(userDatabase includesKey: aClientID) ifFalse: [self error: APIRest invalidClientError.].
	(userDatabase at: aClientID = aClientPassword) ifFalse: [self error: APIRest invalidPasswordError].! !

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:42:46'!
ERROR!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:42:53'!
ERROR!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 20:42:53'!
ERROR!

!testRun: #APIRestTest #test04ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:42:53'!
ERROR!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:42:55'!
ERROR!
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 20:43:47' prior: 50338277!
                         createCart: aClientID withPassword: aClientPassword 

	(userDatabase includesKey: aClientID) ifFalse: [self error: APIRest invalidClientError.].
	(userDatabase at: aClientID = aClientPassword) ifFalse: [self error: APIRest invalidPasswordError].! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 20:46:07' prior: 50338188!
      userDatabase
	
	^(Dictionary new) add: (self validClientID)->(self validPassword).! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 20:46:18' prior: 50338315!
         userDatabase
	
	^(Dictionary new) add: ((self validClientID)->(self validPassword)).! !

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:46:23'!
ERROR!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 20:46:23'!
ERROR!

!testRun: #APIRestTest #test04ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:46:23'!
ERROR!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:46:24'!
ERROR!

userDatabase includesKey: ''!
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 20:49:30' prior: 50338321!
                         userDatabase
	
	| aDatabase |
	
	aDatabase := Dictionary new.
	aDatabase add: ((self validClientID)->(self validPassword)).
	^aDatabase .! !

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:49:46'!
FAILURE!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 20:49:46'!
FAILURE!

!testRun: #APIRestTest #test04ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:49:46'!
ERROR!

!testRun: #APIRestTest #test04ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:49:56'!
ERROR!

!testRun: #APIRestTest #test04ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:50:06'!
ERROR!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:50:14'!
FAILURE!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 20:50:19'!
FAILURE!
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 20:50:32' prior: 50338341!
                   userDatabase
	
	| aDatabase |
	
	aDatabase := Dictionary new.
	^aDatabase add: ((self validClientID)->(self validPassword)).! !

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:50:41'!
ERROR!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 20:50:41'!
ERROR!

!testRun: #APIRestTest #test04ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:50:41'!
ERROR!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:50:47'!
ERROR!
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 20:51:05' prior: 50338371!
                userDatabase
	
	| aDatabase |
	
	aDatabase := Dictionary new.
	aDatabase add: ((self validClientID)->(self validPassword)).
	^aDatabase.! !

	| aDatabase |
	
	aDatabase := Dictionary new.
	aDatabase add: ((self validClientID)->(self validPassword)).!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:51:37'!
FAILURE!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 20:51:37'!
FAILURE!

!testRun: #APIRestTest #test04ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:51:37'!
ERROR!

!testRun: #APIRestTest #test04ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:51:39'!
ERROR!
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 20:52:36' prior: 50338304!
                           createCart: aClientID withPassword: aClientPassword 

	(userDatabase includesKey: aClientID) ifFalse: [self error: APIRest invalidClientError.].
	(userDatabase at: aClientID) = aClientPassword ifFalse: [self error: APIRest invalidPasswordError].! !

!testRun: #APIRestTest #test04ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:52:48'!
PASSED!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:52:51'!
FAILURE!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:52:55'!
PASSED!

!testRun: #APIRestTest #test04ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:52:56'!
PASSED!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:52:56'!
FAILURE!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 20:52:56'!
PASSED!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:52:56'!
FAILURE!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:53:48' prior: 50338194!
      test01LoginWithInvalidClientID

	| anAPIRest anInvalidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	anInvalidClientID := testObjectsFactory invalidClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	
	self 
		should: [ anAPIRest createCart: anInvalidClientID withPassword: aValidPassword. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidClientError.
			]

	
	! !

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:53:49'!
PASSED!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:53:55'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 20:53:55'!
PASSED!

!testRun: #APIRestTest #test04ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:53:55'!
PASSED!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:56:10'!
             test03ListOfNewCartIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: anAPIRest listCart isEmpty.! !

!methodRemoval: APIRestTest #test04ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:56:10'!
test04ListOfNewCartIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: anAPIRest listCart isEmpty.!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:57:03'!
              test03ListOfNewCartOnValidLoginIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: anAPIRest listCart isEmpty.! !

!methodRemoval: APIRestTest #test03ListOfNewCartIsEmpty stamp: 'cmmmmm 11/7/2019 20:57:03'!
test03ListOfNewCartIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: anAPIRest listCart isEmpty.!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 20:57:11'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 20:57:11'!
PASSED!

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/7/2019 20:57:11'!
PASSED!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 21:03:09' prior: 50338519!
                       test03ListOfNewCartOnValidLoginIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartID |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartID := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: (anAPIRest listCart: aCartID) isEmpty.! !

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/7/2019 21:03:13'!
ERROR!
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 21:03:22'!
                              listCart: anAPIRest 
	self shouldBeImplemented.! !
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 21:08:26' prior: 50338415!
                  createCart: aClientID withPassword: aClientPassword 

	| aNewCartID |

	(userDatabase includesKey: aClientID) ifFalse: [self error: APIRest invalidClientError.].
	(userDatabase at: aClientID) = aClientPassword ifFalse: [self error: APIRest invalidPasswordError].
	aNewCartID := 123.
	^aNewCartID .! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 21:09:21'!
test04ListOfNewCartOnValidLoginIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	"
	anAPIRest addToCart: anAPIRest cart."
	
	self assert: anAPIRest "cart" listCart isEmpty.! !

!classDefinition: #APIRest category: #TusLibros stamp: 'cmmmmm 11/7/2019 21:10:10'!
Object subclass: #APIRest
	instanceVariableNames: 'listOfClients userDatabase cartDatabase'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!APIRest methodsFor: 'initialization' stamp: 'cmmmmm 11/7/2019 21:10:07' prior: 50337798!
                initializeWith: aUserDatabase 
	
	userDatabase := aUserDatabase.
	cartDatabase := Dictionary new! !
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 21:14:16' prior: 50338594!
 createCart: aClientID withPassword: aClientPassword 

	| aNewCart newCartID |

	(userDatabase includesKey: aClientID) ifFalse: [self error: APIRest invalidClientError.].
	(userDatabase at: aClientID) = aClientPassword ifFalse: [self error: APIRest invalidPasswordError].
	
	aNewCart := StoreTestObjectsFactory new createCart.
	newCartID := cartDatabase size.
	cartDatabase add: newCartID->aNewCart.
	
	^newCartID.! !

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 21:14:57'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 21:14:57'!
PASSED!

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/7/2019 21:14:57'!
ERROR!

!testRun: #APIRestTest #test04ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/7/2019 21:14:57'!
PASSED!

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/7/2019 21:14:57'!
ERROR!
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 21:16:21' prior: 50338589!
                   listCart: aCartID 
	^OrderedCollection new.! !

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/7/2019 21:16:23'!
PASSED!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/7/2019 21:16:25'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/7/2019 21:16:25'!
PASSED!

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/7/2019 21:16:25'!
PASSED!

!testRun: #APIRestTest #test04ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/7/2019 21:16:25'!
PASSED!

----SNAPSHOT----(7 November 2019 21:17:52) CuisUniversity-3938.image priorSource: 198542!

----QUIT----(8 November 2019 10:31:34) CuisUniversity-3938.image priorSource: 225377!

----STARTUP---- (11 November 2019 16:37:48) as /Users/cmurga/Downloads/macos64/CuisUniversity-3938.image!


----QUIT----(11 November 2019 16:37:56) CuisUniversity-3938.image priorSource: 225468!

----STARTUP---- (11 November 2019 16:39:04) as /Users/cmurga/Downloads/macos64/CuisUniversity-3938.image!

!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 17:40:47'!
        test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartId |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartId := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	"
	anAPIRest addToCart: anAPIRest cart."
	
	self assert: anAPIRest "cart" listCart isEmpty.! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 17:44:05' prior: 50338709!
                        test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartId anIsbn |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	anIsbn := 123123123123.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartId := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	anAPIRest addToCart: aCartId book: anIsbn quantity: 1.
	
	self assert: anAPIRest "cart" listCart isEmpty.! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 17:46:30' prior: 50338731!
        test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartId anIsbn |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	anIsbn := testObjectsFactory itemSellByTheStore.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartId := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	anAPIRest addToCart: aCartId book: anIsbn quantity: 1.
	
	self assert: (anAPIRest listCart includes: testObjectsFactory itemSellByTheStore).! !

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 17:46:41'!
ERROR!
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/11/2019 17:47:01'!
      addToCart: aSmallInteger book: aString quantity: aSmallInteger3 
	self shouldBeImplemented.! !
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/11/2019 17:50:19' prior: 50338782!
     addToCart: aCartId book: anIsbnNumber quantity: aQuantity
	(cartDatabase at: aCartId) add: aQuantity of: anIsbnNumber! !

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 17:50:40'!
FAILURE!

!methodRemoval: APIRestTest #test04ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 17:51:58'!
test04ListOfNewCartOnValidLoginIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	"
	anAPIRest addToCart: anAPIRest cart."
	
	self assert: anAPIRest "cart" listCart isEmpty.!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 17:52:19' prior: 50338754!
                            test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartId anIsbn |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	anIsbn := testObjectsFactory itemSellByTheStore.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartId := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	anAPIRest addToCart: aCartId book: anIsbn quantity: 1.
	
	self assert: (anAPIRest listCart: aCartId) includes: testObjectsFactory itemSellByTheStore.! !

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 17:52:21'!
FAILURE!
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/11/2019 17:53:12' prior: 50338673!
           listCart: aCartID 
	^(cartDatabase at: aCartID) listCart.! !

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 17:53:13'!
ERROR!
!Cart methodsFor: 'accessing' stamp: 'cmmmmm 11/11/2019 17:59:30'!
  listCart
	self shouldBeImplemented.! !
!Cart methodsFor: 'accessing' stamp: 'cmmmmm 11/11/2019 18:00:22' prior: 50338857!
      listCart
	^items.! !

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 18:00:26'!
PASSED!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/11/2019 18:00:26'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/11/2019 18:00:26'!
PASSED!

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 18:00:26'!
PASSED!

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 18:00:26'!
PASSED!
!Cart methodsFor: 'accessing' stamp: 'cmmmmm 11/11/2019 18:01:18' prior: 50338861!
                            listCart
	^items copy.! !

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 18:01:20'!
PASSED!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/11/2019 18:01:20'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/11/2019 18:01:20'!
PASSED!

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 18:01:20'!
PASSED!

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 18:01:20'!
PASSED!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:06:01'!
                      test05AddABookTwiceToACartAndListItShouldShowTheBook

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartId anIsbn |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	anIsbn := testObjectsFactory itemSellByTheStore.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartId := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	anAPIRest addToCart: aCartId book: anIsbn quantity: 2.
	
	self assert: ((anAPIRest listCart: aCartId) occurrencesOf: (testObjectsFactory itemSellByTheStore) = 2).! !

!testRun: #APIRestTest #test05AddABookTwiceToACartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 18:06:03'!
ERROR!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:07:43' prior: 50338905!
test05AddABookTwiceToACartAndListItShouldShowTheBook

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartId anIsbn |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	anIsbn := testObjectsFactory itemSellByTheStore.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartId := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	anAPIRest addToCart: aCartId book: anIsbn quantity: 2.
	
	self assert: ((anAPIRest listCart: aCartId) occurrencesOf: testObjectsFactory itemSellByTheStore) = 2.! !

!testRun: #APIRestTest #test05AddABookTwiceToACartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 18:07:44'!
PASSED!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/11/2019 18:07:44'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/11/2019 18:07:44'!
PASSED!

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 18:07:44'!
PASSED!

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 18:07:44'!
PASSED!

!testRun: #APIRestTest #test05AddABookTwiceToACartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 18:07:45'!
PASSED!

!methodRemoval: APIRestTest #test05AddABookTwiceToACartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 18:09:35'!
test05AddABookTwiceToACartAndListItShouldShowTheBook

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartId anIsbn |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	anIsbn := testObjectsFactory itemSellByTheStore.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartId := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	anAPIRest addToCart: aCartId book: anIsbn quantity: 2.
	
	self assert: ((anAPIRest listCart: aCartId) occurrencesOf: testObjectsFactory itemSellByTheStore) = 2.!

----SNAPSHOT----(11 November 2019 18:09:51) CuisUniversity-3938.image priorSource: 225663!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:25:44' prior: 50338566!
                       test03ListOfNewCartOnValidLoginIsEmpty

"Recurso: /checkOutCart Parmetros:
cartId: Id del carrito creado con /createCart
ccn: Nmero de tarjeta de credito
cced: Fecha de expiracin con 2 digitos para el mes y 4 para el ao cco: Nombre del dueo de la tarjeta."

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartID aValidCreditCard aValidCreditCardExpiringDate aValidCreditCardNumber aValidOwner |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	aValidCreditCard := testObjectsFactory notExpiredCreditCard.
	aValidCreditCardNumber := 1234123412341234.
	aValidCreditCardExpiringDate := GregorianMonthOfYear new.
	aValidOwner := 'a valid owner'.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartID := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self 
		should: [ anAPIRest checkOutCart: aCartID creditCardNumber: aValidCreditCardNumber creditCardDateOfExpiration: aValidCreditCardExpiringDate owner: aValidOwner. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidPasswordError.
			].
	self assert: (anAPIRest listCart: aCartID) isEmpty.! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:29:33' prior: 50339010!
                              test03ListOfNewCartOnValidLoginIsEmpty

"Recurso: /checkOutCart Parmetros:
cartId: Id del carrito creado con /createCart
ccn: Nmero de tarjeta de credito
cced: Fecha de expiracin con 2 digitos para el mes y 4 para el ao cco: Nombre del dueo de la tarjeta."

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartID aValidCreditCard aValidCreditCardExpiringDate aValidCreditCardNumber aValidOwner |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	aValidCreditCard := testObjectsFactory notExpiredCreditCard.
	aValidCreditCardNumber := 1234123412341234.
	aValidCreditCardExpiringDate := GregorianMonthOfYear new.
	aValidOwner := 'a valid owner'.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartID := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self 
		should: [ anAPIRest checkOutCart: aCartID creditCardNumber: aValidCreditCardNumber creditCardDateOfExpiration: aValidCreditCardExpiringDate owner: aValidOwner. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest errorCheckOutEmptyCart.
			].
	self assert: (anAPIRest listPurchases: aValidClientID password: aValidPassword) isEmpty.! !

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 18:29:49'!
ERROR!
!APIRest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:30:02'!
                               checkOutCart: aSmallInteger creditCardNumber: aSmallInteger2 creditCardDateOfExpiration: aGregorianMonthOfYear owner: aString 
	self shouldBeImplemented.! !
!APIRest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:36:41' prior: 50339106!
   checkOutCart: aCartID creditCardNumber: aCreditCardNumber creditCardDateOfExpiration: aCreditCardExpiringDate owner: aValidOwner
	
	| testObjectsFactory cashier salesBook |
	testObjectsFactory := StoreTestObjectsFactory new.
	salesBook := OrderedCollection new.
	
	cashier := Cashier 
		toCheckout: (cartDatabase at: aCartID)
		charging: testObjectsFactory notExpiredCreditCard
		throught: CashierTest new
		on: testObjectsFactory today
		registeringOn: salesBook.
	! !

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 18:37:50'!
ERROR!
!APIRest class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:38:06'!
        errorCheckOutEmptyCart
	self shouldBeImplemented.! !
!APIRest class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:38:23' prior: 50339135!
     errorCheckOutEmptyCart
	^'Cannot Checkout empty cart'! !

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 18:38:24'!
FAILURE!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:39:49'!
     test05zxxxxxxxx

"Recurso: /checkOutCart Parmetros:
cartId: Id del carrito creado con /createCart
ccn: Nmero de tarjeta de credito
cced: Fecha de expiracin con 2 digitos para el mes y 4 para el ao cco: Nombre del dueo de la tarjeta."

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartID aValidCreditCard aValidCreditCardExpiringDate aValidCreditCardNumber aValidOwner |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	aValidCreditCard := testObjectsFactory notExpiredCreditCard.
	aValidCreditCardNumber := 1234123412341234.
	aValidCreditCardExpiringDate := GregorianMonthOfYear new.
	aValidOwner := 'a valid owner'.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartID := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self 
		should: [ anAPIRest checkOutCart: aCartID creditCardNumber: aValidCreditCardNumber creditCardDateOfExpiration: aValidCreditCardExpiringDate owner: aValidOwner. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest errorCheckOutEmptyCart.
			].
	self assert: (anAPIRest listPurchases: aValidClientID password: aValidPassword) isEmpty.! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 21:03:09' prior: 50339056!
               test03ListOfNewCartOnValidLoginIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartID |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartID := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: (anAPIRest listCart: aCartID) isEmpty.! !

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 18:40:10'!
PASSED!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/11/2019 18:40:10'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/11/2019 18:40:10'!
PASSED!

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 18:40:10'!
PASSED!

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 18:40:10'!
PASSED!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 18:40:10'!
FAILURE!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 18:40:10'!
FAILURE!

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 18:40:21'!
PASSED!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/11/2019 18:40:21'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/11/2019 18:40:21'!
PASSED!

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 18:40:21'!
PASSED!

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 18:40:21'!
PASSED!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 18:40:21'!
FAILURE!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 18:40:21'!
FAILURE!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 18:40:34'!
FAILURE!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 18:40:43'!
FAILURE!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 18:41:13'!
FAILURE!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 18:41:45'!
FAILURE!

----STARTUP---- (11 November 2019 18:43:40) as /Users/cmurga/Downloads/macos64/CuisUniversity-3938.image!

!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:25:44' prior: 50338566!
                        test03ListOfNewCartOnValidLoginIsEmpty

"Recurso: /checkOutCart Parmetros:
cartId: Id del carrito creado con /createCart
ccn: Nmero de tarjeta de credito
cced: Fecha de expiracin con 2 digitos para el mes y 4 para el ao cco: Nombre del dueo de la tarjeta."

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartID aValidCreditCard aValidCreditCardExpiringDate aValidCreditCardNumber aValidOwner |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	aValidCreditCard := testObjectsFactory notExpiredCreditCard.
	aValidCreditCardNumber := 1234123412341234.
	aValidCreditCardExpiringDate := GregorianMonthOfYear new.
	aValidOwner := 'a valid owner'.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartID := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self 
		should: [ anAPIRest checkOutCart: aCartID creditCardNumber: aValidCreditCardNumber creditCardDateOfExpiration: aValidCreditCardExpiringDate owner: aValidOwner. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidPasswordError.
			].
	self assert: (anAPIRest listCart: aCartID) isEmpty.! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:29:33' prior: 50339274!
                              test03ListOfNewCartOnValidLoginIsEmpty

"Recurso: /checkOutCart Parmetros:
cartId: Id del carrito creado con /createCart
ccn: Nmero de tarjeta de credito
cced: Fecha de expiracin con 2 digitos para el mes y 4 para el ao cco: Nombre del dueo de la tarjeta."

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartID aValidCreditCard aValidCreditCardExpiringDate aValidCreditCardNumber aValidOwner |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	aValidCreditCard := testObjectsFactory notExpiredCreditCard.
	aValidCreditCardNumber := 1234123412341234.
	aValidCreditCardExpiringDate := GregorianMonthOfYear new.
	aValidOwner := 'a valid owner'.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartID := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self 
		should: [ anAPIRest checkOutCart: aCartID creditCardNumber: aValidCreditCardNumber creditCardDateOfExpiration: aValidCreditCardExpiringDate owner: aValidOwner. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest errorCheckOutEmptyCart.
			].
	self assert: (anAPIRest listPurchases: aValidClientID password: aValidPassword) isEmpty.! !
!APIRest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:30:02'!
           checkOutCart: aSmallInteger creditCardNumber: aSmallInteger2 creditCardDateOfExpiration: aGregorianMonthOfYear owner: aString 
	self shouldBeImplemented.! !
!APIRest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:36:41' prior: 50339366!
   checkOutCart: aCartID creditCardNumber: aCreditCardNumber creditCardDateOfExpiration: aCreditCardExpiringDate owner: aValidOwner
	
	| testObjectsFactory cashier salesBook |
	testObjectsFactory := StoreTestObjectsFactory new.
	salesBook := OrderedCollection new.
	
	cashier := Cashier 
		toCheckout: (cartDatabase at: aCartID)
		charging: testObjectsFactory notExpiredCreditCard
		throught: CashierTest new
		on: testObjectsFactory today
		registeringOn: salesBook.
	! !
!APIRest class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:38:06'!
                    errorCheckOutEmptyCart
	self shouldBeImplemented.! !
!APIRest class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:38:23' prior: 50339392!
     errorCheckOutEmptyCart
	^'Cannot Checkout empty cart'! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:39:49'!
                   test05zxxxxxxxx

"Recurso: /checkOutCart Parmetros:
cartId: Id del carrito creado con /createCart
ccn: Nmero de tarjeta de credito
cced: Fecha de expiracin con 2 digitos para el mes y 4 para el ao cco: Nombre del dueo de la tarjeta."

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartID aValidCreditCard aValidCreditCardExpiringDate aValidCreditCardNumber aValidOwner |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	aValidCreditCard := testObjectsFactory notExpiredCreditCard.
	aValidCreditCardNumber := 1234123412341234.
	aValidCreditCardExpiringDate := GregorianMonthOfYear new.
	aValidOwner := 'a valid owner'.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartID := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self 
		should: [ anAPIRest checkOutCart: aCartID creditCardNumber: aValidCreditCardNumber creditCardDateOfExpiration: aValidCreditCardExpiringDate owner: aValidOwner. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest errorCheckOutEmptyCart.
			].
	self assert: (anAPIRest listPurchases: aValidClientID password: aValidPassword) isEmpty.! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 21:03:09' prior: 50339320!
               test03ListOfNewCartOnValidLoginIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartID |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartID := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: (anAPIRest listCart: aCartID) isEmpty.! !

----SNAPSHOT----(11 November 2019 18:44:00) CuisUniversity-3938.image priorSource: 235368!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 18:44:09'!
FAILURE!

----STARTUP---- (11 November 2019 18:45:05) as /Users/cmurga/Downloads/macos64/CuisUniversity-3938.image!


!classRemoval: #StoreTestObjectsFactory stamp: 'cmmmmm 11/11/2019 18:45:15'!
Object subclass: #StoreTestObjectsFactory
	instanceVariableNames: 'today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Sale stamp: 'cmmmmm 11/11/2019 18:45:15'!
Object subclass: #Sale
	instanceVariableNames: 'total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CreditCard stamp: 'cmmmmm 11/11/2019 18:45:15'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cashier stamp: 'cmmmmm 11/11/2019 18:45:16'!
Object subclass: #Cashier
	instanceVariableNames: 'cart salesBook merchantProcessor creditCard total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cart stamp: 'cmmmmm 11/11/2019 18:45:16'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #APIRest stamp: 'cmmmmm 11/11/2019 18:45:16'!
Object subclass: #APIRest
	instanceVariableNames: 'listOfClients userDatabase cartDatabase'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CashierTest stamp: 'cmmmmm 11/11/2019 18:45:16'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'testObjectsFactory debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CartTest stamp: 'cmmmmm 11/11/2019 18:45:16'!
TestCase subclass: #CartTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #APIRestTest stamp: 'cmmmmm 11/11/2019 18:45:17'!
TestCase subclass: #APIRestTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

TestCase subclass: #APIRestTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #APIRestTest category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:26'!
TestCase subclass: #APIRestTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:53:48'!
       test01LoginWithInvalidClientID

	| anAPIRest anInvalidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	anInvalidClientID := testObjectsFactory invalidClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	
	self 
		should: [ anAPIRest createCart: anInvalidClientID withPassword: aValidPassword. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidClientError.
			]

	
	! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:41:42'!
test02LoginWithValidIDInvalidPassword

	| anAPIRest aValidClientID anInvalidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	anInvalidPassword := testObjectsFactory inValidPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	
	self 
		should: [ anAPIRest createCart: aValidClientID withPassword: anInvalidPassword. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest invalidPasswordError.
			]

	
	! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 21:03:09'!
                       test03ListOfNewCartOnValidLoginIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartID |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartID := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self assert: (anAPIRest listCart: aCartID) isEmpty.! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 21:09:21'!
 test04ListOfNewCartOnValidLoginIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	
	anAPIRest := APIRest with: anUserDatabase.
	anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	"
	anAPIRest addToCart: anAPIRest cart."
	
	self assert: anAPIRest "cart" listCart isEmpty.! !

TestCase subclass: #CartTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CartTest category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:27'!
TestCase subclass: #CartTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
 test01NewCartsAreCreatedEmpty

	self assert: testObjectsFactory createCart isEmpty! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
  test02CanNotAddItemsThatDoNotBelongToStore

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self 
		should: [ cart add: testObjectsFactory itemNotSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidItemErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
  test03AfterAddingAnItemTheCartIsNotEmptyAnymore

	| cart |
	
	cart := testObjectsFactory createCart.
	
	cart add: testObjectsFactory itemSellByTheStore.
	self deny: cart isEmpty ! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
  test04CanNotAddNonPositiveNumberOfItems

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self 
		should: [cart add: 0 of: testObjectsFactory itemSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidQuantityErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:10'!
                               test05CanNotAddMoreThanOneItemNotSellByTheStore

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self 
		should: [cart add: 2 of: testObjectsFactory itemNotSellByTheStore  ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidItemErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:11'!
                       test06CartRemembersAddedItems

	| cart |
	
	cart := testObjectsFactory createCart.
	
	cart add: testObjectsFactory itemSellByTheStore.
	self assert: (cart includes: testObjectsFactory itemSellByTheStore)! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:11'!
         test07CartDoesNotHoldNotAddedItems

	| cart |
	
	cart := testObjectsFactory createCart.
	
	self deny: (cart includes: testObjectsFactory itemSellByTheStore)! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:11'!
                        test08CartRemembersTheNumberOfAddedItems

	| cart |
	
	cart := testObjectsFactory createCart.
	
	cart add: 2 of: testObjectsFactory itemSellByTheStore.
	self assert: (cart occurrencesOf: testObjectsFactory itemSellByTheStore) = 2! !
!CartTest methodsFor: 'setup' stamp: 'HernanWilkinson 6/17/2013 18:09'!
               setUp 

	testObjectsFactory := StoreTestObjectsFactory new.! !

TestCase subclass: #CashierTest
	instanceVariableNames: 'testObjectsFactory debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CashierTest category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:27'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'testObjectsFactory debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:50'!
                         test01CanNotCheckoutAnEmptyCart

	| salesBook |
	
	salesBook := OrderedCollection new.
	self 
		should: [ Cashier 
			toCheckout: testObjectsFactory createCart 
			charging: testObjectsFactory notExpiredCreditCard 
			throught: self
			on: testObjectsFactory today
			registeringOn:  salesBook ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmptyErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:51'!
                   test02CalculatedTotalIsCorrect

	| cart cashier |
	
	cart := testObjectsFactory createCart.
	cart add: 2 of: testObjectsFactory itemSellByTheStore.
	
	cashier :=  Cashier
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard 
		throught: self
		on: testObjectsFactory today 
		registeringOn: OrderedCollection new.
		
	self assert: cashier checkOut = (testObjectsFactory itemSellByTheStorePrice * 2)! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:51'!
                test03CanNotCheckoutWithAnExpiredCreditCart

	| cart salesBook |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := OrderedCollection new.
	
	self
		should: [ Cashier 
				toCheckout: cart 
				charging: testObjectsFactory expiredCreditCard 
				throught: self
				on: testObjectsFactory today
				registeringOn: salesBook ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | 
			self assert: anError messageText = Cashier canNotChargeAnExpiredCreditCardErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 19:04'!
                 test04CheckoutRegistersASale

	| cart cashier salesBook total |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	salesBook := OrderedCollection new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: testObjectsFactory notExpiredCreditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	total := cashier checkOut.
					
	self assert: salesBook size = 1.
	self assert: salesBook first total = total.! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 19:00'!
                    test05CashierChargesCreditCardUsingMerchantProcessor

	| cart cashier salesBook total creditCard debitedAmout debitedCreditCard  |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	creditCard := testObjectsFactory notExpiredCreditCard.
	salesBook := OrderedCollection new.
 
	cashier:= Cashier 
		toCheckout: cart 
		charging: creditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	debitBehavior := [ :anAmount :aCreditCard | 
		debitedAmout := anAmount.
		debitedCreditCard := aCreditCard ].
	total := cashier checkOut.
					
	self assert: debitedCreditCard = creditCard.
	self assert: debitedAmout = total.! !
!CashierTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 18:59'!
   test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit

	| cart cashier salesBook creditCard |

	cart := testObjectsFactory createCart.
	cart add: testObjectsFactory itemSellByTheStore.
	creditCard := testObjectsFactory notExpiredCreditCard.
	salesBook := OrderedCollection new.
 	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	cashier:= Cashier 
		toCheckout: cart 
		charging: creditCard
		throught: self
		on: testObjectsFactory today
		registeringOn: salesBook.
		
	self 
		should: [cashier checkOut ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier creditCardHasNoCreditErrorMessage.
			self assert: salesBook isEmpty ]! !
!CashierTest methodsFor: 'setup' stamp: 'HernanWilkinson 6/17/2013 19:03'!
       setUp 

	testObjectsFactory := StoreTestObjectsFactory new.
	debitBehavior := [ :anAmount :aCreditCard | ]! !
!CashierTest methodsFor: 'merchant processor protocol' stamp: 'HernanWilkinson 6/17/2013 19:02'!
                 debit: anAmount from: aCreditCard 

	^debitBehavior value: anAmount value: aCreditCard ! !

Object subclass: #APIRest
	instanceVariableNames: 'listOfClients userDatabase cartDatabase'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #APIRest category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:27'!
Object subclass: #APIRest
	instanceVariableNames: 'listOfClients userDatabase cartDatabase'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 21:14:16'!
                               createCart: aClientID withPassword: aClientPassword 

	| aNewCart newCartID |

	(userDatabase includesKey: aClientID) ifFalse: [self error: APIRest invalidClientError.].
	(userDatabase at: aClientID) = aClientPassword ifFalse: [self error: APIRest invalidPasswordError].
	
	aNewCart := StoreTestObjectsFactory new createCart.
	newCartID := cartDatabase size.
	cartDatabase add: newCartID->aNewCart.
	
	^newCartID.! !
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 19:53:37'!
                    listCart
	^OrderedCollection new.! !
!APIRest methodsFor: 'cart management' stamp: 'cmmmmm 11/7/2019 21:16:21'!
                listCart: aCartID 
	^OrderedCollection new.! !
!APIRest methodsFor: 'initialization' stamp: 'cmmmmm 11/7/2019 21:10:07'!
       initializeWith: aUserDatabase 
	
	userDatabase := aUserDatabase.
	cartDatabase := Dictionary new! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

APIRest class
	instanceVariableNames: ''!

!classDefinition: 'APIRest class' category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:27'!
APIRest class
	instanceVariableNames: ''!
!APIRest class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:08:52'!
                          invalidClientError
	^'Invalid clienti ID'.! !
!APIRest class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 20:34:41'!
                             invalidPasswordError
	^'invalid password'! !
!APIRest class methodsFor: 'instance creation' stamp: 'cmmmmm 11/7/2019 20:18:05'!
with: aUserDatabase
	
	^self new initializeWith: aUserDatabase ! !

Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cart category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:27'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cart methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                  invalidItemErrorMessage
	
	^'Item is not in catalog'! !
!Cart methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                           invalidQuantityErrorMessage
	
	^'Invalid number of items'! !
!Cart methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 18:06'!
                          assertIsValidItem: anItem

	(catalog includesKey: anItem) ifFalse: [ self error: self invalidItemErrorMessage ]! !
!Cart methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 17:51'!
    assertIsValidQuantity: aQuantity

	aQuantity strictlyPositive ifFalse: [ self error: self invalidQuantityErrorMessage ]! !
!Cart methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 17:48'!
                        initializeAcceptingItemsOf: aCatalog

	catalog := aCatalog.
	items := OrderedCollection new.! !
!Cart methodsFor: 'queries' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                          occurrencesOf: anItem

	^items occurrencesOf: anItem  ! !
!Cart methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 17:44'!
includes: anItem

	^items includes: anItem ! !
!Cart methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 17:44'!
           isEmpty
	
	^items isEmpty ! !
!Cart methodsFor: 'total' stamp: 'HernanWilkinson 6/17/2013 19:09'!
                              total

	^ items sum: [ :anItem | catalog at: anItem ]! !
!Cart methodsFor: 'adding' stamp: 'HernanWilkinson 6/17/2013 17:44'!
  add: anItem

	^ self add: 1 of: anItem ! !
!Cart methodsFor: 'adding' stamp: 'HernanWilkinson 6/17/2013 17:51'!
                add: aQuantity of: anItem

	self assertIsValidQuantity: aQuantity.
	self assertIsValidItem: anItem.

	1 to: aQuantity do: [ :aNumber | items add: anItem ]! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Cart class
	instanceVariableNames: ''!

!classDefinition: 'Cart class' category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:27'!
Cart class
	instanceVariableNames: ''!
!Cart class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 17:48'!
        acceptingItemsOf: aCatalog

	^self new initializeAcceptingItemsOf: aCatalog ! !

Object subclass: #Cashier
	instanceVariableNames: 'cart salesBook merchantProcessor creditCard total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cashier category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:27'!
Object subclass: #Cashier
	instanceVariableNames: 'cart salesBook merchantProcessor creditCard total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:08'!
             calculateTotal

	total := cart total.
	! !
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:07'!
 createSale

	^ Sale of: total
! !
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:06'!
          debitTotal

	merchantProcessor debit: total from: creditCard.
	! !
!Cashier methodsFor: 'checkout - private' stamp: 'HernanWilkinson 6/17/2013 19:06'!
         registerSale

	salesBook add: self createSale! !
!Cashier methodsFor: 'checkout' stamp: 'HernanWilkinson 6/17/2013 19:06'!
     checkOut

	self calculateTotal.
	self debitTotal.
	self registerSale.

	^ total! !
!Cashier methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 18:53'!
                             initializeToCheckout: aCart charging: aCreditCard throught: aMerchantProcessor registeringOn: aSalesBook
	
	cart := aCart.
	creditCard := aCreditCard.
	merchantProcessor := aMerchantProcessor.
	salesBook := aSalesBook! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Cashier class
	instanceVariableNames: ''!

!classDefinition: 'Cashier class' category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:27'!
Cashier class
	instanceVariableNames: ''!
!Cashier class methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 18:22'!
    assertIsNotEmpty: aCart 
	
	aCart isEmpty ifTrue: [self error: self cartCanNotBeEmptyErrorMessage ]! !
!Cashier class methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 18:23'!
       assertIsNotExpired: aCreditCard on: aDate
	
	(aCreditCard isExpiredOn: aDate) ifTrue: [ self error: self canNotChargeAnExpiredCreditCardErrorMessage ]! !
!Cashier class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 18:51'!
             toCheckout: aCart charging: aCreditCard throught: aMerchantProcessor on: aDate registeringOn: aSalesBook
	
	self assertIsNotEmpty: aCart.
	self assertIsNotExpired: aCreditCard on: aDate.
	
	^self new initializeToCheckout: aCart charging: aCreditCard throught: aMerchantProcessor registeringOn: aSalesBook! !
!Cashier class methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 18:21'!
                      canNotChargeAnExpiredCreditCardErrorMessage
	
	^'Can not charge an expired credit card'! !
!Cashier class methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:56'!
               cartCanNotBeEmptyErrorMessage
	
	^'Can not check out an empty cart'! !
!Cashier class methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 19:02'!
   creditCardHasNoCreditErrorMessage
	
	^'Credit card has no credit'! !

Object subclass: #CreditCard
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:27'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCard methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 18:39'!
     isExpiredOn: aDate 
	
	^expiration start < (Month month: aDate monthIndex year: aDate yearNumber) start ! !
!CreditCard methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 18:38'!
 initializeExpiringOn: aMonth 
	
	expiration := aMonth ! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

CreditCard class
	instanceVariableNames: ''!

!classDefinition: 'CreditCard class' category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:27'!
CreditCard class
	instanceVariableNames: ''!
!CreditCard class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 18:38'!
                    expiringOn: aMonth 
	
	^self new initializeExpiringOn: aMonth! !

Object subclass: #Sale
	instanceVariableNames: 'total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Sale category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:27'!
Object subclass: #Sale
	instanceVariableNames: 'total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Sale methodsFor: 'total' stamp: 'HernanWilkinson 6/17/2013 18:48'!
             total
	
	^ total! !
!Sale methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 18:47'!
                               initializeTotal: aTotal

	total := aTotal ! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Sale class
	instanceVariableNames: ''!

!classDefinition: 'Sale class' category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:27'!
Sale class
	instanceVariableNames: ''!
!Sale class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 18:47'!
                        of: aTotal

	"should assert total is not negative or 0!!"
	^self new initializeTotal: aTotal ! !

Object subclass: #StoreTestObjectsFactory
	instanceVariableNames: 'today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #StoreTestObjectsFactory category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:27'!
Object subclass: #StoreTestObjectsFactory
	instanceVariableNames: 'today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!StoreTestObjectsFactory methodsFor: 'items' stamp: 'HernanWilkinson 6/17/2013 18:08'!
 itemNotSellByTheStore
	
	^'invalidBook'! !
!StoreTestObjectsFactory methodsFor: 'items' stamp: 'HernanWilkinson 6/17/2013 18:08'!
                              itemSellByTheStore
	
	^ 'validBook'! !
!StoreTestObjectsFactory methodsFor: 'items' stamp: 'HernanWilkinson 6/17/2013 18:08'!
  itemSellByTheStorePrice
	
	^10! !
!StoreTestObjectsFactory methodsFor: 'cart' stamp: 'HernanWilkinson 6/17/2013 18:08'!
        createCart
	
	^Cart acceptingItemsOf: self defaultCatalog! !
!StoreTestObjectsFactory methodsFor: 'cart' stamp: 'HernanWilkinson 6/17/2013 18:08'!
             defaultCatalog
	
	^ Dictionary new
		at: self itemSellByTheStore put: self itemSellByTheStorePrice;
		yourself ! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'HernanWilkinson 6/17/2013 18:37'!
                expiredCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber - 1)! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'HernanWilkinson 6/17/2013 18:36'!
                        notExpiredCreditCard
	
	^CreditCard expiringOn: (Month month: today monthIndex year: today yearNumber + 1)! !
!StoreTestObjectsFactory methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 18:37'!
                  initialize

	today := DateAndTime now! !
!StoreTestObjectsFactory methodsFor: 'date' stamp: 'HernanWilkinson 6/17/2013 18:37'!
 today
	
	^ today! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 20:33:34'!
                           inValidPassword
	^'invalidPassword'! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 20:00:59'!
        invalidClientID
	^'invalidClientID'! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 20:51:05'!
        userDatabase
	
	| aDatabase |
	
	aDatabase := Dictionary new.
	aDatabase add: ((self validClientID)->(self validPassword)).
	^aDatabase.! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 19:50:03'!
   validClientID
	^'validClientID'! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/7/2019 19:51:50'!
            validPassword
	^'aValidPassword'! !

----End fileIn of /Users/cmurga/Documents/Facultad/ejerciciosIS1/TusLibros/TusLibros.st----!

!classRemoval: #StoreTestObjectsFactory stamp: 'cmmmmm 11/11/2019 18:45:45'!
Object subclass: #StoreTestObjectsFactory
	instanceVariableNames: 'today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Sale stamp: 'cmmmmm 11/11/2019 18:45:45'!
Object subclass: #Sale
	instanceVariableNames: 'total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CreditCard stamp: 'cmmmmm 11/11/2019 18:45:46'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cashier stamp: 'cmmmmm 11/11/2019 18:45:46'!
Object subclass: #Cashier
	instanceVariableNames: 'cart salesBook merchantProcessor creditCard total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cart stamp: 'cmmmmm 11/11/2019 18:45:46'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #APIRest stamp: 'cmmmmm 11/11/2019 18:45:46'!
Object subclass: #APIRest
	instanceVariableNames: 'listOfClients userDatabase cartDatabase'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CashierTest stamp: 'cmmmmm 11/11/2019 18:45:46'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'testObjectsFactory debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CartTest stamp: 'cmmmmm 11/11/2019 18:45:46'!
TestCase subclass: #CartTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #APIRestTest stamp: 'cmmmmm 11/11/2019 18:45:47'!
TestCase subclass: #APIRestTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CartTest category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:51'!
TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:08'!
    test01NewCartsAreCreatedEmpty

	self assert: self createCart isEmpty! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                test02CanNotAddItemsThatDoNotBelongToStore

	| cart |
	
	cart := self createCart.
	
	self 
		should: [ cart add: self itemNotSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidItemErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:43'!
                              test03AfterAddingAnItemTheCartIsNotEmptyAnymore

	| cart |
	
	cart := self createCart.
	
	cart add: self itemSellByTheStore.
	self deny: cart isEmpty ! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:43'!
                              test04CanNotAddNonPositiveNumberOfItems

	| cart |
	
	cart := self createCart.
	
	self 
		should: [cart add: 0 of: self itemSellByTheStore ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidQuantityErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                           test05CanNotAddMoreThanOneItemNotSellByTheStore

	| cart |
	
	cart := self createCart.
	
	self 
		should: [cart add: 2 of: self itemNotSellByTheStore  ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = cart invalidItemErrorMessage.
			self assert: cart isEmpty ]! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:43'!
                   test06CartRemembersAddedItems

	| cart |
	
	cart := self createCart.
	
	cart add: self itemSellByTheStore.
	self assert: (cart includes: self itemSellByTheStore)! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:43'!
                   test07CartDoesNotHoldNotAddedItems

	| cart |
	
	cart := self createCart.
	
	self deny: (cart includes: self itemSellByTheStore)! !
!CartTest methodsFor: 'tests' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                    test08CartRemembersTheNumberOfAddedItems

	| cart |
	
	cart := self createCart.
	
	cart add: 2 of: self itemSellByTheStore.
	self assert: (cart occurrencesOf: self itemSellByTheStore) = 2! !
!CartTest methodsFor: 'support' stamp: 'HernanWilkinson 6/17/2013 17:48'!
                       createCart
	
	^Cart acceptingItemsOf: self defaultCatalog! !
!CartTest methodsFor: 'support' stamp: 'HernanWilkinson 6/17/2013 17:43'!
                         defaultCatalog
	
	^ Array with: self itemSellByTheStore! !
!CartTest methodsFor: 'support' stamp: 'HernanWilkinson 6/17/2013 17:44'!
                           itemNotSellByTheStore
	
	^'invalidBook'! !
!CartTest methodsFor: 'support' stamp: 'HernanWilkinson 6/17/2013 17:43'!
           itemSellByTheStore
	
	^ 'validBook'! !

TestCase subclass: #CashierTest
	instanceVariableNames: 'catalog cashier cart card merchantProcessorSimulator currentDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CashierTest category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:51'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'catalog cashier cart card merchantProcessorSimulator currentDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CashierTest methodsFor: 'testing' stamp: 'LS 11/7/2019 15:48:30'!
                         test01NewCashierWith
	
	cart := Cart acceptingItemsOf: (Dictionary with: 'validBook'->100).
		
	self should: [ cashier checkOut: cart withCard: card ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmpty.
			]
		
		 ! !
!CashierTest methodsFor: 'testing' stamp: 'cmmmmm 11/7/2019 16:27:43'!
            test02CheckoutACartWith1ElementIsCorrect
	
	catalog add:'validBook'->100.
	
	cart add: 'validBook'.
	
	self assert: 100 equals: (cashier checkOut: cart withCard: card) .	

		
		 ! !
!CashierTest methodsFor: 'testing' stamp: 'LS 11/7/2019 15:49:26'!
       test03CheckoutACartWithSeveralElementGivesCorrectSubtotal

	catalog add:'validBook'->100; add:'validBook2'->50.
		
	cart add: 'validBook'.
	cart add: 'validBook2'.
	
	self assert: 150 equals: (cashier checkOut: cart withCard: card) .	

		
		 ! !
!CashierTest methodsFor: 'testing' stamp: 'LS 11/6/2019 16:44:34'!
       test04CannotCheckoutACartWithAnExpiredCreditCard

	| anExpiredCard anExpiredDate |
	
	anExpiredDate := GregorianMonthOfYear decemberOf: 2018.
	anExpiredCard := CreditCard withNumber: (10 raisedToInteger: 15) expirationDate: anExpiredDate owner: 'San Martin'.
	
	catalog add:'validBook'->100.
	
	cart add: 'validBook'.	

	self should: [ cashier checkOut: cart withCard: anExpiredCard ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier creditCardExpired .
			]
		
		 ! !
!CashierTest methodsFor: 'setUp/tearDown' stamp: 'LS 11/7/2019 15:51:40'!
                              setUp

	| aValidExpirationDate aSalesBook |

	aValidExpirationDate := GregorianMonthOfYear decemberOf: 2020.
	aSalesBook := OrderedCollection new.

	currentDate := GregorianMonthOfYear decemberOf: 2019.	
	merchantProcessorSimulator := MerchantProcessorSimulator onDate: currentDate.
	catalog := Dictionary new.
	cashier := Cashier with: aSalesBook onDate: currentDate withMerchantProcessor: merchantProcessorSimulator.
	cart := Cart acceptingItemsOf: catalog.
	card := CreditCard withNumber: (10 raisedToInteger: 15) expirationDate: aValidExpirationDate owner: 'San Martin'.
		
		 ! !

TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCardTest category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:51'!
TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 19:51:19'!
                           test01CannotCreateCardWithInvalidNumber
	| aPerson anExpirationDate anId |
	
	aPerson := 'San Martin'.
	anExpirationDate := GregorianMonthOfYear current.
	anId := 0.
	
self should: [  CreditCard withNumber: anId expirationDate: anExpirationDate owner: aPerson ]
	raise: Error - MessageNotUnderstood
	withExceptionDo: [ :anError |
		self assert: anError messageText = CreditCard invalidNumber.
			]! !
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:09:18'!
                         test02CannotCreateCardWithInvalidGreaterNumber
	| aPerson anExpirationDate anId |
	
	aPerson := 'San Martin'.
	anExpirationDate := GregorianMonthOfYear current.
	anId := 10 raisedToInteger: 16.
	
self should: [  CreditCard withNumber: anId expirationDate: anExpirationDate owner: aPerson ]
	raise: Error - MessageNotUnderstood
	withExceptionDo: [ :anError |
		self assert: anError messageText = CreditCard invalidNumber.
			]! !
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:10:32'!
                             test03CannotCreateCardWithemptyOwner
	| aPerson anExpirationDate anId |
	
	aPerson := ''.
	anExpirationDate := GregorianMonthOfYear current.
	anId := 10 raisedToInteger: 15.
	
self should: [  CreditCard withNumber: anId expirationDate: anExpirationDate owner: aPerson ]
	raise: Error - MessageNotUnderstood
	withExceptionDo: [ :anError |
		self assert: anError messageText = CreditCard invalidOwner.
			]! !

Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cart category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:51'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cart methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                             invalidItemErrorMessage
	
	^'Item is not in catalog'! !
!Cart methodsFor: 'error messages' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                           invalidQuantityErrorMessage
	
	^'Invalid number of items'! !
!Cart methodsFor: 'assertions' stamp: 'cmmmmm 11/4/2019 19:24:33'!
assertIsValidItem: anItem

	(catalog includesKey: anItem) ifFalse: [ self error: self invalidItemErrorMessage ]! !
!Cart methodsFor: 'assertions' stamp: 'HernanWilkinson 6/17/2013 17:51'!
    assertIsValidQuantity: aQuantity

	aQuantity strictlyPositive ifFalse: [ self error: self invalidQuantityErrorMessage ]! !
!Cart methodsFor: 'initialization' stamp: 'HernanWilkinson 6/17/2013 17:48'!
                        initializeAcceptingItemsOf: aCatalog

	catalog := aCatalog.
	items := OrderedCollection new.! !
!Cart methodsFor: 'queries' stamp: 'HernanWilkinson 6/17/2013 17:45'!
                          occurrencesOf: anItem

	^items occurrencesOf: anItem  ! !
!Cart methodsFor: 'queries' stamp: 'cmmmmm 11/4/2019 19:13:41'!
      subtotal
	| sum |

	sum _ 0.
	catalog do: [:anItem | sum _ sum + anItem ]. 
	^sum.! !
!Cart methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 17:44'!
    includes: anItem

	^items includes: anItem ! !
!Cart methodsFor: 'testing' stamp: 'HernanWilkinson 6/17/2013 17:44'!
           isEmpty
	
	^items isEmpty ! !
!Cart methodsFor: 'adding' stamp: 'HernanWilkinson 6/17/2013 17:44'!
                             add: anItem

	^ self add: 1 of: anItem ! !
!Cart methodsFor: 'adding' stamp: 'HernanWilkinson 6/17/2013 17:51'!
                add: aQuantity of: anItem

	self assertIsValidQuantity: aQuantity.
	self assertIsValidItem: anItem.

	1 to: aQuantity do: [ :aNumber | items add: anItem ]! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Cart class
	instanceVariableNames: ''!

!classDefinition: 'Cart class' category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:51'!
Cart class
	instanceVariableNames: ''!
!Cart class methodsFor: 'instance creation' stamp: 'HernanWilkinson 6/17/2013 17:48'!
        acceptingItemsOf: aCatalog

	^self new initializeAcceptingItemsOf: aCatalog ! !

Object subclass: #Cashier
	instanceVariableNames: 'salesBook gregorianMonthOfYear currentDate merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cashier category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:51'!
Object subclass: #Cashier
	instanceVariableNames: 'salesBook gregorianMonthOfYear currentDate merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cashier methodsFor: 'initialization' stamp: 'LS 11/7/2019 15:41:07'!
     initializeWith: aSalesBook onDate: aGregorianMonthOfYear withMerchantProcessor: aMerchantProcessor
	
	salesBook := aSalesBook.
	currentDate := aGregorianMonthOfYear.
	merchantProcessor := aMerchantProcessor.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'LS 10/31/2019 21:30:50'!
 cartCanNotBeEmpty
	self shouldBeImplemented.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 16:29:18'!
 checkOut: aCart withCard: aCreditCard
	
	aCart isEmpty ifTrue: [self error: Cashier cartCanNotBeEmpty.].
	^merchantProcessor post: aCreditCard withAmount: aCart subtotal.! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

Cashier class
	instanceVariableNames: ''!

!classDefinition: 'Cashier class' category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:51'!
Cashier class
	instanceVariableNames: ''!
!Cashier class methodsFor: 'instance creation' stamp: 'LS 10/31/2019 21:29:23'!
                     cartCanNotBeEmpty
	^'cart can not be empty'! !
!Cashier class methodsFor: 'instance creation' stamp: 'LS 11/7/2019 15:43:18'!
  with: aSalesBook onDate: aGregorianMonthOfYear withMerchantProcessor: aMerchantProcessor

	^self new initializeWith: aSalesBook onDate: aGregorianMonthOfYear withMerchantProcessor: aMerchantProcessor.! !
!Cashier class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:34:06'!
                               creditCardExpired
	^'credit card expired'! !

Object subclass: #CreditCard
	instanceVariableNames: 'id expirationDate person'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:51'!
Object subclass: #CreditCard
	instanceVariableNames: 'id expirationDate person'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 20:14:54'!
initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	id := anId.
	expirationDate := anExpirationDate.
	person := aPerson.
	self isValid.! !
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/4/2019 20:14:34'!
             isValid

	(id between: (10 raisedToInteger: 15) and: ((10 raisedToInteger: 16) -1)) ifFalse: [self error: CreditCard invalidNumber].
	person isEmpty ifTrue: [self error: CreditCard invalidOwner].
	^true.! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:33:41'!
                               date
	^expirationDate ! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

CreditCard class
	instanceVariableNames: ''!

!classDefinition: 'CreditCard class' category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:51'!
CreditCard class
	instanceVariableNames: ''!
!CreditCard class methodsFor: 'instance creation' stamp: 'cmmmmm 11/4/2019 19:53:38'!
                          withNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	^self new initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson ! !
!CreditCard class methodsFor: 'Error Handling' stamp: 'cmmmmm 11/4/2019 19:56:26'!
               invalidNumber
	^'Invalid card Number'.! !
!CreditCard class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/4/2019 20:12:01'!
                              invalidOwner
	^'InvalidOwner'.! !

Object subclass: #MerchantProcessorSimulator
	instanceVariableNames: 'creditCard currentDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #MerchantProcessorSimulator category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:51'!
Object subclass: #MerchantProcessorSimulator
	instanceVariableNames: 'creditCard currentDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!MerchantProcessorSimulator methodsFor: 'initialization' stamp: 'LS 11/7/2019 15:53:16'!
                   initializeOnDate: aGregorianMonthOfYear 
	currentDate := aGregorianMonthOfYear.! !
!MerchantProcessorSimulator methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 16:28:58'!
           post: aCreditCard withAmount: anAmount

	aCreditCard date < currentDate ifTrue: [self error: MerchantProcessorSimulator creditCardExpired.].
	^anAmount ! !

"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!

MerchantProcessorSimulator class
	instanceVariableNames: ''!

!classDefinition: 'MerchantProcessorSimulator class' category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:45:51'!
MerchantProcessorSimulator class
	instanceVariableNames: ''!
!MerchantProcessorSimulator class methodsFor: 'initialization' stamp: 'cmmmmm 11/7/2019 16:26:59'!
                           onDate: aGregorianMonthOfYear 
	^self new initializeOnDate: aGregorianMonthOfYear.! !
!MerchantProcessorSimulator class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/7/2019 16:33:04'!
  creditCardExpired
	^'credit card expired'! !

----End fileIn of /Users/cmurga/Documents/Facultad/ejerciciosIS1/TusLibros/2/TusLibros.st----!

TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCardTest category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:46:25'!
TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCardTest methodsFor: 'nil' stamp: 'cmmmmm 11/11/2019 18:46:36'!
      test01CannotCreateCardWithInvalidNumber
	| aPerson anExpirationDate anId |
	
	aPerson := 'San Martin'.
	anExpirationDate := GregorianMonthOfYear current.
	anId := 0.
	
self should: [  CreditCard withNumber: anId expirationDate: anExpirationDate owner: aPerson ]
	raise: Error - MessageNotUnderstood
	withExceptionDo: [ :anError |
		self assert: anError messageText = CreditCard invalidNumber.
			]! !
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:46:44'!
                        test02CannotCreateCardWithInvalidGreaterNumber
	| aPerson anExpirationDate anId |
	
	aPerson := 'San Martin'.
	anExpirationDate := GregorianMonthOfYear current.
	anId := 10 raisedToInteger: 16.
	
self should: [  CreditCard withNumber: anId expirationDate: anExpirationDate owner: aPerson ]
	raise: Error - MessageNotUnderstood
	withExceptionDo: [ :anError |
		self assert: anError messageText = CreditCard invalidNumber.
			]! !
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:46:51'!
                            test03CannotCreateCardWithemptyOwner
	| aPerson anExpirationDate anId |
	
	aPerson := ''.
	anExpirationDate := GregorianMonthOfYear current.
	anId := 10 raisedToInteger: 15.
	
self should: [  CreditCard withNumber: anId expirationDate: anExpirationDate owner: aPerson ]
	raise: Error - MessageNotUnderstood
	withExceptionDo: [ :anError |
		self assert: anError messageText = CreditCard invalidOwner.
			]! !

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:47:09'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration expirationDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCard methodsFor: 'nil' stamp: 'cmmmmm 11/11/2019 18:47:05'!
                     date
	^expirationDate ! !

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:47:25'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration expirationDate id'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/11/2019 18:47:26'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration expirationDate id person'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCard methodsFor: 'nil' stamp: 'cmmmmm 11/11/2019 18:47:22'!
                      isValid

	(id between: (10 raisedToInteger: 15) and: ((10 raisedToInteger: 16) -1)) ifFalse: [self error: CreditCard invalidNumber].
	person isEmpty ifTrue: [self error: CreditCard invalidOwner].
	^true.! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:47:37'!
                              initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	id := anId.
	expirationDate := anExpirationDate.
	person := aPerson.
	self isValid.! !
!CreditCard class methodsFor: 'nil' stamp: 'cmmmmm 11/11/2019 18:47:50'!
                 withNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	^self new initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson ! !
!CreditCard class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:47:57'!
         invalidNumber
	^'Invalid card Number'.! !
!CreditCard class methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 18:48:05'!
                             invalidOwner
	^'InvalidOwner'.! !

----QUIT----(11 November 2019 18:50:38) CuisUniversity-3938.image priorSource: 250123!

!testRun: #CreditCardTest #test01CannotCreateCardWithInvalidNumber stamp: 'cmmmmm 11/11/2019 18:50:49'!
PASSED!

!testRun: #CreditCardTest #test02CannotCreateCardWithInvalidGreaterNumber stamp: 'cmmmmm 11/11/2019 18:50:49'!
PASSED!

!testRun: #CreditCardTest #test03CannotCreateCardWithemptyOwner stamp: 'cmmmmm 11/11/2019 18:50:49'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'cmmmmm 11/11/2019 18:51:14'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'cmmmmm 11/11/2019 18:51:14'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'cmmmmm 11/11/2019 18:51:14'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'cmmmmm 11/11/2019 18:51:14'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'cmmmmm 11/11/2019 18:51:14'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'cmmmmm 11/11/2019 18:51:14'!
PASSED!
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'cmmmmm 11/11/2019 18:55:24' prior: 50337623!
                 expiredCreditCard
	
	^CreditCard withNumber: self validCardNumber expirationDate: (Month month: today monthIndex year: today yearNumber - 1) owner: self validOwner.! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'cmmmmm 11/11/2019 18:55:53' prior: 50337630!
                notExpiredCreditCard
	
	^CreditCard withNumber: self validCardNumber expirationDate: (Month month: today monthIndex year: today yearNumber + 1) owner: self validOwner.! !
!StoreTestObjectsFactory methodsFor: 'login' stamp: 'cmmmmm 11/11/2019 18:56:55'!
   validOwner
	^'Valid Owner Perez'! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'cmmmmm 11/11/2019 18:57:48'!
    validCardNumber
	^1234123412341234! !

!testRun: #CreditCardTest #test01CannotCreateCardWithInvalidNumber stamp: 'cmmmmm 11/11/2019 18:58:10'!
PASSED!

!testRun: #CreditCardTest #test02CannotCreateCardWithInvalidGreaterNumber stamp: 'cmmmmm 11/11/2019 18:58:10'!
PASSED!

!testRun: #CreditCardTest #test03CannotCreateCardWithemptyOwner stamp: 'cmmmmm 11/11/2019 18:58:10'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'cmmmmm 11/11/2019 18:58:14'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'cmmmmm 11/11/2019 18:58:14'!
ERROR!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'cmmmmm 11/11/2019 18:58:14'!
ERROR!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'cmmmmm 11/11/2019 18:58:14'!
ERROR!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'cmmmmm 11/11/2019 18:58:14'!
ERROR!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'cmmmmm 11/11/2019 18:58:14'!
ERROR!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'cmmmmm 11/11/2019 18:58:23'!
ERROR!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:00:32' prior: 50340927!
           initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	id := anId.
	expiration := anExpirationDate.
	person := aPerson.
	self isValid.! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:01:15' prior: 50340898!
                           date
	^expiration! !

Object subclass: #CreditCard
	instanceVariableNames: 'expiration id person'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/11/2019 19:01:53'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration id person'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!testRun: #CreditCardTest #test01CannotCreateCardWithInvalidNumber stamp: 'cmmmmm 11/11/2019 19:01:57'!
PASSED!

!testRun: #CreditCardTest #test02CannotCreateCardWithInvalidGreaterNumber stamp: 'cmmmmm 11/11/2019 19:01:57'!
PASSED!

!testRun: #CreditCardTest #test03CannotCreateCardWithemptyOwner stamp: 'cmmmmm 11/11/2019 19:01:57'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'cmmmmm 11/11/2019 19:02:05'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'cmmmmm 11/11/2019 19:02:05'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'cmmmmm 11/11/2019 19:02:05'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'cmmmmm 11/11/2019 19:02:05'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'cmmmmm 11/11/2019 19:02:05'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'cmmmmm 11/11/2019 19:02:05'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'cmmmmm 11/11/2019 19:02:10'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'cmmmmm 11/11/2019 19:02:10'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'cmmmmm 11/11/2019 19:02:10'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'cmmmmm 11/11/2019 19:02:10'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'cmmmmm 11/11/2019 19:02:10'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'cmmmmm 11/11/2019 19:02:10'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'cmmmmm 11/11/2019 19:02:10'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'cmmmmm 11/11/2019 19:02:10'!
PASSED!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/11/2019 19:02:14'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/11/2019 19:02:14'!
PASSED!

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 19:02:14'!
PASSED!

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 19:02:14'!
PASSED!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 19:02:14'!
FAILURE!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 19:02:14'!
FAILURE!

----SNAPSHOT----(11 November 2019 19:03:06) CuisUniversity-3938.image priorSource: 250123!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/11/2019 19:03:14'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/11/2019 19:03:14'!
PASSED!

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 19:03:14'!
PASSED!

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 19:03:14'!
PASSED!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 19:03:14'!
FAILURE!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 19:03:14'!
FAILURE!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 19:03:30'!
FAILURE!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/11/2019 19:05:25'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/11/2019 19:05:25'!
PASSED!

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 19:05:25'!
PASSED!

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 19:05:25'!
PASSED!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 19:05:25'!
FAILURE!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 19:05:25'!
FAILURE!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:08:29'!
      expirationDate
	^expiration! !

!methodRemoval: CreditCard #date stamp: 'cmmmmm 11/11/2019 19:08:29'!
date
	^expiration!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:08:47' prior: 50339402!
   test05zxxxxxxxx

"Recurso: /checkOutCart Parmetros:
cartId: Id del carrito creado con /createCart
ccn: Nmero de tarjeta de credito
cced: Fecha de expiracin con 2 digitos para el mes y 4 para el ao cco: Nombre del dueo de la tarjeta."

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartID aValidCreditCard |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	aValidCreditCard := testObjectsFactory notExpiredCreditCard.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartID := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self 
		should: [ anAPIRest checkOutCart: aCartID creditCardNumber: aValidCreditCard number creditCardDateOfExpiration: aValidCreditCard expirationDate owner: aValidCreditCard owner. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = APIRest errorCheckOutEmptyCart.
			].
	self assert: (anAPIRest listPurchases: aValidClientID password: aValidPassword) isEmpty.! !

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 19:09:19'!
ERROR!
!CreditCard methodsFor: 'accessing' stamp: 'cmmmmm 11/11/2019 19:09:27'!
              number
	self shouldBeImplemented.! !
!CreditCard methodsFor: 'accessing' stamp: 'cmmmmm 11/11/2019 19:09:59' prior: 50341242!
  number
	^id! !

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 19:10:16'!
ERROR!
!CreditCard methodsFor: 'accessing' stamp: 'cmmmmm 11/11/2019 19:10:23'!
                   owner
	self shouldBeImplemented.! !

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/11/2019 19:10:46'!
Object subclass: #CreditCard
	instanceVariableNames: 'owner id person'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:10:46' prior: 50337531!
                   initializeExpiringOn: aMonth 
	
	owner := aMonth ! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:10:46' prior: 50341193!
        expirationDate
	^owner! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:10:46' prior: 50337525!
   isExpiredOn: aDate 
	
	^owner start < (Month month: aDate monthIndex year: aDate yearNumber) start ! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:10:46' prior: 50341047!
                      initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	id := anId.
	owner := anExpirationDate.
	person := aPerson.
	self isValid.! !

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/11/2019 19:11:35'!
Object subclass: #CreditCard
	instanceVariableNames: 'expirationDate id person'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:11:35' prior: 50341264!
                 initializeExpiringOn: aMonth 
	
	expirationDate := aMonth ! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:11:35' prior: 50341269!
                               expirationDate
	^expirationDate! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:11:35' prior: 50341273!
                          isExpiredOn: aDate 
	
	^expirationDate start < (Month month: aDate monthIndex year: aDate yearNumber) start ! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:11:35' prior: 50341280!
             initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	id := anId.
	expirationDate := anExpirationDate.
	person := aPerson.
	self isValid.! !

Object subclass: #CreditCard
	instanceVariableNames: 'expirationDate id owner'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CreditCard category: #TusLibros stamp: 'cmmmmm 11/11/2019 19:12:02'!
Object subclass: #CreditCard
	instanceVariableNames: 'expirationDate id owner'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CreditCard methodsFor: 'initialization' stamp: 'cmmmmm 11/11/2019 19:12:10' prior: 50341314!
                        initializeWithNumber: anId expirationDate: anExpirationDate owner: aPerson 
	
	id := anId.
	expirationDate := anExpirationDate.
	owner := aPerson.
	self isValid.! !
!CreditCard methodsFor: 'testing' stamp: 'cmmmmm 11/11/2019 19:12:23' prior: 50340917!
    isValid

	(id between: (10 raisedToInteger: 15) and: ((10 raisedToInteger: 16) -1)) ifFalse: [self error: CreditCard invalidNumber].
	owner isEmpty ifTrue: [self error: CreditCard invalidOwner].
	^true.! !
!CreditCard methodsFor: 'accessing' stamp: 'cmmmmm 11/11/2019 19:12:48' prior: 50341252!
                         owner
	^owner.! !

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 19:13:57'!
FAILURE!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 19:14:24'!
FAILURE!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:15:51' prior: 50341200!
                            test05zxxxxxxxx

"Recurso: /checkOutCart Parmetros:
cartId: Id del carrito creado con /createCart
ccn: Nmero de tarjeta de credito
cced: Fecha de expiracin con 2 digitos para el mes y 4 para el ao cco: Nombre del dueo de la tarjeta."

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartID aValidCreditCard |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	aValidCreditCard := testObjectsFactory notExpiredCreditCard.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartID := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self 
		should: [ anAPIRest checkOutCart: aCartID creditCardNumber: aValidCreditCard number creditCardDateOfExpiration: aValidCreditCard expirationDate owner: aValidCreditCard owner. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmptyErrorMessage.
			].
	self assert: (anAPIRest listPurchases: aValidClientID password: aValidPassword) isEmpty.! !

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 19:15:53'!
ERROR!
!APIRest methodsFor: 'accessing' stamp: 'cmmmmm 11/11/2019 19:16:04'!
          listPurchases: aString password: aString2 
	self shouldBeImplemented.! !
!APIRest methodsFor: 'accessing' stamp: 'cmmmmm 11/11/2019 19:16:54' prior: 50341405!
 listPurchases: aClientID password: aPassword
	^OrderedCollection new.
	! !

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 19:16:56'!
PASSED!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/11/2019 19:16:56'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/11/2019 19:16:56'!
PASSED!

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 19:16:56'!
PASSED!

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 19:16:56'!
PASSED!

!testRun: #APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 19:16:56'!
PASSED!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:18:08'!
                        test05checkOutOfNewCartRaiseErrorAndListPurchasesIsEmpty

"Recurso: /checkOutCart Parmetros:
cartId: Id del carrito creado con /createCart
ccn: Nmero de tarjeta de credito
cced: Fecha de expiracin con 2 digitos para el mes y 4 para el ao cco: Nombre del dueo de la tarjeta."

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartID aValidCreditCard |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	aValidCreditCard := testObjectsFactory notExpiredCreditCard.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartID := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self 
		should: [ anAPIRest checkOutCart: aCartID creditCardNumber: aValidCreditCard number creditCardDateOfExpiration: aValidCreditCard expirationDate owner: aValidCreditCard owner. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmptyErrorMessage.
			].
	self assert: (anAPIRest listPurchases: aValidClientID password: aValidPassword) isEmpty.! !

!methodRemoval: APIRestTest #test05zxxxxxxxx stamp: 'cmmmmm 11/11/2019 19:18:08'!
test05zxxxxxxxx

"Recurso: /checkOutCart Parmetros:
cartId: Id del carrito creado con /createCart
ccn: Nmero de tarjeta de credito
cced: Fecha de expiracin con 2 digitos para el mes y 4 para el ao cco: Nombre del dueo de la tarjeta."

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartID aValidCreditCard |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	aValidCreditCard := testObjectsFactory notExpiredCreditCard.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartID := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self 
		should: [ anAPIRest checkOutCart: aCartID creditCardNumber: aValidCreditCard number creditCardDateOfExpiration: aValidCreditCard expirationDate owner: aValidCreditCard owner. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmptyErrorMessage.
			].
	self assert: (anAPIRest listPurchases: aValidClientID password: aValidPassword) isEmpty.!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:18:16' prior: 50341435!
            test05checkOutOfNewCartRaiseErrorAndListPurchasesIsEmpty

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartID aValidCreditCard |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	aValidCreditCard := testObjectsFactory notExpiredCreditCard.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartID := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	self 
		should: [ anAPIRest checkOutCart: aCartID creditCardNumber: aValidCreditCard number creditCardDateOfExpiration: aValidCreditCard expirationDate owner: aValidCreditCard owner. ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: anError messageText = Cashier cartCanNotBeEmptyErrorMessage.
			].
	self assert: (anAPIRest listPurchases: aValidClientID password: aValidPassword) isEmpty.! !

!testRun: #APIRestTest #test05checkOutOfNewCartRaiseErrorAndListPurchasesIsEmpty stamp: 'cmmmmm 11/11/2019 19:18:17'!
PASSED!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/11/2019 19:18:17'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/11/2019 19:18:17'!
PASSED!

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 19:18:17'!
PASSED!

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 19:18:17'!
PASSED!

!testRun: #APIRestTest #test05checkOutOfNewCartRaiseErrorAndListPurchasesIsEmpty stamp: 'cmmmmm 11/11/2019 19:18:17'!
PASSED!
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:20:55'!
            test06checkOutOfACartWithABookIsInListPurchases

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aCartID aValidCreditCard aCartId anIsbn |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	aValidCreditCard := testObjectsFactory notExpiredCreditCard.
	anIsbn := testObjectsFactory itemSellByTheStore.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartId := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	anAPIRest addToCart: aCartId book: anIsbn quantity: 1.
			
			
	anAPIRest checkOutCart: aCartID creditCardNumber: aValidCreditCard number creditCardDateOfExpiration: aValidCreditCard expirationDate owner: aValidCreditCard owner.
		
	self assert: (anAPIRest listPurchases: aValidClientID password: aValidPassword) includes: anIsbn.! !
!APIRestTest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:21:32' prior: 50341572!
test06checkOutOfACartWithABookIsInListPurchases

	| anAPIRest aValidClientID aValidPassword testObjectsFactory anUserDatabase aValidCreditCard aCartId anIsbn |
	
	testObjectsFactory := StoreTestObjectsFactory new.
	
	aValidClientID := testObjectsFactory validClientID.
	aValidPassword := testObjectsFactory validPassword.
	anUserDatabase := testObjectsFactory userDatabase.
	aValidCreditCard := testObjectsFactory notExpiredCreditCard.
	anIsbn := testObjectsFactory itemSellByTheStore.
	
	anAPIRest := APIRest with: anUserDatabase.
	aCartId := anAPIRest createCart: aValidClientID withPassword: aValidPassword.
	
	anAPIRest addToCart: aCartId book: anIsbn quantity: 1.
			
			
	anAPIRest checkOutCart: aCartId creditCardNumber: aValidCreditCard number creditCardDateOfExpiration: aValidCreditCard expirationDate owner: aValidCreditCard owner.
		
	self assert: (anAPIRest listPurchases: aValidClientID password: aValidPassword) includes: anIsbn.! !

!testRun: #APIRestTest #test06checkOutOfACartWithABookIsInListPurchases stamp: 'cmmmmm 11/11/2019 19:21:39'!
FAILURE!
!APIRest methodsFor: 'as yet unclassified' stamp: 'cmmmmm 11/11/2019 19:24:38' prior: 50339374!
                     checkOutCart: aCartID creditCardNumber: aCreditCardNumber creditCardDateOfExpiration: aCreditCardExpiringDate owner: aValidOwner
	
	| testObjectsFactory cashier salesBook |
	testObjectsFactory := StoreTestObjectsFactory new.
	salesBook := OrderedCollection new.
	
	cashier := Cashier 
		toCheckout: (cartDatabase at: aCartID)
		charging: testObjectsFactory notExpiredCreditCard
		throught: CashierTest new
		on: testObjectsFactory today
		registeringOn: salesBook.
	cashier checkOut.
	! !

!testRun: #APIRestTest #test06checkOutOfACartWithABookIsInListPurchases stamp: 'cmmmmm 11/11/2019 19:25:10'!
ERROR!

!testRun: #APIRestTest #test01LoginWithInvalidClientID stamp: 'cmmmmm 11/11/2019 19:25:43'!
PASSED!

!testRun: #APIRestTest #test02LoginWithValidIDInvalidPassword stamp: 'cmmmmm 11/11/2019 19:25:43'!
PASSED!

!testRun: #APIRestTest #test03ListOfNewCartOnValidLoginIsEmpty stamp: 'cmmmmm 11/11/2019 19:25:43'!
PASSED!

!testRun: #APIRestTest #test04AddABookToAnEmptyNewCartAndListItShouldShowTheBook stamp: 'cmmmmm 11/11/2019 19:25:43'!
PASSED!

!testRun: #APIRestTest #test05checkOutOfNewCartRaiseErrorAndListPurchasesIsEmpty stamp: 'cmmmmm 11/11/2019 19:25:43'!
PASSED!

!testRun: #APIRestTest #test06checkOutOfACartWithABookIsInListPurchases stamp: 'cmmmmm 11/11/2019 19:25:43'!
ERROR!

!testRun: #APIRestTest #test06checkOutOfACartWithABookIsInListPurchases stamp: 'cmmmmm 11/11/2019 19:25:43'!
ERROR!

----SNAPSHOT----(11 November 2019 19:49:42) CuisUniversity-3938.image priorSource: 303933!